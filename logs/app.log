2025-06-27 03:37:21,661 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 03:37:21,667 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 03:37:21,667 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 03:37:22,439 - INFO - app.main - Application startup event triggered.
2025-06-27 03:37:22,493 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 03:37:22,493 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 03:37:22,500 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 03:37:22,511 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 03:37:22,511 - INFO - app.main - Firebase events processor background task started
2025-06-27 03:37:22,511 - INFO - app.main - Redis publisher background task started
2025-06-27 03:37:22,511 - INFO - app.main - Pending order checker background task started
2025-06-27 03:37:22,511 - INFO - app.main - Generating initial service account token...
2025-06-27 03:37:22,511 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 03:37:24,057 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 03:37:24,060 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 03:37:24,061 - INFO - app.main - Application startup event finished.
2025-06-27 03:37:24,061 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 03:37:24,062 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 03:37:24,892 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 03:37:27,020 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 03:37:27,021 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 03:37:27,021 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 03:37:30,036 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 03:37:30,047 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 03:37:30,060 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 03:37:30,074 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 03:37:30,084 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 03:37:30,098 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 03:37:30,111 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 03:37:30,122 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 03:37:30,132 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 03:37:30,147 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 03:37:30,160 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 03:37:30,172 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 03:37:30,181 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 03:37:30,191 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 03:37:30,202 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 03:37:30,213 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 03:37:30,222 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 03:37:30,233 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 03:37:30,243 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 03:37:30,255 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 03:37:30,267 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 03:37:30,278 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 03:37:30,290 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 03:37:30,301 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 03:37:30,312 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 03:37:30,325 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 03:37:30,338 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 03:37:30,348 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 03:37:30,359 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 03:37:30,368 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 03:37:30,378 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 03:37:30,389 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 03:37:30,401 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 03:37:30,413 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 03:37:30,423 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 03:37:30,431 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 03:37:30,450 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 03:37:30,467 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 03:37:30,498 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 03:37:30,519 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 03:37:30,537 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 03:37:30,552 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 03:37:30,573 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 03:37:30,600 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 03:37:30,643 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 03:37:30,671 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 03:37:30,697 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 03:37:30,728 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 03:37:30,756 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 03:37:30,767 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 03:37:30,768 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 03:37:30,787 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 03:37:30,814 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 03:37:30,830 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 03:37:30,841 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 03:37:30,853 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 03:37:30,870 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 03:37:30,888 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 03:37:30,903 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 03:37:30,917 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 03:37:30,927 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 03:37:30,937 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 03:37:30,948 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 03:37:30,958 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 03:37:30,973 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 03:37:30,986 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 03:37:30,998 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 03:37:31,009 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 03:37:31,020 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 03:37:31,029 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 03:37:31,041 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 03:37:31,060 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 03:37:31,069 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 03:37:31,081 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 03:37:31,092 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 03:37:31,104 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 03:37:31,115 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 03:37:31,126 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 03:37:31,137 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 03:37:31,147 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 03:37:31,160 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 03:37:31,172 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 03:37:32,090 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:37:32,090 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:37:32,090 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:37:34,400 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.190000000000000000000000, PnL USD=-0.1390820584144645340751043115, Commission=0.10000000, Final PnL=-0.2390820584144645340751043115
2025-06-27 03:37:34,403 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.220000000000000000000000, PnL USD=0.1610423834272747236659102555, Commission=0.10000000, Final PnL=0.0610423834272747236659102555
2025-06-27 03:37:34,404 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05124075836322377571188053583, Commission=0.10000000, Final PnL=-0.04875924163677622428811946417
2025-06-27 03:37:36,654 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.200000000000000000000000, PnL USD=-0.1463957369561398372079405048, Commission=0.10000000, Final PnL=-0.2463957369561398372079405048
2025-06-27 03:37:36,655 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.230000000000000000000000, PnL USD=0.1683550974995608127891315805, Commission=0.10000000, Final PnL=0.0683550974995608127891315805
2025-06-27 03:37:36,656 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05855829478245593488317620191, Commission=0.10000000, Final PnL=-0.04144170521754406511682379809
2025-06-27 03:37:39,039 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89212, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.280000000000000000000000, PnL USD=-0.2049540317385957720911167067, Commission=0.10000000, Final PnL=-0.3049540317385957720911167067
2025-06-27 03:37:39,040 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.300000000000000000000000, PnL USD=0.2195936054342097558119107572, Commission=0.10000000, Final PnL=0.1195936054342097558119107572
2025-06-27 03:37:39,041 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.150000000000000000000000, PnL USD=0.1097968027171048779059553786, Commission=0.10000000, Final PnL=0.0097968027171048779059553786
2025-06-27 03:37:41,260 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.210000000000000000000000, PnL USD=-0.1537188993726804916076800890, Commission=0.10000000, Final PnL=-0.2537188993726804916076800890
2025-06-27 03:37:41,262 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.240000000000000000000000, PnL USD=0.1756787421402062761230629589, Commission=0.10000000, Final PnL=0.0756787421402062761230629589
2025-06-27 03:37:41,264 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.090000000000000000000000, PnL USD=0.06587952830257735354614860958, Commission=0.10000000, Final PnL=-0.03412047169742264645385139042
2025-06-27 03:37:43,518 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.230000000000000000000000, PnL USD=-0.1683550974995608127891315805, Commission=0.10000000, Final PnL=-0.2683550974995608127891315805
2025-06-27 03:37:43,521 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.230000000000000000000000, PnL USD=0.1683550974995608127891315805, Commission=0.10000000, Final PnL=0.0683550974995608127891315805
2025-06-27 03:37:43,522 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05855829478245593488317620191, Commission=0.10000000, Final PnL=-0.04144170521754406511682379809
2025-06-27 03:37:45,870 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.230000000000000000000000, PnL USD=-0.1683550974995608127891315805, Commission=0.10000000, Final PnL=-0.2683550974995608127891315805
2025-06-27 03:37:45,872 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.250000000000000000000000, PnL USD=0.1829946711951747965099256310, Commission=0.10000000, Final PnL=0.0829946711951747965099256310
2025-06-27 03:37:45,873 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.100000000000000000000000, PnL USD=0.07319786847806991860397025239, Commission=0.10000000, Final PnL=-0.02680213152193008139602974761
2025-06-27 03:37:48,123 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.270000000000000000000000, PnL USD=-0.1976429251152917063172534954, Commission=0.10000000, Final PnL=-0.2976429251152917063172534954
2025-06-27 03:37:48,125 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89215, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.280000000000000000000000, PnL USD=0.2049630334528951028475221433, Commission=0.10000000, Final PnL=0.1049630334528951028475221433
2025-06-27 03:37:48,125 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89215, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09516140838884415489349242369, Commission=0.10000000, Final PnL=-0.00483859161115584510650757631
2025-06-27 03:37:50,380 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.170000000000000000000000, PnL USD=-0.1244418417392577410145670156, Commission=0.10000000, Final PnL=-0.2244418417392577410145670156
2025-06-27 03:37:50,380 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.200000000000000000000000, PnL USD=0.1464021667520679306053729595, Commission=0.10000000, Final PnL=0.0464021667520679306053729595
2025-06-27 03:37:50,381 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03660054168801698265134323988, Commission=0.10000000, Final PnL=-0.06339945831198301734865676012
2025-06-27 03:37:52,727 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89214, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.260000000000000000000000, PnL USD=-0.1903116719612349763574345987, Commission=0.10000000, Final PnL=-0.2903116719612349763574345987
2025-06-27 03:37:52,729 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89214, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.290000000000000000000000, PnL USD=0.2122707110336851659371385908, Commission=0.10000000, Final PnL=0.1122707110336851659371385908
2025-06-27 03:37:52,730 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89214, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024755156714342180386186300, Commission=0.10000000, Final PnL=0.0024755156714342180386186300
2025-06-27 03:37:54,878 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.270000000000000000000000, PnL USD=-0.1976327982608313753046838973, Commission=0.10000000, Final PnL=-0.2976327982608313753046838973
2025-06-27 03:37:54,879 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89214, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.290000000000000000000000, PnL USD=0.2122722647986707364383641860, Commission=0.10000000, Final PnL=0.1122722647986707364383641860
2025-06-27 03:37:54,880 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89214, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024762657648755279357620208, Commission=0.10000000, Final PnL=0.0024762657648755279357620208
2025-06-27 03:37:57,336 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89212, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.280000000000000000000000, PnL USD=-0.2049525315297510558715240417, Commission=0.10000000, Final PnL=-0.3049525315297510558715240417
2025-06-27 03:37:57,339 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89212, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.310000000000000000000000, PnL USD=0.2269117313365100975720444747, Commission=0.10000000, Final PnL=0.1269117313365100975720444747
2025-06-27 03:37:57,340 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89212, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1171157323027148890694423095, Commission=0.10000000, Final PnL=0.0171157323027148890694423095
2025-06-27 03:37:59,502 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89212, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.280000000000000000000000, PnL USD=-0.2049540317385957720911167067, Commission=0.10000000, Final PnL=-0.3049540317385957720911167067
2025-06-27 03:37:59,503 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.300000000000000000000000, PnL USD=0.2195936054342097558119107572, Commission=0.10000000, Final PnL=0.1195936054342097558119107572
2025-06-27 03:37:59,504 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.150000000000000000000000, PnL USD=0.1097968027171048779059553786, Commission=0.10000000, Final PnL=0.0097968027171048779059553786
2025-06-27 03:38:01,946 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.290000000000000000000000, PnL USD=-0.2122800339648054343688694990, Commission=0.10000000, Final PnL=-0.3122800339648054343688694990
2025-06-27 03:38:01,948 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.320000000000000000000000, PnL USD=0.2342400374784059965449594472, Commission=0.10000000, Final PnL=0.1342400374784059965449594472
2025-06-27 03:38:01,950 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1244400199104031856645097063, Commission=0.10000000, Final PnL=0.0244400199104031856645097063
2025-06-27 03:38:04,201 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89208, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.320000000000000000000000, PnL USD=-0.2342434668033086889685967352, Commission=0.10000000, Final PnL=-0.3342434668033086889685967352
2025-06-27 03:38:04,203 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89208, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.350000000000000000000000, PnL USD=0.2562037918161188785594026792, Commission=0.10000000, Final PnL=0.1562037918161188785594026792
2025-06-27 03:38:04,204 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89208, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.200000000000000000000000, PnL USD=0.1464021667520679306053729595, Commission=0.10000000, Final PnL=0.0464021667520679306053729595
2025-06-27 03:38:06,574 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.360000000000000000000000, PnL USD=-0.2635123265210517069742929086, Commission=0.10000000, Final PnL=-0.3635123265210517069742929086
2025-06-27 03:38:06,575 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.390000000000000000000000, PnL USD=0.2854716870644726825554839843, Commission=0.10000000, Final PnL=0.1854716870644726825554839843
2025-06-27 03:38:06,576 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.240000000000000000000000, PnL USD=0.1756748843473678046495286057, Commission=0.10000000, Final PnL=0.0756748843473678046495286057
2025-06-27 03:38:08,809 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89203, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.370000000000000000000000, PnL USD=-0.2708301309500281809730853408, Commission=0.10000000, Final PnL=-0.3708301309500281809730853408
2025-06-27 03:38:08,810 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89203, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.400000000000000000000000, PnL USD=0.2927893307567872226736057738, Commission=0.10000000, Final PnL=0.1927893307567872226736057738
2025-06-27 03:38:08,811 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89203, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.250000000000000000000000, PnL USD=0.1829933317229920141710036086, Commission=0.10000000, Final PnL=0.0829933317229920141710036086
2025-06-27 03:38:11,123 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:38:11,123 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:38:11,123 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:38:13,514 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:38:13,514 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:38:13,514 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:38:15,649 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:38:15,649 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:38:15,649 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:38:17,916 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.360000000000000000000000, PnL USD=-0.2635181132103094141845944383, Commission=0.10000000, Final PnL=-0.3635181132103094141845944383
2025-06-27 03:38:17,917 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.390000000000000000000000, PnL USD=0.2854779559778351986999773082, Commission=0.10000000, Final PnL=0.1854779559778351986999773082
2025-06-27 03:38:17,919 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.240000000000000000000000, PnL USD=0.1756787421402062761230629589, Commission=0.10000000, Final PnL=0.0756787421402062761230629589
2025-06-27 03:38:20,384 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.360000000000000000000000, PnL USD=-0.2635181132103094141845944383, Commission=0.10000000, Final PnL=-0.3635181132103094141845944383
2025-06-27 03:38:20,385 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.380000000000000000000000, PnL USD=0.2781580083886599371948496849, Commission=0.10000000, Final PnL=0.1781580083886599371948496849
2025-06-27 03:38:20,388 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.230000000000000000000000, PnL USD=0.1683587945510310146179353356, Commission=0.10000000, Final PnL=0.0683587945510310146179353356
2025-06-27 03:38:22,628 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 03:38:22,634 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.350000000000000000000000, PnL USD=-0.2561962902777167786610449881, Commission=0.10000000, Final PnL=-0.3561962902777167786610449881
2025-06-27 03:38:22,646 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.380000000000000000000000, PnL USD=0.2781559723015210739748488442, Commission=0.10000000, Final PnL=0.1781559723015210739748488442
2025-06-27 03:38:22,647 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.230000000000000000000000, PnL USD=0.1683575621824995974058295636, Commission=0.10000000, Final PnL=0.0683575621824995974058295636
2025-06-27 03:38:22,649 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 03:38:22,665 - INFO - app.core.cache - User data for user 4 (type: live) fetched from DB and cached.
2025-06-27 03:38:22,700 - INFO - app.core.cache - User data for user 8 (type: live) fetched from DB and cached.
2025-06-27 03:38:22,702 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 03:38:22,707 - INFO - app.core.cache - User data for user 9 (type: live) fetched from DB and cached.
2025-06-27 03:38:23,344 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5212100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.8900000000000000000000000, PnL USD=-451.9316260722559639346315196, Commission=0.10000000, Final PnL=-452.0316260722559639346315196
2025-06-27 03:38:23,348 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 03:38:23,356 - INFO - app.core.cache - User data for user 1 (type: demo) fetched from DB and cached.
2025-06-27 03:38:23,381 - INFO - app.core.cache - User data for user 2 (type: demo) fetched from DB and cached.
2025-06-27 03:38:23,381 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 03:38:23,387 - INFO - app.core.cache - User data for user 3 (type: demo) fetched from DB and cached.
2025-06-27 03:38:23,389 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 03:38:23,415 - INFO - app.core.cache - User data for user 5 (type: demo) fetched from DB and cached.
2025-06-27 03:38:23,416 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 03:38:23,962 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8920500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.35000000000000000000000000, PnL USD=-0.2561962902777167786610449881, Commission=0.10000000, Final PnL=-0.3561962902777167786610449881
2025-06-27 03:38:23,963 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8920500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.38000000000000000000000000, PnL USD=0.2781559723015210739748488442, Commission=0.10000000, Final PnL=0.1781559723015210739748488442
2025-06-27 03:38:23,963 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8920500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.23000000000000000000000000, PnL USD=0.1683575621824995974058295636, Commission=0.10000000, Final PnL=0.0683575621824995974058295636
2025-06-27 03:38:23,964 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 03:38:24,884 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.360000000000000000000000, PnL USD=-0.2635239001537222750896713271, Commission=0.10000000, Final PnL=-0.3635239001537222750896713271
2025-06-27 03:38:24,884 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.380000000000000000000000, PnL USD=0.2781641168289290681502086231, Commission=0.10000000, Final PnL=0.1781641168289290681502086231
2025-06-27 03:38:24,885 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.230000000000000000000000, PnL USD=0.1683624917648781201961789034, Commission=0.10000000, Final PnL=0.0683624917648781201961789034
2025-06-27 03:38:27,098 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.360000000000000000000000, PnL USD=-0.2635219711443441596943145135, Commission=0.10000000, Final PnL=-0.3635219711443441596943145135
2025-06-27 03:38:27,098 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.390000000000000000000000, PnL USD=0.2854821354063728396688407229, Commission=0.10000000, Final PnL=0.1854821354063728396688407229
2025-06-27 03:38:27,098 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.240000000000000000000000, PnL USD=0.1756813140962294397962096756, Commission=0.10000000, Final PnL=0.0756813140962294397962096756
2025-06-27 03:38:29,406 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.350000000000000000000000, PnL USD=-0.2562037918161188785594026792, Commission=0.10000000, Final PnL=-0.3562037918161188785594026792
2025-06-27 03:38:29,407 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.370000000000000000000000, PnL USD=0.2708440084913256716199399751, Commission=0.10000000, Final PnL=0.1708440084913256716199399751
2025-06-27 03:38:29,408 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.220000000000000000000000, PnL USD=0.1610423834272747236659102555, Commission=0.10000000, Final PnL=0.0610423834272747236659102555
2025-06-27 03:38:31,828 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.360000000000000000000000, PnL USD=-0.2635239001537222750896713271, Commission=0.10000000, Final PnL=-0.3635239001537222750896713271
2025-06-27 03:38:31,829 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.390000000000000000000000, PnL USD=0.2854842251665324646804772711, Commission=0.10000000, Final PnL=0.1854842251665324646804772711
2025-06-27 03:38:31,830 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.240000000000000000000000, PnL USD=0.1756826001024815167264475514, Commission=0.10000000, Final PnL=0.0756826001024815167264475514
2025-06-27 03:38:34,098 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.350000000000000000000000, PnL USD=-0.2562037918161188785594026792, Commission=0.10000000, Final PnL=-0.3562037918161188785594026792
2025-06-27 03:38:34,101 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.380000000000000000000000, PnL USD=0.2781641168289290681502086231, Commission=0.10000000, Final PnL=0.1781641168289290681502086231
2025-06-27 03:38:34,104 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.230000000000000000000000, PnL USD=0.1683624917648781201961789034, Commission=0.10000000, Final PnL=0.0683624917648781201961789034
2025-06-27 03:38:36,245 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:38:36,245 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:38:36,245 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:38:38,705 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.340000000000000000000000, PnL USD=-0.2488855053473782840076422490, Commission=0.10000000, Final PnL=-0.3488855053473782840076422490
2025-06-27 03:38:38,706 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.370000000000000000000000, PnL USD=0.2708459911133234267141989181, Commission=0.10000000, Final PnL=0.1708459911133234267141989181
2025-06-27 03:38:38,707 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.220000000000000000000000, PnL USD=0.1610435622835977131814155729, Commission=0.10000000, Final PnL=0.0610435622835977131814155729
2025-06-27 03:38:40,958 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.360000000000000000000000, PnL USD=-0.2635258291913417124786800284, Commission=0.10000000, Final PnL=-0.3635258291913417124786800284
2025-06-27 03:38:40,961 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.390000000000000000000000, PnL USD=0.2854863149572868551852366974, Commission=0.10000000, Final PnL=0.1854863149572868551852366974
2025-06-27 03:38:40,965 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.240000000000000000000000, PnL USD=0.1756838861275611416524533523, Commission=0.10000000, Final PnL=0.0756838861275611416524533523
2025-06-27 03:38:43,210 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.340000000000000000000000, PnL USD=-0.2488855053473782840076422490, Commission=0.10000000, Final PnL=-0.3488855053473782840076422490
2025-06-27 03:38:43,213 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.370000000000000000000000, PnL USD=0.2708459911133234267141989181, Commission=0.10000000, Final PnL=0.1708459911133234267141989181
2025-06-27 03:38:43,218 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.220000000000000000000000, PnL USD=0.1610435622835977131814155729, Commission=0.10000000, Final PnL=0.0610435622835977131814155729
2025-06-27 03:38:43,715 - INFO - app.main - Application shutdown event triggered.
2025-06-27 03:38:43,715 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 03:38:43,716 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-27 03:38:43,718 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-27 03:38:43,719 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 03:38:45,267 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 03:38:45,267 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 03:38:45,267 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-27 03:38:45,268 - INFO - app.main - Redis client connection closed.
2025-06-27 03:38:45,268 - INFO - app.main - Application shutdown event finished.
2025-06-27 03:40:00,622 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 03:40:00,628 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 03:40:00,628 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 03:40:01,187 - INFO - app.main - Application startup event triggered.
2025-06-27 03:40:01,232 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 03:40:01,232 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 03:40:01,238 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 03:40:01,245 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 03:40:01,245 - INFO - app.main - Firebase events processor background task started
2025-06-27 03:40:01,245 - INFO - app.main - Redis publisher background task started
2025-06-27 03:40:01,245 - INFO - app.main - Pending order checker background task started
2025-06-27 03:40:01,245 - INFO - app.main - Generating initial service account token...
2025-06-27 03:40:01,246 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 03:40:02,569 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 03:40:02,572 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 03:40:02,572 - INFO - app.main - Application startup event finished.
2025-06-27 03:40:02,573 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 03:40:02,574 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 03:40:03,390 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 03:40:04,018 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 03:40:04,029 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 03:40:04,040 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 03:40:04,053 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 03:40:04,064 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 03:40:04,074 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 03:40:04,084 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 03:40:04,089 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 03:40:04,099 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 03:40:04,110 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 03:40:04,123 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 03:40:04,133 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 03:40:04,142 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 03:40:04,150 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 03:40:04,161 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 03:40:04,172 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 03:40:04,182 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 03:40:04,193 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 03:40:04,203 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 03:40:04,212 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 03:40:04,219 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 03:40:04,228 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 03:40:04,242 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 03:40:04,254 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 03:40:04,269 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 03:40:04,283 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 03:40:04,296 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 03:40:04,309 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 03:40:04,322 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 03:40:04,339 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 03:40:04,352 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 03:40:04,372 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 03:40:04,395 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 03:40:04,419 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 03:40:04,438 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 03:40:04,456 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 03:40:04,473 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 03:40:04,492 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 03:40:04,511 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 03:40:04,536 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 03:40:04,557 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 03:40:04,576 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 03:40:04,607 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 03:40:04,627 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 03:40:04,642 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 03:40:04,657 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 03:40:04,670 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 03:40:04,682 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 03:40:04,695 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 03:40:04,726 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 03:40:04,745 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 03:40:04,789 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 03:40:04,804 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 03:40:04,822 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 03:40:04,852 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 03:40:04,871 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 03:40:04,886 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 03:40:04,899 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 03:40:04,910 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 03:40:04,922 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 03:40:04,935 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 03:40:04,953 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 03:40:04,954 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 03:40:04,954 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 03:40:04,969 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 03:40:04,982 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 03:40:04,995 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 03:40:05,008 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 03:40:05,019 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 03:40:05,031 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 03:40:05,042 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 03:40:05,053 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 03:40:05,064 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 03:40:05,077 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 03:40:05,089 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 03:40:05,102 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 03:40:05,114 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 03:40:05,127 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 03:40:05,137 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 03:40:05,149 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 03:40:05,163 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 03:40:05,175 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 03:40:06,480 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:06,480 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:06,481 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:08,827 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.220000000000000000000000, PnL USD=-0.1610376681745648323012282782, Commission=0.10000000, Final PnL=-0.2610376681745648323012282782
2025-06-27 03:40:08,830 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.250000000000000000000000, PnL USD=0.1829973501983691276150321343, Commission=0.10000000, Final PnL=0.0829973501983691276150321343
2025-06-27 03:40:08,830 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.100000000000000000000000, PnL USD=0.07319894007934765104601285373, Commission=0.10000000, Final PnL=-0.02680105992065234895398714627
2025-06-27 03:40:11,380 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.200000000000000000000000, PnL USD=-0.1463935938163345971980266144, Commission=0.10000000, Final PnL=-0.2463935938163345971980266144
2025-06-27 03:40:11,381 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.230000000000000000000000, PnL USD=0.1683526328887847867777306065, Commission=0.10000000, Final PnL=0.0683526328887847867777306065
2025-06-27 03:40:11,383 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05855743752653383887921064574, Commission=0.10000000, Final PnL=-0.04144256247346616112078935426
2025-06-27 03:40:13,732 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.210000000000000000000000, PnL USD=-0.1537188993726804916076800890, Commission=0.10000000, Final PnL=-0.2537188993726804916076800890
2025-06-27 03:40:13,734 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.240000000000000000000000, PnL USD=0.1756787421402062761230629589, Commission=0.10000000, Final PnL=0.0756787421402062761230629589
2025-06-27 03:40:13,735 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.090000000000000000000000, PnL USD=0.06587952830257735354614860958, Commission=0.10000000, Final PnL=-0.03412047169742264645385139042
2025-06-27 03:40:15,884 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024792662484536610717867260, Commission=0.10000000, Final PnL=-0.2024792662484536610717867260
2025-06-27 03:40:15,886 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1244391090159794455871695959, Commission=0.10000000, Final PnL=0.0244391090159794455871695959
2025-06-27 03:40:15,888 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463989517835052301025524657, Commission=0.10000000, Final PnL=-0.08536010482164947698974475343
2025-06-27 03:40:18,272 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.170000000000000000000000, PnL USD=-0.1244363764127188616267494291, Commission=0.10000000, Final PnL=-0.2244363764127188616267494291
2025-06-27 03:40:18,273 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.180000000000000000000000, PnL USD=0.1317561632605258534871464543, Commission=0.10000000, Final PnL=0.0317561632605258534871464543
2025-06-27 03:40:18,275 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195936054342097558119107572, Commission=0.10000000, Final PnL=-0.07804063945657902441880892428
2025-06-27 03:40:20,898 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.170000000000000000000000, PnL USD=-0.1244372872671375764008344618, Commission=0.10000000, Final PnL=-0.2244372872671375764008344618
2025-06-27 03:40:20,900 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.200000000000000000000000, PnL USD=0.1463968085495736192950993668, Commission=0.10000000, Final PnL=0.0463968085495736192950993668
2025-06-27 03:40:20,902 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03659920213739340482377484171, Commission=0.10000000, Final PnL=-0.06340079786260659517622515829
2025-06-27 03:40:23,051 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097976064121802144713245251, Commission=0.10000000, Final PnL=-0.2097976064121802144713245251
2025-06-27 03:40:23,055 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.180000000000000000000000, PnL USD=0.1317571276946162573655894302, Commission=0.10000000, Final PnL=0.0317571276946162573655894302
2025-06-27 03:40:23,057 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195952128243604289426490503, Commission=0.10000000, Final PnL=-0.07804047871756395710573509497
2025-06-27 03:40:25,423 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.170000000000000000000000, PnL USD=-0.1244372872671375764008344618, Commission=0.10000000, Final PnL=-0.2244372872671375764008344618
2025-06-27 03:40:25,424 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.190000000000000000000000, PnL USD=0.1390769681220949383303443985, Commission=0.10000000, Final PnL=0.0390769681220949383303443985
2025-06-27 03:40:25,428 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02927936170991472385901987337, Commission=0.10000000, Final PnL=-0.07072063829008527614098012663
2025-06-27 03:40:28,066 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097976064121802144713245251, Commission=0.10000000, Final PnL=-0.2097976064121802144713245251
2025-06-27 03:40:28,068 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.180000000000000000000000, PnL USD=0.1317571276946162573655894302, Commission=0.10000000, Final PnL=0.0317571276946162573655894302
2025-06-27 03:40:28,072 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195952128243604289426490503, Commission=0.10000000, Final PnL=-0.07804047871756395710573509497
2025-06-27 03:40:29,498 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:29,498 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:29,498 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:32,265 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:32,265 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:32,265 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:35,232 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:35,232 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:35,232 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:37,589 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:37,589 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:37,589 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:39,943 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:39,943 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:39,943 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:42,268 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:42,268 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:42,268 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:44,672 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.200000000000000000000000, PnL USD=-0.1463968085495736192950993668, Commission=0.10000000, Final PnL=-0.2463968085495736192950993668
2025-06-27 03:40:44,673 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.230000000000000000000000, PnL USD=0.1683563298320096621893642719, Commission=0.10000000, Final PnL=0.0683563298320096621893642719
2025-06-27 03:40:44,674 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05855872341982944771803974673, Commission=0.10000000, Final PnL=-0.04144127658017055228196025327
2025-06-27 03:40:46,860 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:46,860 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:46,860 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:49,636 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:49,636 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:49,636 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:51,925 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:51,925 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:51,926 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:54,489 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:54,489 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:54,489 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:40:56,738 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.220000000000000000000000, PnL USD=-0.1610329531979680569178292758, Commission=0.10000000, Final PnL=-0.2610329531979680569178292758
2025-06-27 03:40:56,738 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.250000000000000000000000, PnL USD=0.1829919922704182464975332679, Commission=0.10000000, Final PnL=0.0829919922704182464975332679
2025-06-27 03:40:56,740 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.100000000000000000000000, PnL USD=0.07319679690816729859901330718, Commission=0.10000000, Final PnL=-0.02680320309183270140098669282
2025-06-27 03:40:58,157 - INFO - app.main - Application shutdown event triggered.
2025-06-27 03:40:58,157 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 03:40:58,157 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-27 03:40:58,159 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 03:40:58,583 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 03:40:58,584 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 03:40:58,584 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-27 03:40:58,588 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-27 03:40:58,591 - INFO - app.main - Redis client connection closed.
2025-06-27 03:40:58,591 - INFO - app.main - Application shutdown event finished.
2025-06-27 03:42:07,024 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 03:42:07,029 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 03:42:07,030 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 03:42:07,619 - INFO - app.main - Application startup event triggered.
2025-06-27 03:42:07,665 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 03:42:07,665 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 03:42:07,670 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 03:42:07,677 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 03:42:07,678 - INFO - app.main - Firebase events processor background task started
2025-06-27 03:42:07,678 - INFO - app.main - Redis publisher background task started
2025-06-27 03:42:07,678 - INFO - app.main - Pending order checker background task started
2025-06-27 03:42:07,678 - INFO - app.main - Generating initial service account token...
2025-06-27 03:42:07,678 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 03:42:08,929 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 03:42:08,934 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 03:42:08,934 - INFO - app.main - Application startup event finished.
2025-06-27 03:42:08,935 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 03:42:08,936 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 03:42:09,856 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 03:42:11,296 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 03:42:11,298 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 03:42:11,298 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 03:42:15,303 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 03:42:15,331 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 03:42:15,354 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 03:42:15,380 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 03:42:15,406 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 03:42:15,428 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 03:42:15,452 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 03:42:15,473 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 03:42:15,497 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 03:42:15,517 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 03:42:15,533 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 03:42:15,544 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 03:42:15,559 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 03:42:15,575 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 03:42:15,588 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 03:42:15,605 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 03:42:15,617 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 03:42:15,629 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 03:42:15,645 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 03:42:15,659 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 03:42:15,674 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 03:42:15,690 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 03:42:15,705 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 03:42:15,722 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 03:42:15,737 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 03:42:15,750 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 03:42:15,767 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 03:42:15,780 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 03:42:15,799 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 03:42:15,813 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 03:42:15,825 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 03:42:15,838 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 03:42:15,851 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 03:42:15,863 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 03:42:15,876 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 03:42:15,890 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 03:42:15,903 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 03:42:15,919 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 03:42:15,933 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 03:42:15,950 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 03:42:15,966 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 03:42:15,980 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 03:42:15,996 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 03:42:16,015 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 03:42:16,031 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 03:42:16,048 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 03:42:16,064 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 03:42:16,080 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 03:42:16,098 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 03:42:16,115 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 03:42:16,136 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 03:42:16,150 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 03:42:16,167 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 03:42:16,183 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 03:42:16,195 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 03:42:16,208 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 03:42:16,222 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 03:42:16,236 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 03:42:16,256 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 03:42:16,275 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 03:42:16,289 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 03:42:16,307 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 03:42:16,323 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 03:42:16,340 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 03:42:16,359 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 03:42:16,379 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 03:42:16,397 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 03:42:16,424 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 03:42:16,445 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 03:42:16,476 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 03:42:16,496 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 03:42:16,512 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 03:42:16,526 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 03:42:16,541 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 03:42:16,554 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 03:42:16,568 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 03:42:16,582 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 03:42:16,598 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 03:42:16,615 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 03:42:19,784 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.160000000000000000000000, PnL USD=-0.1171157323027148890694423095, Commission=0.10000000, Final PnL=-0.2171157323027148890694423095
2025-06-27 03:42:19,786 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.180000000000000000000000, PnL USD=0.1317551988405542502031225982, Commission=0.10000000, Final PnL=0.0317551988405542502031225982
2025-06-27 03:42:19,788 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195919980675904170052043304, Commission=0.10000000, Final PnL=-0.07804080019324095829947956696
2025-06-27 03:42:21,832 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.210000000000000000000000, PnL USD=-0.1537155238039468290683375300, Commission=0.10000000, Final PnL=-0.2537155238039468290683375300
2025-06-27 03:42:21,832 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.230000000000000000000000, PnL USD=0.1683550974995608127891315805, Commission=0.10000000, Final PnL=0.0683550974995608127891315805
2025-06-27 03:42:21,833 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05855829478245593488317620191, Commission=0.10000000, Final PnL=-0.04144170521754406511682379809
2025-06-27 03:42:24,188 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.160000000000000000000000, PnL USD=-0.1171174468396588954360794935, Commission=0.10000000, Final PnL=-0.2171174468396588954360794935
2025-06-27 03:42:24,190 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.180000000000000000000000, PnL USD=0.1317571276946162573655894302, Commission=0.10000000, Final PnL=0.0317571276946162573655894302
2025-06-27 03:42:24,191 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195952128243604289426490503, Commission=0.10000000, Final PnL=-0.07804047871756395710573509497
2025-06-27 03:42:26,548 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097968027171048779059553786, Commission=0.10000000, Final PnL=-0.2097968027171048779059553786
2025-06-27 03:42:26,549 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.180000000000000000000000, PnL USD=0.1317561632605258534871464543, Commission=0.10000000, Final PnL=0.0317561632605258534871464543
2025-06-27 03:42:26,550 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195936054342097558119107572, Commission=0.10000000, Final PnL=-0.07804063945657902441880892428
2025-06-27 03:42:28,899 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:28,899 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:28,899 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:31,149 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:31,149 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:31,150 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:33,314 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.210000000000000000000000, PnL USD=-0.1537166489770523002598543352, Commission=0.10000000, Final PnL=-0.2537166489770523002598543352
2025-06-27 03:42:33,319 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.230000000000000000000000, PnL USD=0.1683563298320096621893642719, Commission=0.10000000, Final PnL=0.0683563298320096621893642719
2025-06-27 03:42:33,322 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05855872341982944771803974673, Commission=0.10000000, Final PnL=-0.04144127658017055228196025327
2025-06-27 03:42:35,761 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097959990337952085026021652, Commission=0.10000000, Final PnL=-0.2097959990337952085026021652
2025-06-27 03:42:35,768 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.180000000000000000000000, PnL USD=0.1317551988405542502031225982, Commission=0.10000000, Final PnL=0.0317551988405542502031225982
2025-06-27 03:42:35,769 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195919980675904170052043304, Commission=0.10000000, Final PnL=-0.07804080019324095829947956696
2025-06-27 03:42:38,008 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:38,008 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:38,008 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:40,220 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:40,220 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:40,220 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:42,521 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.160000000000000000000000, PnL USD=-0.1171174468396588954360794935, Commission=0.10000000, Final PnL=-0.2171174468396588954360794935
2025-06-27 03:42:42,522 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.180000000000000000000000, PnL USD=0.1317571276946162573655894302, Commission=0.10000000, Final PnL=0.0317571276946162573655894302
2025-06-27 03:42:42,524 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195952128243604289426490503, Commission=0.10000000, Final PnL=-0.07804047871756395710573509497
2025-06-27 03:42:44,871 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:44,872 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:44,872 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:47,028 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:47,029 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:47,029 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:49,375 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:49,375 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:49,375 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:51,833 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:51,834 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:51,834 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:54,086 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:54,086 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:54,086 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:56,236 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:56,236 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:56,237 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:58,591 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:58,591 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:42:58,592 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:00,844 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:00,844 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:00,844 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:03,270 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097984101190214765690192806, Commission=0.10000000, Final PnL=-0.2097984101190214765690192806
2025-06-27 03:43:03,271 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.180000000000000000000000, PnL USD=0.1317580921428257718828231367, Commission=0.10000000, Final PnL=0.0317580921428257718828231367
2025-06-27 03:43:03,273 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195968202380429531380385612, Commission=0.10000000, Final PnL=-0.07804031797619570468619614388
2025-06-27 03:43:05,455 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024770158692978860455583533, Commission=0.10000000, Final PnL=-0.2024770158692978860455583533
2025-06-27 03:43:05,456 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1244363764127188616267494291, Commission=0.10000000, Final PnL=0.0244363764127188616267494291
2025-06-27 03:43:05,457 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463957369561398372079405048, Commission=0.10000000, Final PnL=-0.08536042630438601627920594952
2025-06-27 03:43:07,811 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 03:43:07,819 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.160000000000000000000000, PnL USD=-0.1171183041269562416736205660, Commission=0.10000000, Final PnL=-0.2171183041269562416736205660
2025-06-27 03:43:07,821 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1244381981348910067782218513, Commission=0.10000000, Final PnL=0.0244381981348910067782218513
2025-06-27 03:43:07,837 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463978801586953020920257075, Commission=0.10000000, Final PnL=-0.08536021198413046979079742925
2025-06-27 03:43:07,840 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 03:43:07,925 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 03:43:08,524 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5211800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.9200000000000000000000000, PnL USD=-452.0824199912319158263919334, Commission=0.10000000, Final PnL=-452.1824199912319158263919334
2025-06-27 03:43:08,531 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 03:43:08,567 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 03:43:08,584 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 03:43:08,623 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 03:43:09,141 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8922400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.16000000000000000000000000, PnL USD=-0.1171183041269562416736205660, Commission=0.10000000, Final PnL=-0.2171183041269562416736205660
2025-06-27 03:43:09,142 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8922600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.17000000000000000000000000, PnL USD=0.1244381981348910067782218513, Commission=0.10000000, Final PnL=0.0244381981348910067782218513
2025-06-27 03:43:09,142 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8922600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.02000000000000000000000000, PnL USD=0.01463978801586953020920257075, Commission=0.10000000, Final PnL=-0.08536021198413046979079742925
2025-06-27 03:43:09,144 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 03:43:10,061 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097984101190214765690192806, Commission=0.10000000, Final PnL=-0.2097984101190214765690192806
2025-06-27 03:43:10,062 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.180000000000000000000000, PnL USD=0.1317580921428257718828231367, Commission=0.10000000, Final PnL=0.0317580921428257718828231367
2025-06-27 03:43:10,065 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195968202380429531380385612, Commission=0.10000000, Final PnL=-0.07804031797619570468619614388
2025-06-27 03:43:12,463 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097984101190214765690192806, Commission=0.10000000, Final PnL=-0.2097984101190214765690192806
2025-06-27 03:43:12,465 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1244381981348910067782218513, Commission=0.10000000, Final PnL=0.0244381981348910067782218513
2025-06-27 03:43:12,468 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463978801586953020920257075, Commission=0.10000000, Final PnL=-0.08536021198413046979079742925
2025-06-27 03:43:13,769 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 03:43:13,774 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 03:43:13,776 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 03:43:14,818 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.160000000000000000000000, PnL USD=-0.1171148750530676777584212915, Commission=0.10000000, Final PnL=-0.2171148750530676777584212915
2025-06-27 03:43:14,826 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.180000000000000000000000, PnL USD=0.1317542344347011374782239529, Commission=0.10000000, Final PnL=0.0317542344347011374782239529
2025-06-27 03:43:14,847 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195903907245018957970399215, Commission=0.10000000, Final PnL=-0.07804096092754981042029600785
2025-06-27 03:43:16,920 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:16,920 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:16,920 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:19,380 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097984101190214765690192806, Commission=0.10000000, Final PnL=-0.2097984101190214765690192806
2025-06-27 03:43:19,382 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.150000000000000000000000, PnL USD=0.1097984101190214765690192806, Commission=0.10000000, Final PnL=0.0097984101190214765690192806
2025-06-27 03:43:19,383 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 03:43:21,530 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097968027171048779059553786, Commission=0.10000000, Final PnL=-0.2097968027171048779059553786
2025-06-27 03:43:21,531 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024770158692978860455583533, Commission=0.10000000, Final PnL=0.0024770158692978860455583533
2025-06-27 03:43:21,532 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319786847806991860397025239, Commission=0.10000000, Final PnL=-0.1073197868478069918603970252
2025-06-27 03:43:23,884 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:23,884 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:23,884 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:26,164 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097984101190214765690192806, Commission=0.10000000, Final PnL=-0.2097984101190214765690192806
2025-06-27 03:43:26,165 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.150000000000000000000000, PnL USD=0.1097984101190214765690192806, Commission=0.10000000, Final PnL=0.0097984101190214765690192806
2025-06-27 03:43:26,166 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 03:43:28,492 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097968027171048779059553786, Commission=0.10000000, Final PnL=-0.2097968027171048779059553786
2025-06-27 03:43:28,493 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024770158692978860455583533, Commission=0.10000000, Final PnL=0.0024770158692978860455583533
2025-06-27 03:43:28,495 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319786847806991860397025239, Commission=0.10000000, Final PnL=-0.1073197868478069918603970252
2025-06-27 03:43:30,800 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097959990337952085026021652, Commission=0.10000000, Final PnL=-0.2097959990337952085026021652
2025-06-27 03:43:30,801 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.150000000000000000000000, PnL USD=0.1097959990337952085026021652, Commission=0.10000000, Final PnL=0.0097959990337952085026021652
2025-06-27 03:43:30,803 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 03:43:33,100 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:33,101 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:33,102 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:35,575 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097943917024718377385283160, Commission=0.10000000, Final PnL=-0.2097943917024718377385283160
2025-06-27 03:43:35,576 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024747655889737152226264282, Commission=0.10000000, Final PnL=0.0024747655889737152226264282
2025-06-27 03:43:35,579 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319626113498122515901887732, Commission=0.10000000, Final PnL=-0.1073196261134981225159018877
2025-06-27 03:43:37,816 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024770158692978860455583533, Commission=0.10000000, Final PnL=-0.2024770158692978860455583533
2025-06-27 03:43:37,817 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1244363764127188616267494291, Commission=0.10000000, Final PnL=0.0244363764127188616267494291
2025-06-27 03:43:37,817 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463957369561398372079405048, Commission=0.10000000, Final PnL=-0.08536042630438601627920594952
2025-06-27 03:43:40,273 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09515653249595584736892187649, Commission=0.10000000, Final PnL=-0.1951565324959558473689218765
2025-06-27 03:43:40,274 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1171157323027148890694423095, Commission=0.10000000, Final PnL=0.0171157323027148890694423095
2025-06-27 03:43:40,275 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319733268919680566840144345, Commission=0.10000000, Final PnL=-0.09268026673108031943315985566
2025-06-27 03:43:40,708 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 03:43:40,710 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 03:43:40,711 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 03:43:42,528 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024680153409257253271657347, Commission=0.10000000, Final PnL=-0.2024680153409257253271657347
2025-06-27 03:43:42,530 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1244254471996955236115583921, Commission=0.10000000, Final PnL=0.0244254471996955236115583921
2025-06-27 03:43:42,533 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463828790584653218959510496, Commission=0.10000000, Final PnL=-0.08536171209415346781040489504
2025-06-27 03:43:44,777 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097959990337952085026021652, Commission=0.10000000, Final PnL=-0.2097959990337952085026021652
2025-06-27 03:43:44,779 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.180000000000000000000000, PnL USD=0.1317551988405542502031225982, Commission=0.10000000, Final PnL=0.0317551988405542502031225982
2025-06-27 03:43:44,780 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195919980675904170052043304, Commission=0.10000000, Final PnL=-0.07804080019324095829947956696
2025-06-27 03:43:47,852 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024672653682600326431431102, Commission=0.10000000, Final PnL=-0.2024672653682600326431431102
2025-06-27 03:43:47,854 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1244245365186014682095309195, Commission=0.10000000, Final PnL=0.0244245365186014682095309195
2025-06-27 03:43:47,858 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463818076689429037759187288, Commission=0.10000000, Final PnL=-0.08536181923310570962240812712
2025-06-27 03:43:50,880 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514887138800245923236818222, Commission=0.10000000, Final PnL=-0.1951488713880024592323681822
2025-06-27 03:43:50,882 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1171063032467722575167608397, Commission=0.10000000, Final PnL=0.0171063032467722575167608397
2025-06-27 03:43:50,886 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319143952923266094797552478, Commission=0.10000000, Final PnL=-0.09268085604707673390520244752
2025-06-27 03:43:52,766 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024680153409257253271657347, Commission=0.10000000, Final PnL=-0.2024680153409257253271657347
2025-06-27 03:43:52,772 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1244254471996955236115583921, Commission=0.10000000, Final PnL=0.0244254471996955236115583921
2025-06-27 03:43:52,789 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463828790584653218959510496, Commission=0.10000000, Final PnL=-0.08536171209415346781040489504
2025-06-27 03:43:55,118 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024695153191925402192847628, Commission=0.10000000, Final PnL=-0.2024695153191925402192847628
2025-06-27 03:43:55,120 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1171080175076486173934683003, Commission=0.10000000, Final PnL=0.0171080175076486173934683003
2025-06-27 03:43:55,122 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319251094228038587091768770, Commission=0.10000000, Final PnL=-0.09268074890577196141290823123
2025-06-27 03:43:57,589 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:57,590 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:43:57,591 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:44:00,037 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097968027171048779059553786, Commission=0.10000000, Final PnL=-0.2097968027171048779059553786
2025-06-27 03:44:00,044 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024770158692978860455583533, Commission=0.10000000, Final PnL=0.0024770158692978860455583533
2025-06-27 03:44:00,057 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319786847806991860397025239, Commission=0.10000000, Final PnL=-0.1073197868478069918603970252
2025-06-27 03:44:01,875 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:44:01,876 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:44:01,876 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:44:04,242 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024672653682600326431431102, Commission=0.10000000, Final PnL=-0.2024672653682600326431431102
2025-06-27 03:44:04,246 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1171054461351543230207349831, Commission=0.10000000, Final PnL=0.0171054461351543230207349831
2025-06-27 03:44:04,250 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319090383447145188795936441, Commission=0.10000000, Final PnL=-0.09268090961655285481120406356
2025-06-27 03:44:07,008 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.1951495678013862560108909659
2025-06-27 03:44:07,012 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1171071603709369304749427273, Commission=0.10000000, Final PnL=0.0171071603709369304749427273
2025-06-27 03:44:07,018 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319197523183558154683920455, Commission=0.10000000, Final PnL=-0.09268080247681644184531607954
2025-06-27 03:44:07,753 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 03:44:07,880 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 03:44:08,136 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 03:44:10,698 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024687653245698141655748864, Commission=0.10000000, Final PnL=-0.2024687653245698141655748864
2025-06-27 03:44:10,702 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1171071603709369304749427273, Commission=0.10000000, Final PnL=0.0171071603709369304749427273
2025-06-27 03:44:10,707 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319197523183558154683920455, Commission=0.10000000, Final PnL=-0.09268080247681644184531607954
2025-06-27 03:44:11,217 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5212200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.8800000000000000000000000, PnL USD=-451.9360817512397936181936583, Commission=0.10000000, Final PnL=-452.0360817512397936181936583
2025-06-27 03:44:11,279 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 03:44:11,468 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 03:44:11,507 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 03:44:11,629 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 03:44:12,747 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514817498481288745434717373, Commission=0.10000000, Final PnL=-0.1951481749848128874543471737
2025-06-27 03:44:12,750 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1171054461351543230207349831, Commission=0.10000000, Final PnL=0.0171054461351543230207349831
2025-06-27 03:44:12,752 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319090383447145188795936441, Commission=0.10000000, Final PnL=-0.09268090961655285481120406356
2025-06-27 03:44:13,868 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8922700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.13000000000000000000000000, PnL USD=-0.09514817498481288745434717373, Commission=0.10000000, Final PnL=-0.1951481749848128874543471737
2025-06-27 03:44:13,872 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8922700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.16000000000000000000000000, PnL USD=0.1171054461351543230207349831, Commission=0.10000000, Final PnL=0.0171054461351543230207349831
2025-06-27 03:44:13,879 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8922700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.01000000000000000000000000, PnL USD=0.007319090383447145188795936441, Commission=0.10000000, Final PnL=-0.09268090961655285481120406356
2025-06-27 03:44:13,899 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 03:44:14,777 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097863557517071778319390466, Commission=0.10000000, Final PnL=-0.2097863557517071778319390466
2025-06-27 03:44:14,779 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024672653682600326431431102, Commission=0.10000000, Final PnL=0.0024672653682600326431431102
2025-06-27 03:44:14,784 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319090383447145188795936441, Commission=0.10000000, Final PnL=-0.1073190903834471451887959364
2025-06-27 03:44:16,211 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514817498481288745434717373, Commission=0.10000000, Final PnL=-0.1951481749848128874543471737
2025-06-27 03:44:16,213 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1171054461351543230207349831, Commission=0.10000000, Final PnL=0.0171054461351543230207349831
2025-06-27 03:44:16,217 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319090383447145188795936441, Commission=0.10000000, Final PnL=-0.09268090961655285481120406356
2025-06-27 03:44:18,155 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:44:18,155 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:44:18,156 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:44:20,717 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024672653682600326431431102, Commission=0.10000000, Final PnL=-0.2024672653682600326431431102
2025-06-27 03:44:20,722 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1171054461351543230207349831, Commission=0.10000000, Final PnL=0.0171054461351543230207349831
2025-06-27 03:44:20,727 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319090383447145188795936441, Commission=0.10000000, Final PnL=-0.09268090961655285481120406356
2025-06-27 03:44:21,845 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514817498481288745434717373, Commission=0.10000000, Final PnL=-0.1951481749848128874543471737
2025-06-27 03:44:21,846 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.150000000000000000000000, PnL USD=0.1097863557517071778319390466, Commission=0.10000000, Final PnL=0.0097863557517071778319390466
2025-06-27 03:44:21,846 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 03:44:23,791 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514817498481288745434717373, Commission=0.10000000, Final PnL=-0.1951481749848128874543471737
2025-06-27 03:44:23,793 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024672653682600326431431102, Commission=0.10000000, Final PnL=0.0024672653682600326431431102
2025-06-27 03:44:23,795 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319090383447145188795936441, Commission=0.10000000, Final PnL=-0.1073190903834471451887959364
2025-06-27 03:44:24,418 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 03:44:24,429 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 03:44:24,438 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 03:44:26,244 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024672653682600326431431102, Commission=0.10000000, Final PnL=-0.2024672653682600326431431102
2025-06-27 03:44:26,245 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1171054461351543230207349831, Commission=0.10000000, Final PnL=0.0171054461351543230207349831
2025-06-27 03:44:26,246 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319090383447145188795936441, Commission=0.10000000, Final PnL=-0.09268090961655285481120406356
2025-06-27 03:44:28,498 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.1951495678013862560108909659
2025-06-27 03:44:28,499 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024687653245698141655748864, Commission=0.10000000, Final PnL=0.0024687653245698141655748864
2025-06-27 03:44:28,499 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319197523183558154683920455, Commission=0.10000000, Final PnL=-0.1073191975231835581546839205
2025-06-27 03:44:30,754 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08783037027820269785620704546, Commission=0.10000000, Final PnL=-0.1878303702782026978562070455
2025-06-27 03:44:30,755 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024687653245698141655748864, Commission=0.10000000, Final PnL=0.0024687653245698141655748864
2025-06-27 03:44:30,757 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319197523183558154683920455, Commission=0.10000000, Final PnL=-0.1073191975231835581546839205
2025-06-27 03:44:33,214 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.1951495678013862560108909659
2025-06-27 03:44:33,218 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024687653245698141655748864, Commission=0.10000000, Final PnL=0.0024687653245698141655748864
2025-06-27 03:44:33,220 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319197523183558154683920455, Commission=0.10000000, Final PnL=-0.1073191975231835581546839205
2025-06-27 03:44:35,479 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.1951495678013862560108909659
2025-06-27 03:44:35,480 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.150000000000000000000000, PnL USD=0.1097879628477533723202588068, Commission=0.10000000, Final PnL=0.0097879628477533723202588068
2025-06-27 03:44:35,481 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 03:44:37,618 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08783037027820269785620704546, Commission=0.10000000, Final PnL=-0.1878303702782026978562070455
2025-06-27 03:44:37,619 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024687653245698141655748864, Commission=0.10000000, Final PnL=0.0024687653245698141655748864
2025-06-27 03:44:37,619 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319197523183558154683920455, Commission=0.10000000, Final PnL=-0.1073191975231835581546839205
2025-06-27 03:44:40,072 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.1951495678013862560108909659
2025-06-27 03:44:40,075 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.150000000000000000000000, PnL USD=0.1097879628477533723202588068, Commission=0.10000000, Final PnL=0.0097879628477533723202588068
2025-06-27 03:44:40,077 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 03:44:42,265 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.1951495678013862560108909659
2025-06-27 03:44:42,266 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024687653245698141655748864, Commission=0.10000000, Final PnL=0.0024687653245698141655748864
2025-06-27 03:44:42,267 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319197523183558154683920455, Commission=0.10000000, Final PnL=-0.1073191975231835581546839205
2025-06-27 03:44:44,472 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024687653245698141655748864, Commission=0.10000000, Final PnL=-0.2024687653245698141655748864
2025-06-27 03:44:44,473 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1244263578941204886296266477, Commission=0.10000000, Final PnL=0.0244263578941204886296266477
2025-06-27 03:44:44,474 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463839504636711630936784091, Commission=0.10000000, Final PnL=-0.08536160495363288369063215909
2025-06-27 03:44:46,830 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.1951495678013862560108909659
2025-06-27 03:44:46,831 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024687653245698141655748864, Commission=0.10000000, Final PnL=0.0024687653245698141655748864
2025-06-27 03:44:46,832 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319197523183558154683920455, Commission=0.10000000, Final PnL=-0.1073191975231835581546839205
2025-06-27 03:44:49,140 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024687653245698141655748864, Commission=0.10000000, Final PnL=-0.2024687653245698141655748864
2025-06-27 03:44:49,140 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1244263578941204886296266477, Commission=0.10000000, Final PnL=0.0244263578941204886296266477
2025-06-27 03:44:49,142 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463839504636711630936784091, Commission=0.10000000, Final PnL=-0.08536160495363288369063215909
2025-06-27 03:44:51,436 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.1951495678013862560108909659
2025-06-27 03:44:51,438 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.150000000000000000000000, PnL USD=0.1097879628477533723202588068, Commission=0.10000000, Final PnL=0.0097879628477533723202588068
2025-06-27 03:44:51,440 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 03:44:53,629 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.1951495678013862560108909659
2025-06-27 03:44:53,631 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024687653245698141655748864, Commission=0.10000000, Final PnL=0.0024687653245698141655748864
2025-06-27 03:44:53,631 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319197523183558154683920455, Commission=0.10000000, Final PnL=-0.1073191975231835581546839205
2025-06-27 03:44:55,939 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024687653245698141655748864, Commission=0.10000000, Final PnL=-0.2024687653245698141655748864
2025-06-27 03:44:55,940 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1244263578941204886296266477, Commission=0.10000000, Final PnL=0.0244263578941204886296266477
2025-06-27 03:44:55,941 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463839504636711630936784091, Commission=0.10000000, Final PnL=-0.08536160495363288369063215909
2025-06-27 03:44:58,509 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:44:58,509 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:44:58,509 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:45:00,766 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08783037027820269785620704546, Commission=0.10000000, Final PnL=-0.1878303702782026978562070455
2025-06-27 03:45:00,768 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.150000000000000000000000, PnL USD=0.1097879628477533723202588068, Commission=0.10000000, Final PnL=0.0097879628477533723202588068
2025-06-27 03:45:00,771 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 03:45:03,209 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.140000000000000000000000, PnL USD=-0.1024732654569941663433879125, Commission=0.10000000, Final PnL=-0.2024732654569941663433879125
2025-06-27 03:45:03,210 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1244318223406357734169710367, Commission=0.10000000, Final PnL=0.0244318223406357734169710367
2025-06-27 03:45:03,212 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463903792242773804905541608, Commission=0.10000000, Final PnL=-0.08536096207757226195094458392
2025-06-27 03:45:05,462 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08783037027820269785620704546, Commission=0.10000000, Final PnL=-0.1878303702782026978562070455
2025-06-27 03:45:05,464 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.00485043219861374398910903409
2025-06-27 03:45:05,465 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01463839504636711630936784091, Commission=0.10000000, Final PnL=-0.1146383950463671163093678409
2025-06-27 03:45:07,521 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.1951495678013862560108909659
2025-06-27 03:45:07,522 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024687653245698141655748864, Commission=0.10000000, Final PnL=0.0024687653245698141655748864
2025-06-27 03:45:07,525 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319197523183558154683920455, Commission=0.10000000, Final PnL=-0.1073191975231835581546839205
2025-06-27 03:45:07,686 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 03:45:07,696 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 03:45:07,749 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 03:45:08,140 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5212900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.8100000000000000000000000, PnL USD=-451.8484195762159995992586285, Commission=0.10000000, Final PnL=-451.9484195762159995992586285
2025-06-27 03:45:08,144 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 03:45:08,165 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 03:45:08,167 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 03:45:08,186 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 03:45:08,750 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8922700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.13000000000000000000000000, PnL USD=-0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.1951495678013862560108909659
2025-06-27 03:45:08,757 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8922900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.14000000000000000000000000, PnL USD=0.1024687653245698141655748864, Commission=0.10000000, Final PnL=0.0024687653245698141655748864
2025-06-27 03:45:08,771 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8922900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.01000000000000000000000000, PnL USD=-0.007319197523183558154683920455, Commission=0.10000000, Final PnL=-0.1073191975231835581546839205
2025-06-27 03:45:08,780 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 03:45:08,849 - INFO - app.main - Application shutdown event triggered.
2025-06-27 03:45:08,850 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 03:45:08,850 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-27 03:45:08,852 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 03:45:09,234 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 03:45:09,235 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 03:45:09,238 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-27 03:45:09,242 - INFO - app.main - Redis client connection closed.
2025-06-27 03:45:09,242 - INFO - app.main - Application shutdown event finished.
2025-06-27 03:52:05,414 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 03:52:05,433 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 03:52:05,433 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 03:52:07,101 - INFO - app.main - Application startup event triggered.
2025-06-27 03:52:07,171 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 03:52:07,172 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 03:52:07,185 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 03:52:07,202 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 03:52:07,202 - INFO - app.main - Firebase events processor background task started
2025-06-27 03:52:07,202 - INFO - app.main - Redis publisher background task started
2025-06-27 03:52:07,203 - INFO - app.main - Pending order checker background task started
2025-06-27 03:52:07,203 - INFO - app.main - SL/TP checker task started (triggered by market updates)
2025-06-27 03:52:07,203 - INFO - app.main - Generating initial service account token...
2025-06-27 03:52:07,203 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 03:52:08,476 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 03:52:08,478 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 03:52:08,479 - INFO - app.main - Application startup event finished.
2025-06-27 03:52:08,479 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 03:52:08,480 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 03:52:09,503 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 03:52:13,577 - WARNING - app.api.v1.endpoints.users - JWTError during refresh token validation.
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 93, in decode_token
    payload = jwt.decode(token, settings.SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 174, in decode
    _validate_claims(
    ~~~~~~~~~~~~~~~~^
        claims,
        ^^^^^^^
    ...<5 lines>...
        options=defaults,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 497, in _validate_claims
    _validate_exp(claims, leeway=leeway)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 331, in _validate_exp
    raise ExpiredSignatureError("Signature has expired.")
jose.exceptions.ExpiredSignatureError: Signature has expired.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 289, in refresh_access_token
    payload = decode_token(refresh_token)
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 98, in decode_token
    raise JWTError("Could not validate credentials")
jose.exceptions.JWTError: Could not validate credentials
2025-06-27 03:52:24,867 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 03:52:25,180 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 03:52:25,432 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 03:52:25,626 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 03:52:25,784 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 03:52:25,913 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 03:52:26,073 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 03:52:26,216 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 03:52:26,399 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 03:52:26,678 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 03:52:26,876 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 03:52:27,055 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 03:52:27,210 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 03:52:27,376 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 03:52:27,576 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 03:52:27,827 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 03:52:27,945 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 03:52:28,170 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 03:52:28,310 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 03:52:28,483 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 03:52:28,699 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 03:52:28,965 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 03:52:29,127 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 03:52:29,328 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 03:52:29,476 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 03:52:29,619 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 03:52:29,735 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 03:52:29,874 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 03:52:29,979 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 03:52:30,081 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 03:52:30,137 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 03:52:30,235 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 03:52:30,310 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 03:52:30,410 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 03:52:30,485 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 03:52:30,574 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 03:52:30,689 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 03:52:30,777 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 03:52:31,085 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 03:52:31,556 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 03:52:31,970 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 03:52:32,059 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 03:52:32,220 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 03:52:32,364 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 03:52:32,447 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 03:52:32,507 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 03:52:32,608 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 03:52:32,688 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 03:52:32,751 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 03:52:32,818 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 03:52:32,888 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 03:52:32,956 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 03:52:33,016 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 03:52:33,089 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 03:52:33,150 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 03:52:33,309 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 03:52:33,489 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 03:52:33,591 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 03:52:33,676 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 03:52:33,762 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 03:52:33,821 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 03:52:33,877 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 03:52:33,937 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 03:52:33,995 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 03:52:34,049 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 03:52:34,116 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 03:52:34,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 03:52:34,281 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 03:52:34,341 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 03:52:34,401 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 03:52:34,471 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 03:52:34,558 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 03:52:34,642 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 03:52:34,698 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 03:52:34,769 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 03:52:34,882 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 03:52:34,983 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 03:52:35,065 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 03:52:35,122 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 03:52:40,108 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 03:52:40,256 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 03:52:40,460 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 03:52:40,569 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 03:52:40,624 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 03:52:40,657 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 03:52:40,713 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 03:52:40,772 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 03:52:40,837 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 03:52:40,888 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 03:52:40,964 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 03:52:41,007 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 03:52:41,062 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 03:52:41,123 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 03:52:41,219 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 03:52:41,270 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 03:52:41,328 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 03:52:41,394 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 03:52:41,468 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 03:52:41,531 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 03:52:41,589 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 03:52:41,656 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 03:52:41,698 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 03:52:41,739 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 03:52:41,793 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 03:52:41,852 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 03:52:41,897 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 03:52:41,942 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 03:52:42,003 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 03:52:42,084 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 03:52:42,123 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 03:52:42,165 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 03:52:42,232 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 03:52:42,344 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 03:52:42,447 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 03:52:42,565 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 03:52:42,699 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 03:52:42,792 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 03:52:42,881 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 03:52:42,942 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 03:52:42,995 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 03:52:43,059 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 03:52:43,100 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 03:52:43,154 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 03:52:43,195 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 03:52:43,252 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 03:52:43,323 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 03:52:43,384 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 03:52:43,467 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 03:52:43,524 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 03:52:43,586 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 03:52:43,693 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 03:52:43,742 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 03:52:43,934 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 03:52:44,038 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 03:52:44,172 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 03:52:44,336 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 03:52:44,463 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 03:52:44,719 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 03:52:45,169 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 03:52:45,362 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 03:52:45,471 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 03:52:45,652 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 03:52:45,714 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 03:52:45,796 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 03:52:45,862 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 03:52:45,938 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 03:52:46,067 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 03:52:46,101 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 03:52:46,151 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 03:52:46,247 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 03:52:46,283 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 03:52:46,329 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 03:52:46,369 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 03:52:46,407 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 03:52:46,501 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 03:52:46,579 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 03:52:46,630 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 03:52:46,674 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 03:52:49,743 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.090000000000000000000000, PnL USD=-0.06588290411841353966882860196, Commission=0.10000000, Final PnL=-0.1658829041184135396688286020
2025-06-27 03:52:49,747 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.120000000000000000000000, PnL USD=0.08784387215788471955843813595, Commission=0.10000000, Final PnL=-0.01215612784211528044156186405
2025-06-27 03:52:49,749 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02196096803947117988960953399, Commission=0.10000000, Final PnL=-0.1219609680394711798896095340
2025-06-27 03:52:51,974 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04392193607894235977921906798, Commission=0.10000000, Final PnL=-0.1439219360789423597792190680
2025-06-27 03:52:51,976 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05856258143858981303895875730, Commission=0.10000000, Final PnL=-0.04143741856141018696104124270
2025-06-27 03:52:51,977 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05124225875876608640908891264, Commission=0.10000000, Final PnL=-0.1512422587587660864090889126
2025-06-27 03:52:54,241 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.090000000000000000000000, PnL USD=-0.06588193956430077301475755446, Commission=0.10000000, Final PnL=-0.1658819395643007730147575545
2025-06-27 03:52:54,244 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.120000000000000000000000, PnL USD=0.08784258608573436401967673928, Commission=0.10000000, Final PnL=-0.01215741391426563598032326072
2025-06-27 03:52:54,246 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02196064652143359100491918482, Commission=0.10000000, Final PnL=-0.1219606465214335910049191848
2025-06-27 03:52:56,596 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:52:56,596 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:52:56,596 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:52:58,954 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04392161455855117234109525866, Commission=0.10000000, Final PnL=-0.1439216145585511723410952587
2025-06-27 03:52:58,954 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05856215274473489645479367822, Commission=0.10000000, Final PnL=-0.04143784725526510354520632178
2025-06-27 03:52:58,955 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05124188365164303439794446844, Commission=0.10000000, Final PnL=-0.1512418836516430343979444684
2025-06-27 03:53:01,926 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.100000000000000000000000, PnL USD=-0.07320054754009559991508736485, Commission=0.10000000, Final PnL=-0.1732005475400955999150873648
2025-06-27 03:53:01,928 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09516071180212427988961357431, Commission=0.10000000, Final PnL=-0.00483928819787572011038642569
2025-06-27 03:53:01,930 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464010950801911998301747297, Commission=0.10000000, Final PnL=-0.1146401095080191199830174730
2025-06-27 03:53:04,234 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:04,235 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:04,235 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:07,303 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:07,303 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:07,303 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:07,308 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 03:53:07,454 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 03:53:07,898 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 03:53:09,303 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08784194306378057082622667613, Commission=0.10000000, Final PnL=-0.1878419430637805708262266761
2025-06-27 03:53:09,305 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1024822669077439992972644555, Commission=0.10000000, Final PnL=0.0024822669077439992972644555
2025-06-27 03:53:09,306 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007320161921981714235518889678, Commission=0.10000000, Final PnL=-0.1073201619219817142355188897
2025-06-27 03:53:09,708 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5212800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.8200000000000000000000000, PnL USD=-451.9288577154308617234468938, Commission=0.10000000, Final PnL=-452.0288577154308617234468938
2025-06-27 03:53:09,755 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 03:53:09,832 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 03:53:09,847 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 03:53:09,884 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 03:53:10,528 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.100000000000000000000000, PnL USD=-0.07320269093091862056849209777, Commission=0.10000000, Final PnL=-0.1732026909309186205684920978
2025-06-27 03:53:10,530 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09516349821019420673903972710, Commission=0.10000000, Final PnL=-0.00483650178980579326096027290
2025-06-27 03:53:10,533 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464053818618372411369841955, Commission=0.10000000, Final PnL=-0.1146405381861837241136984196
2025-06-27 03:53:11,037 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8923000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.10000000000000000000000000, PnL USD=-0.07320269093091862056849209777, Commission=0.10000000, Final PnL=-0.1732026909309186205684920978
2025-06-27 03:53:11,038 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8923000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.13000000000000000000000000, PnL USD=0.09516349821019420673903972710, Commission=0.10000000, Final PnL=-0.00483650178980579326096027290
2025-06-27 03:53:11,039 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.02000000000000000000000000, PnL USD=-0.01464053818618372411369841955, Commission=0.10000000, Final PnL=-0.1146405381861837241136984196
2025-06-27 03:53:11,041 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 03:53:12,990 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89232, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.080000000000000000000000, PnL USD=-0.05856215274473489645479367822, Commission=0.10000000, Final PnL=-0.1585621527447348964547936782
2025-06-27 03:53:12,992 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.100000000000000000000000, PnL USD=0.07320269093091862056849209777, Commission=0.10000000, Final PnL=-0.02679730906908137943150790223
2025-06-27 03:53:12,993 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660134546545931028424604888, Commission=0.10000000, Final PnL=-0.1366013454654593102842460489
2025-06-27 03:53:15,131 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:15,131 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:15,131 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:18,107 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:18,107 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:18,107 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:20,460 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.100000000000000000000000, PnL USD=-0.07320269093091862056849209777, Commission=0.10000000, Final PnL=-0.1732026909309186205684920978
2025-06-27 03:53:20,462 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09516349821019420673903972710, Commission=0.10000000, Final PnL=-0.00483650178980579326096027290
2025-06-27 03:53:20,463 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464053818618372411369841955, Commission=0.10000000, Final PnL=-0.1146405381861837241136984196
2025-06-27 03:53:22,709 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:22,710 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:22,710 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:24,859 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:24,860 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:24,860 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:27,113 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:27,113 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:27,113 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:29,537 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03659705906033391156686648661, Commission=0.10000000, Final PnL=-0.1365970590603339115668664866
2025-06-27 03:53:29,538 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05855529449653425850698637857, Commission=0.10000000, Final PnL=-0.04144470550346574149301362143
2025-06-27 03:53:29,539 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05123588268446747619361308125, Commission=0.10000000, Final PnL=-0.1512358826844674761936130812
2025-06-27 03:53:31,721 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.090000000000000000000000, PnL USD=-0.06587374199451052150045745654, Commission=0.10000000, Final PnL=-0.1658737419945105215004574565
2025-06-27 03:53:31,722 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.090000000000000000000000, PnL USD=0.06587374199451052150045745654, Commission=0.10000000, Final PnL=-0.03412625800548947849954254346
2025-06-27 03:53:31,724 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04391582799634034766697163769, Commission=0.10000000, Final PnL=-0.1439158279963403476669716377
2025-06-27 03:53:34,227 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.090000000000000000000000, PnL USD=-0.06587229557630939485317797230, Commission=0.10000000, Final PnL=-0.1658722955763093948531779723
2025-06-27 03:53:34,228 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.120000000000000000000000, PnL USD=0.08782972743507919313757062974, Commission=0.10000000, Final PnL=-0.01217027256492080686242937026
2025-06-27 03:53:34,233 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 03:53:34,234 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02195743185876979828439265743, Commission=0.10000000, Final PnL=-0.1219574318587697982843926574
2025-06-27 03:53:34,238 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 03:53:34,239 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 03:53:37,678 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.110000000000000000000000, PnL USD=-0.08051117275501913970152312500, Commission=0.10000000, Final PnL=-0.1805111727550191397015231250
2025-06-27 03:53:37,679 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.00485043219861374398910903409
2025-06-27 03:53:37,681 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01463839504636711630936784091, Commission=0.10000000, Final PnL=-0.1146383950463671163093678409
2025-06-27 03:53:39,507 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89238, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01463839504636711630936784091, Commission=0.10000000, Final PnL=-0.1146383950463671163093678409
2025-06-27 03:53:39,510 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195759256955067446405176136, Commission=0.10000000, Final PnL=-0.07804240743044932553594823864
2025-06-27 03:53:39,514 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08783037027820269785620704546, Commission=0.10000000, Final PnL=-0.1878303702782026978562070455
2025-06-27 03:53:42,065 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.100000000000000000000000, PnL USD=-0.07319197523183558154683920455, Commission=0.10000000, Final PnL=-0.1731919752318355815468392046
2025-06-27 03:53:42,069 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.00485043219861374398910903409
2025-06-27 03:53:42,071 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01463839504636711630936784091, Commission=0.10000000, Final PnL=-0.1146383950463671163093678409
2025-06-27 03:53:44,055 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:44,055 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:44,056 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:46,471 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:46,472 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:46,472 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:48,730 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:48,730 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:48,731 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:50,871 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.090000000000000000000000, PnL USD=-0.06587277770865202339215528409, Commission=0.10000000, Final PnL=-0.1658727777086520233921552841
2025-06-27 03:53:50,877 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.090000000000000000000000, PnL USD=0.06587277770865202339215528409, Commission=0.10000000, Final PnL=-0.03412722229134797660784471591
2025-06-27 03:53:50,881 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04391518513910134892810352273, Commission=0.10000000, Final PnL=-0.1439151851391013489281035227
2025-06-27 03:53:53,530 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:53,531 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:53,531 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:55,377 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.090000000000000000000000, PnL USD=-0.06587277770865202339215528409, Commission=0.10000000, Final PnL=-0.1658727777086520233921552841
2025-06-27 03:53:55,379 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.100000000000000000000000, PnL USD=0.07319197523183558154683920455, Commission=0.10000000, Final PnL=-0.02680802476816441845316079545
2025-06-27 03:53:55,381 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03659598761591779077341960227, Commission=0.10000000, Final PnL=-0.1365959876159177907734196023
2025-06-27 03:53:58,062 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:58,062 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:58,062 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:59,985 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:59,985 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:53:59,986 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:03,546 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:03,547 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:03,547 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:06,852 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05123438266228490708278744318, Commission=0.10000000, Final PnL=-0.1512343826622849070827874432
2025-06-27 03:54:06,855 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.100000000000000000000000, PnL USD=0.07319197523183558154683920455, Commission=0.10000000, Final PnL=-0.02680802476816441845316079545
2025-06-27 03:54:06,858 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03659598761591779077341960227, Commission=0.10000000, Final PnL=-0.1365959876159177907734196023
2025-06-27 03:54:07,269 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 03:54:07,508 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 03:54:07,833 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 03:54:09,407 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.090000000000000000000000, PnL USD=-0.06587277770865202339215528409, Commission=0.10000000, Final PnL=-0.1658727777086520233921552841
2025-06-27 03:54:09,410 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.120000000000000000000000, PnL USD=0.08783037027820269785620704546, Commission=0.10000000, Final PnL=-0.01216962972179730214379295454
2025-06-27 03:54:09,414 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02195759256955067446405176136, Commission=0.10000000, Final PnL=-0.1219575925695506744640517614
2025-06-27 03:54:11,566 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5212200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.8800000000000000000000000, PnL USD=-451.9870245356512155104392370, Commission=0.10000000, Final PnL=-452.0870245356512155104392370
2025-06-27 03:54:12,012 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 03:54:12,665 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 03:54:13,319 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.090000000000000000000000, PnL USD=-0.06587277770865202339215528409, Commission=0.10000000, Final PnL=-0.1658727777086520233921552841
2025-06-27 03:54:13,321 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 03:54:13,333 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.090000000000000000000000, PnL USD=0.06587277770865202339215528409, Commission=0.10000000, Final PnL=-0.03412722229134797660784471591
2025-06-27 03:54:13,373 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04391518513910134892810352273, Commission=0.10000000, Final PnL=-0.1439151851391013489281035227
2025-06-27 03:54:13,672 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 03:54:15,343 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.090000000000000000000000, PnL USD=-0.06587277770865202339215528409, Commission=0.10000000, Final PnL=-0.1658727777086520233921552841
2025-06-27 03:54:15,347 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.120000000000000000000000, PnL USD=0.08783037027820269785620704546, Commission=0.10000000, Final PnL=-0.01216962972179730214379295454
2025-06-27 03:54:15,350 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02195759256955067446405176136, Commission=0.10000000, Final PnL=-0.1219575925695506744640517614
2025-06-27 03:54:15,754 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8923100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.09000000000000000000000000, PnL USD=-0.06587277770865202339215528409, Commission=0.10000000, Final PnL=-0.1658727777086520233921552841
2025-06-27 03:54:15,756 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8923100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.12000000000000000000000000, PnL USD=0.08783037027820269785620704546, Commission=0.10000000, Final PnL=-0.01216962972179730214379295454
2025-06-27 03:54:15,761 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.03000000000000000000000000, PnL USD=-0.02195759256955067446405176136, Commission=0.10000000, Final PnL=-0.1219575925695506744640517614
2025-06-27 03:54:15,765 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 03:54:16,191 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.110000000000000000000000, PnL USD=-0.08051117275501913970152312500, Commission=0.10000000, Final PnL=-0.1805111727550191397015231250
2025-06-27 03:54:16,192 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09514956780138625601089096591, Commission=0.10000000, Final PnL=-0.00485043219861374398910903409
2025-06-27 03:54:16,194 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01463839504636711630936784091, Commission=0.10000000, Final PnL=-0.1146383950463671163093678409
2025-06-27 03:54:16,775 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05123438266228490708278744318, Commission=0.10000000, Final PnL=-0.1512343826622849070827874432
2025-06-27 03:54:16,777 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.090000000000000000000000, PnL USD=0.06587277770865202339215528409, Commission=0.10000000, Final PnL=-0.03412722229134797660784471591
2025-06-27 03:54:16,778 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04391518513910134892810352273, Commission=0.10000000, Final PnL=-0.1439151851391013489281035227
2025-06-27 03:54:17,699 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04391518513910134892810352273, Commission=0.10000000, Final PnL=-0.1439151851391013489281035227
2025-06-27 03:54:17,700 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05855358018546846523747136364, Commission=0.10000000, Final PnL=-0.04144641981453153476252863636
2025-06-27 03:54:17,701 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05123438266228490708278744318, Commission=0.10000000, Final PnL=-0.1512343826622849070827874432
2025-06-27 03:54:20,156 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.090000000000000000000000, PnL USD=-0.06587277770865202339215528409, Commission=0.10000000, Final PnL=-0.1658727777086520233921552841
2025-06-27 03:54:20,158 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.100000000000000000000000, PnL USD=0.07319197523183558154683920455, Commission=0.10000000, Final PnL=-0.02680802476816441845316079545
2025-06-27 03:54:20,160 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03659598761591779077341960227, Commission=0.10000000, Final PnL=-0.1365959876159177907734196023
2025-06-27 03:54:22,410 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04391518513910134892810352273, Commission=0.10000000, Final PnL=-0.1439151851391013489281035227
2025-06-27 03:54:22,412 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05855358018546846523747136364, Commission=0.10000000, Final PnL=-0.04144641981453153476252863636
2025-06-27 03:54:22,414 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05123438266228490708278744318, Commission=0.10000000, Final PnL=-0.1512343826622849070827874432
2025-06-27 03:54:24,570 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89236, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02927679009273423261873568182, Commission=0.10000000, Final PnL=-0.1292767900927342326187356818
2025-06-27 03:54:24,571 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89236, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05123438266228490708278744318, Commission=0.10000000, Final PnL=-0.04876561733771509291721255682
2025-06-27 03:54:24,575 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89236, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.080000000000000000000000, PnL USD=-0.05855358018546846523747136364, Commission=0.10000000, Final PnL=-0.1585535801854684652374713636
2025-06-27 03:54:27,224 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89238, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01463850218845607717418353754, Commission=0.10000000, Final PnL=-0.1146385021884560771741835375
2025-06-27 03:54:27,226 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195775328268411576127530631, Commission=0.10000000, Final PnL=-0.07804224671731588423872469369
2025-06-27 03:54:27,227 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08783101313073646304510122524, Commission=0.10000000, Final PnL=-0.1878310131307364630451012252
2025-06-27 03:54:29,233 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 03:54:29,234 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195871761089152393500219587, Commission=0.10000000, Final PnL=-0.07804128238910847606499780413
2025-06-27 03:54:29,235 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08783487044356609574000878349, Commission=0.10000000, Final PnL=-0.1878348704435660957400087835
2025-06-27 03:54:30,286 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 03:54:30,287 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 03:54:30,288 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 03:54:31,629 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89241, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319626113498122515901887732, Commission=0.10000000, Final PnL=-0.09268037388650187748409811227
2025-06-27 03:54:31,631 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89244, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319626113498122515901887732, Commission=0.10000000, Final PnL=-0.1073196261134981225159018877
2025-06-27 03:54:31,632 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89244, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.160000000000000000000000, PnL USD=-0.1171140178159699602544302037, Commission=0.10000000, Final PnL=-0.2171140178159699602544302037
2025-06-27 03:54:33,775 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:33,775 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:33,775 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:36,851 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89241, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319626113498122515901887732, Commission=0.10000000, Final PnL=-0.09268037388650187748409811227
2025-06-27 03:54:36,855 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89243, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 03:54:36,857 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89243, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1097943917024718377385283160, Commission=0.10000000, Final PnL=-0.2097943917024718377385283160
2025-06-27 03:54:39,922 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89242, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463935938163345971980266144, Commission=0.10000000, Final PnL=-0.08536064061836654028019733856
2025-06-27 03:54:39,935 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89244, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319679690816729859901330718, Commission=0.10000000, Final PnL=-0.1073196796908167298599013307
2025-06-27 03:54:39,967 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89244, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.160000000000000000000000, PnL USD=-0.1171148750530676777584212915, Commission=0.10000000, Final PnL=-0.2171148750530676777584212915
2025-06-27 03:54:41,767 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 03:54:41,769 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89244, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319679690816729859901330718, Commission=0.10000000, Final PnL=-0.1073196796908167298599013307
2025-06-27 03:54:41,771 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89244, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.160000000000000000000000, PnL USD=-0.1171148750530676777584212915, Commission=0.10000000, Final PnL=-0.2171148750530676777584212915
2025-06-27 03:54:43,811 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89241, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319626113498122515901887732, Commission=0.10000000, Final PnL=-0.09268037388650187748409811227
2025-06-27 03:54:43,812 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89244, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319626113498122515901887732, Commission=0.10000000, Final PnL=-0.1073196261134981225159018877
2025-06-27 03:54:43,814 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89244, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.160000000000000000000000, PnL USD=-0.1171140178159699602544302037, Commission=0.10000000, Final PnL=-0.2171140178159699602544302037
2025-06-27 03:54:46,274 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89242, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01463860933211344922232387923, Commission=0.10000000, Final PnL=-0.08536139066788655077767612077
2025-06-27 03:54:46,278 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89244, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319304666056724611161939616, Commission=0.10000000, Final PnL=-0.1073193046660567246111619396
2025-06-27 03:54:46,284 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89244, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.160000000000000000000000, PnL USD=-0.1171088746569075937785910339, Commission=0.10000000, Final PnL=-0.2171088746569075937785910339
2025-06-27 03:54:48,554 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89244, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02927679009273423261873568182, Commission=0.10000000, Final PnL=-0.07072320990726576738126431818
2025-06-27 03:54:48,569 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89245, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01463839504636711630936784091, Commission=0.10000000, Final PnL=-0.1146383950463671163093678409
2025-06-27 03:54:48,571 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89245, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.170000000000000000000000, PnL USD=-0.1244263578941204886296266477, Commission=0.10000000, Final PnL=-0.2244263578941204886296266477
2025-06-27 03:54:51,524 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:51,538 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:51,552 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:52,923 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:52,923 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:52,923 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:55,688 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:55,689 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:55,689 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:57,785 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:57,785 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:54:57,785 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:02,009 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89241, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007319679690816729859901330718, Commission=0.10000000, Final PnL=-0.09268032030918327014009866928
2025-06-27 03:55:02,011 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89244, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007319679690816729859901330718, Commission=0.10000000, Final PnL=-0.1073196796908167298599013307
2025-06-27 03:55:02,013 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89244, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.160000000000000000000000, PnL USD=-0.1171148750530676777584212915, Commission=0.10000000, Final PnL=-0.2171148750530676777584212915
2025-06-27 03:55:03,341 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89240000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04391807814490037915940798431, Commission=0.10000000, Final PnL=-0.1439180781449003791594079843
2025-06-27 03:55:03,345 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05855743752653383887921064574, Commission=0.10000000, Final PnL=-0.04144256247346616112078935426
2025-06-27 03:55:03,365 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05123775783571710901930931502, Commission=0.10000000, Final PnL=-0.1512377578357171090193093150
2025-06-27 03:55:05,312 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05855358018546846523747136364, Commission=0.10000000, Final PnL=-0.04144641981453153476252863636
2025-06-27 03:55:05,315 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05123438266228490708278744318, Commission=0.10000000, Final PnL=-0.1512343826622849070827874432
2025-06-27 03:55:06,930 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:06,930 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:07,201 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 03:55:07,254 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 03:55:07,366 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 03:55:08,695 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5213400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.7600000000000000000000000, PnL USD=-451.7631737126828290923662593, Commission=0.10000000, Final PnL=-451.8631737126828290923662593
2025-06-27 03:55:08,711 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 03:55:08,869 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 03:55:08,891 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 03:55:09,012 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 03:55:09,920 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:09,920 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:11,974 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8923500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.08000000000000000000000000, PnL USD=0.05855358018546846523747136364, Commission=0.10000000, Final PnL=-0.04144641981453153476252863636
2025-06-27 03:55:11,978 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.07000000000000000000000000, PnL USD=-0.05123438266228490708278744318, Commission=0.10000000, Final PnL=-0.1512343826622849070827874432
2025-06-27 03:55:11,987 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 03:55:12,688 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89236, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05123400767046286266358286735, Commission=0.10000000, Final PnL=-0.04876599232953713733641713265
2025-06-27 03:55:12,691 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89236, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.080000000000000000000000, PnL USD=-0.05855315162338612875838041983, Commission=0.10000000, Final PnL=-0.1585531516233861287583804198
2025-06-27 03:55:13,915 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:13,915 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:16,476 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89245, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01463839504636711630936784091, Commission=0.10000000, Final PnL=-0.1146383950463671163093678409
2025-06-27 03:55:16,480 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89245, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.170000000000000000000000, PnL USD=-0.1244263578941204886296266477, Commission=0.10000000, Final PnL=-0.2244263578941204886296266477
2025-06-27 03:55:18,628 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195759256955067446405176136, Commission=0.10000000, Final PnL=-0.07804240743044932553594823864
2025-06-27 03:55:18,632 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08783037027820269785620704546, Commission=0.10000000, Final PnL=-0.1878303702782026978562070455
2025-06-27 03:55:20,978 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:20,978 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:22,207 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195743185876979828439265743, Commission=0.10000000, Final PnL=-0.07804256814123020171560734257
2025-06-27 03:55:22,208 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08782972743507919313757062974, Commission=0.10000000, Final PnL=-0.1878297274350791931375706297
2025-06-27 03:55:24,462 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:24,462 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:26,714 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:26,714 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:28,969 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89239, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02927657581169306437919020991, Commission=0.10000000, Final PnL=-0.07072342418830693562080979009
2025-06-27 03:55:28,970 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89239, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.110000000000000000000000, PnL USD=-0.08051058348215592704277307726, Commission=0.10000000, Final PnL=-0.1805105834821559270427730773
2025-06-27 03:55:31,219 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:31,219 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:33,575 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:33,575 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:35,835 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02195775328268411576127530631, Commission=0.10000000, Final PnL=-0.07804224671731588423872469369
2025-06-27 03:55:35,837 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08783101313073646304510122524, Commission=0.10000000, Final PnL=-0.1878310131307364630451012252
2025-06-27 03:55:38,180 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:38,180 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:40,435 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:40,435 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 03:55:40,741 - INFO - app.main - Application shutdown event triggered.
2025-06-27 03:55:40,742 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 03:55:40,742 - INFO - app.main - Cancelling 4 other background tasks...
2025-06-27 03:55:40,743 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 03:55:42,206 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 03:55:42,207 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 03:55:42,208 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-27 03:55:42,217 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-27 03:55:42,219 - INFO - app.main - Background task 'Task-6' cancelled successfully.
2025-06-27 03:55:42,223 - INFO - app.main - Redis client connection closed.
2025-06-27 03:55:42,223 - INFO - app.main - Application shutdown event finished.
2025-06-27 04:09:17,720 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 04:09:17,729 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 04:09:17,730 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 04:09:19,273 - INFO - app.main - Application startup event triggered.
2025-06-27 04:09:19,344 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 04:09:19,344 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 04:09:19,351 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 04:09:19,392 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 04:09:19,392 - INFO - app.main - Firebase events processor background task started
2025-06-27 04:09:19,393 - INFO - app.main - Redis publisher background task started
2025-06-27 04:09:19,393 - INFO - app.main - Pending order checker background task started
2025-06-27 04:09:19,393 - INFO - app.main - SL/TP checker task started (triggered by market updates)
2025-06-27 04:09:19,393 - INFO - app.main - Generating initial service account token...
2025-06-27 04:09:19,393 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 04:09:20,850 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 04:09:20,855 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 04:09:20,856 - INFO - app.main - Application startup event finished.
2025-06-27 04:09:20,857 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 04:09:20,857 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 04:09:21,636 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 04:09:34,126 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 04:09:34,151 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 04:09:34,156 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 04:09:34,642 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 04:09:34,699 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 04:09:34,782 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 04:09:34,858 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 04:09:34,915 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 04:09:34,959 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 04:09:35,059 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 04:09:35,076 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 04:09:35,091 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 04:09:35,122 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 04:09:35,150 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 04:09:35,171 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 04:09:35,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 04:09:35,224 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 04:09:35,251 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 04:09:35,273 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 04:09:35,298 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 04:09:35,317 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 04:09:35,345 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 04:09:35,373 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 04:09:35,400 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 04:09:35,421 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 04:09:35,441 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 04:09:35,460 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 04:09:35,482 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 04:09:35,498 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 04:09:35,522 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 04:09:35,544 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 04:09:35,564 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 04:09:35,582 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 04:09:35,604 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 04:09:35,623 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 04:09:35,646 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 04:09:35,674 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 04:09:35,697 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 04:09:35,719 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 04:09:35,742 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 04:09:35,776 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 04:09:35,811 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 04:09:35,858 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 04:09:35,921 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 04:09:35,994 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 04:09:36,049 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 04:09:36,084 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 04:09:36,133 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 04:09:36,196 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 04:09:36,275 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 04:09:36,328 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 04:09:36,382 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 04:09:36,420 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 04:09:36,462 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 04:09:36,496 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 04:09:36,514 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 04:09:36,536 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 04:09:36,557 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 04:09:36,576 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 04:09:36,595 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 04:09:36,614 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 04:09:36,641 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 04:09:36,668 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 04:09:36,714 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 04:09:36,769 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 04:09:36,805 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 04:09:36,847 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 04:09:36,892 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 04:09:36,977 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 04:09:37,026 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 04:09:37,108 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 04:09:37,154 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 04:09:37,191 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 04:09:37,220 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 04:09:37,251 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 04:09:37,277 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 04:09:37,303 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 04:09:37,329 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 04:09:37,361 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 04:09:37,391 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 04:09:37,413 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 04:09:37,441 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 04:09:40,775 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09519067424286802179134204206, Commission=0.10000000, Final PnL=-0.00480932575713197820865795794
2025-06-27 04:09:40,780 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464471911428738796789877570, Commission=0.10000000, Final PnL=-0.1146447191142873879678987757
2025-06-27 04:09:43,274 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:09:43,274 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:09:45,023 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89239, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02929008164610258851096547432, Commission=0.10000000, Final PnL=-0.07070991835389741148903452568
2025-06-27 04:09:45,026 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89239, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.110000000000000000000000, PnL USD=-0.08054772452678211840515505437, Commission=0.10000000, Final PnL=-0.1805477245267821184051550544
2025-06-27 04:09:47,399 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.090000000000000000000000, PnL USD=0.06590220113351785949650718334, Commission=0.10000000, Final PnL=-0.03409779886648214050349281666
2025-06-27 04:09:47,401 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04393480075567857299767145556, Commission=0.10000000, Final PnL=-0.1439348007556785729976714556
2025-06-27 04:09:49,243 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02196707867143108195184816355, Commission=0.10000000, Final PnL=-0.07803292132856891804815183645
2025-06-27 04:09:49,245 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08786831468572432780739265421, Commission=0.10000000, Final PnL=-0.1878683146857243278073926542
2025-06-27 04:09:51,471 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02196740037783928649883572778, Commission=0.10000000, Final PnL=-0.07803259962216071350116427222
2025-06-27 04:09:51,472 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08786960151135714599534291112, Commission=0.10000000, Final PnL=-0.1878696015113571459953429111
2025-06-27 04:09:54,401 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89241, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464482634897156706964347170, Commission=0.10000000, Final PnL=-0.08535517365102843293035652830
2025-06-27 04:09:54,402 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89241, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09519137126831518595268256607, Commission=0.10000000, Final PnL=-0.1951913712683151859526825661
2025-06-27 04:09:56,078 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02196723952345735060446520755, Commission=0.10000000, Final PnL=-0.07803276047654264939553479245
2025-06-27 04:09:56,079 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08786895809382940241786083022, Commission=0.10000000, Final PnL=-0.1878689580938294024178608302
2025-06-27 04:09:58,533 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:09:58,533 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:10:00,864 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:10:00,865 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:10:03,091 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89243, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 04:10:03,093 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89243, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.150000000000000000000000, PnL USD=-0.1098378061728847069161205287, Commission=0.10000000, Final PnL=-0.2098378061728847069161205287
2025-06-27 04:10:05,392 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89241, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464493358522619099922381852, Commission=0.10000000, Final PnL=-0.08535506641477380900077618148
2025-06-27 04:10:05,393 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89241, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09519206830397024149495482038, Commission=0.10000000, Final PnL=-0.1951920683039702414949548204
2025-06-27 04:10:07,444 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89245, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464514806244691133827362995, Commission=0.10000000, Final PnL=-0.1146451480624469113382736300
2025-06-27 04:10:07,445 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89245, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.170000000000000000000000, PnL USD=-0.1244837585307987463753258545, Commission=0.10000000, Final PnL=-0.2244837585307987463753258545
2025-06-27 04:10:09,797 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89243000, Current=0.89245, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464546979005719055953017333, Commission=0.10000000, Final PnL=-0.1146454697900571905595301733
2025-06-27 04:10:09,800 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89245, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.170000000000000000000000, PnL USD=-0.1244864932154861197560064733, Commission=0.10000000, Final PnL=-0.2244864932154861197560064733
2025-06-27 04:10:12,461 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:10:13,279 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:10:14,509 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:10:16,865 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89245, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.170000000000000000000000, PnL USD=-0.1244864932154861197560064733, Commission=0.10000000, Final PnL=-0.2244864932154861197560064733
2025-06-27 04:10:19,219 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:10:19,391 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 04:10:19,429 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 04:10:19,497 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 04:10:20,450 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5214600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.6400000000000000000000000, PnL USD=-451.7996066296681407614346742, Commission=0.10000000, Final PnL=-451.8996066296681407614346742
2025-06-27 04:10:20,461 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 04:10:20,524 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 04:10:20,540 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 04:10:20,756 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 04:10:21,985 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89245, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.170000000000000000000000, PnL USD=-0.1244855816405735123972993951, Commission=0.10000000, Final PnL=-0.2244855816405735123972993951
2025-06-27 04:10:22,495 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.17000000000000000000000000, PnL USD=-0.1244855816405735123972993951, Commission=0.10000000, Final PnL=-0.2244855816405735123972993951
2025-06-27 04:10:22,497 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 04:10:24,133 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89241, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.130000000000000000000000, PnL USD=-0.09519485654867386242146424335, Commission=0.10000000, Final PnL=-0.1951948565486738624214642434
2025-06-27 04:10:26,491 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08787088837468146802964177968, Commission=0.10000000, Final PnL=-0.1878708883746814680296417797
2025-06-27 04:10:28,538 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89239, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.110000000000000000000000, PnL USD=-0.08055008384531454807741595331, Commission=0.10000000, Final PnL=-0.1805500838453145480774159533
2025-06-27 04:10:30,893 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08787088837468146802964177968, Commission=0.10000000, Final PnL=-0.1878708883746814680296417797
2025-06-27 04:10:33,042 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:10:35,294 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:10:37,754 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89239, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.110000000000000000000000, PnL USD=-0.08054949400272403743354666745, Commission=0.10000000, Final PnL=-0.1805494940027240374335466674
2025-06-27 04:10:39,903 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08787153182047846049076250522, Commission=0.10000000, Final PnL=-0.1878715318204784604907625052
2025-06-27 04:10:42,154 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:10:44,520 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89245, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.170000000000000000000000, PnL USD=-0.1244837585307987463753258545, Commission=0.10000000, Final PnL=-0.2244837585307987463753258545
2025-06-27 04:10:46,975 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08787217527569894992750545540, Commission=0.10000000, Final PnL=-0.1878721752756989499275054554
2025-06-27 04:10:49,118 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08787217527569894992750545540, Commission=0.10000000, Final PnL=-0.1878721752756989499275054554
2025-06-27 04:10:51,884 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:10:54,219 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08787410569790347029489085304, Commission=0.10000000, Final PnL=-0.1878741056979034702948908530
2025-06-27 04:10:56,789 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08787346221441124780316344464, Commission=0.10000000, Final PnL=-0.1878734622144112478031634446
2025-06-27 04:10:58,597 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:11:01,103 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08787153182047846049076250522, Commission=0.10000000, Final PnL=-0.1878715318204784604907625052
2025-06-27 04:11:03,762 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04393544418734073401482088984, Commission=0.10000000, Final PnL=-0.1439354441873407340148208898
2025-06-27 04:11:05,771 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08787217527569894992750545540, Commission=0.10000000, Final PnL=-0.1878721752756989499275054554
2025-06-27 04:11:08,622 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08787217527569894992750545540, Commission=0.10000000, Final PnL=-0.1878721752756989499275054554
2025-06-27 04:11:10,372 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05125876891082438745771151565, Commission=0.10000000, Final PnL=-0.1512587689108243874577115156
2025-06-27 04:11:12,837 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04393576591023923024538125261, Commission=0.10000000, Final PnL=-0.1439357659102392302453812526
2025-06-27 04:11:15,227 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8924, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.120000000000000000000000, PnL USD=-0.08787217527569894992750545540, Commission=0.10000000, Final PnL=-0.1878721752756989499275054554
2025-06-27 04:11:17,035 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03661340636487456246979393975, Commission=0.10000000, Final PnL=-0.1366134063648745624697939398
2025-06-27 04:11:19,696 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04393640937017157167859051999, Commission=0.10000000, Final PnL=-0.1439364093701715716785905200
2025-06-27 04:11:19,699 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 04:11:19,724 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 04:11:19,799 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 04:11:20,660 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5213500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.7500000000000000000000000, PnL USD=-451.9657220175900172893332331, Commission=0.10000000, Final PnL=-452.0657220175900172893332331
2025-06-27 04:11:20,666 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 04:11:20,710 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 04:11:20,742 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 04:11:20,787 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 04:11:22,295 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.06000000000000000000000000, PnL USD=-0.04393640937017157167859051999, Commission=0.10000000, Final PnL=-0.1439364093701715716785905200
2025-06-27 04:11:22,300 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 04:11:22,810 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05125914426520016695835560665, Commission=0.10000000, Final PnL=-0.1512591442652001669583556066
2025-06-27 04:11:24,147 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89232, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02929093958011438111906034666, Commission=0.10000000, Final PnL=-0.1292909395801143811190603467
2025-06-27 04:11:26,500 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02196820468508578583929525999, Commission=0.10000000, Final PnL=-0.1219682046850857858392952600
2025-06-27 04:11:28,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:11:31,103 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:11:33,252 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03661367447514297639882543332, Commission=0.10000000, Final PnL=-0.1366136744751429763988254333
2025-06-27 04:11:35,811 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:11:38,063 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:11:40,321 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02196804381892473748187636385, Commission=0.10000000, Final PnL=-0.1219680438189247374818763638
2025-06-27 04:11:42,090 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 04:11:42,098 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 04:11:42,102 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 04:11:42,745 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464461188117361919615725384, Commission=0.10000000, Final PnL=-0.1146446118811736191961572538
2025-06-27 04:11:45,291 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:11:47,308 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464461188117361919615725384, Commission=0.10000000, Final PnL=-0.1146446118811736191961572538
2025-06-27 04:11:49,379 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464461188117361919615725384, Commission=0.10000000, Final PnL=-0.1146446118811736191961572538
2025-06-27 04:11:51,836 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:11:54,144 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:11:56,495 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:11:57,974 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 04:11:57,996 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 04:11:57,997 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 04:11:58,749 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007322305940586809598078626921, Commission=0.10000000, Final PnL=-0.09267769405941319040192137308
2025-06-27 04:12:01,087 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02196691782176042879423588076, Commission=0.10000000, Final PnL=-0.07803308217823957120576411924
2025-06-27 04:12:03,904 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 04:12:03,985 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 04:12:04,059 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 04:12:04,105 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 04:12:04,177 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 04:12:04,306 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 04:12:04,411 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 04:12:04,527 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 04:12:04,601 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 04:12:04,694 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 04:12:04,761 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 04:12:04,845 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 04:12:04,890 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 04:12:04,954 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 04:12:05,037 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 04:12:05,093 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 04:12:05,153 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 04:12:05,226 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 04:12:05,280 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 04:12:05,324 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 04:12:05,427 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 04:12:05,466 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 04:12:05,504 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 04:12:05,531 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 04:12:05,566 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 04:12:05,609 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 04:12:05,671 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 04:12:05,719 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 04:12:05,761 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 04:12:05,809 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 04:12:05,865 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 04:12:05,927 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 04:12:06,026 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 04:12:06,051 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 04:12:06,084 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 04:12:06,148 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 04:12:06,236 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 04:12:06,305 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 04:12:06,365 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 04:12:06,400 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 04:12:06,480 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 04:12:06,564 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 04:12:06,582 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 04:12:06,626 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 04:12:06,650 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 04:12:06,686 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 04:12:06,722 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 04:12:06,770 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 04:12:06,813 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 04:12:06,844 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 04:12:06,883 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 04:12:06,899 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 04:12:06,924 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 04:12:06,954 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 04:12:06,982 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 04:12:07,006 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 04:12:07,034 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 04:12:07,098 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 04:12:07,240 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 04:12:07,321 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 04:12:07,443 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 04:12:07,600 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 04:12:07,726 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 04:12:07,834 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 04:12:07,888 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 04:12:07,904 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 04:12:07,916 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 04:12:07,930 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 04:12:08,020 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 04:12:08,118 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 04:12:08,163 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 04:12:08,192 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 04:12:08,224 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 04:12:08,254 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 04:12:08,293 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 04:12:08,316 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 04:12:08,335 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 04:12:08,367 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 04:12:08,398 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 04:12:10,323 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02196707867143108195184816355, Commission=0.10000000, Final PnL=-0.07803292132856891804815183645
2025-06-27 04:12:12,699 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:12:14,984 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464546979005719055953017333, Commission=0.10000000, Final PnL=-0.1146454697900571905595301733
2025-06-27 04:12:17,054 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02196820468508578583929525999, Commission=0.10000000, Final PnL=-0.07803179531491421416070474001
2025-06-27 04:12:19,434 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:12:19,438 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 04:12:19,484 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 04:12:19,555 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 04:12:20,257 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5213200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.7800000000000000000000000, PnL USD=-451.9976446710682920106741503, Commission=0.10000000, Final PnL=-452.0976446710682920106741503
2025-06-27 04:12:20,262 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 04:12:20,306 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 04:12:20,320 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 04:12:20,459 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 04:12:22,149 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:12:22,151 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.8922500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.03000000000000000000000000, PnL USD=0.02196691782176042879423588076, Commission=0.10000000, Final PnL=-0.07803308217823957120576411924
2025-06-27 04:12:22,154 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 04:12:23,953 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007322895765901668155655472400, Commission=0.10000000, Final PnL=-0.09267710423409833184434452760
2025-06-27 04:12:26,444 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:12:28,663 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:12:30,902 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464632779946247976975972699, Commission=0.10000000, Final PnL=-0.08535367220053752023024027301
2025-06-27 04:12:31,009 - INFO - app.main - Application shutdown event triggered.
2025-06-27 04:12:31,010 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 04:12:31,010 - INFO - app.main - Cancelling 4 other background tasks...
2025-06-27 04:12:31,013 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 04:12:32,414 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 04:12:32,414 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 04:12:32,415 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-27 04:12:32,420 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-27 04:12:32,423 - INFO - app.main - Background task 'Task-6' cancelled successfully.
2025-06-27 04:12:32,430 - INFO - app.main - Redis client connection closed.
2025-06-27 04:12:32,430 - INFO - app.main - Application shutdown event finished.
2025-06-27 04:15:08,793 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 04:15:08,799 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 04:15:08,799 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 04:15:09,438 - INFO - app.main - Application startup event triggered.
2025-06-27 04:15:09,468 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 04:15:09,468 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 04:15:09,474 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 04:15:09,484 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 04:15:09,484 - INFO - app.main - Firebase events processor background task started
2025-06-27 04:15:09,484 - INFO - app.main - Redis publisher background task started
2025-06-27 04:15:09,484 - INFO - app.main - Pending order checker background task started
2025-06-27 04:15:09,484 - INFO - app.main - SL/TP checker task started (triggered by market updates)
2025-06-27 04:15:09,484 - INFO - app.main - Generating initial service account token...
2025-06-27 04:15:09,484 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 04:15:10,496 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 04:15:10,501 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 04:15:10,501 - INFO - app.main - Application startup event finished.
2025-06-27 04:15:10,501 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 04:15:10,501 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 04:15:11,206 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 04:15:11,454 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 04:15:11,465 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 04:15:11,477 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 04:15:11,489 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 04:15:11,498 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 04:15:11,507 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 04:15:11,517 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 04:15:11,525 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 04:15:11,534 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 04:15:11,543 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 04:15:11,553 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 04:15:11,566 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 04:15:11,575 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 04:15:11,584 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 04:15:11,591 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 04:15:11,601 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 04:15:11,609 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 04:15:11,616 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 04:15:11,624 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 04:15:11,634 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 04:15:11,643 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 04:15:11,651 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 04:15:11,660 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 04:15:11,671 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 04:15:11,683 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 04:15:11,692 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 04:15:11,701 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 04:15:11,710 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 04:15:11,717 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 04:15:11,726 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 04:15:11,734 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 04:15:11,741 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 04:15:11,750 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 04:15:11,758 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 04:15:11,766 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 04:15:11,775 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 04:15:11,782 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 04:15:11,791 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 04:15:11,800 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 04:15:11,808 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 04:15:11,817 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 04:15:11,824 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 04:15:11,833 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 04:15:11,842 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 04:15:11,851 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 04:15:11,859 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 04:15:11,869 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 04:15:11,880 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 04:15:11,890 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 04:15:11,900 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 04:15:11,908 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 04:15:11,918 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 04:15:11,927 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 04:15:11,935 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 04:15:11,943 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 04:15:11,953 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 04:15:11,961 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 04:15:11,971 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 04:15:11,983 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 04:15:11,992 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 04:15:12,004 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 04:15:12,016 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 04:15:12,027 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 04:15:12,037 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 04:15:12,046 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 04:15:12,058 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 04:15:12,069 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 04:15:12,080 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 04:15:12,093 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 04:15:12,105 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 04:15:12,117 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 04:15:12,129 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 04:15:12,141 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 04:15:12,152 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 04:15:12,166 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 04:15:12,181 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 04:15:12,200 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 04:15:12,213 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 04:15:12,228 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 04:15:13,149 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 04:15:15,560 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464546979005719055953017333, Commission=0.10000000, Final PnL=-0.08535453020994280944046982667
2025-06-27 04:15:17,825 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:15:20,781 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:15:23,247 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02196756123457694138322410574, Commission=0.10000000, Final PnL=-0.07803243876542305861677589426
2025-06-27 04:15:25,377 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02196756123457694138322410574, Commission=0.10000000, Final PnL=-0.07803243876542305861677589426
2025-06-27 04:15:28,054 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89228000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007322574031223455669136814973, Commission=0.10000000, Final PnL=-0.1073225740312234556691368150
2025-06-27 04:15:42,069 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89231000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007322734895028595279765086665, Commission=0.10000000, Final PnL=-0.1073227348950285952797650867
2025-06-27 04:15:42,550 - WARNING - app.services.portfolio_calculator - Invalid current prices for AUDCAD: buy=0, sell=0
2025-06-27 04:15:44,345 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89231000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 04:15:44,874 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:15:46,395 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89231000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04393640937017157167859051999, Commission=0.10000000, Final PnL=-0.1439364093701715716785905200
2025-06-27 04:15:49,220 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89231000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03661394258933801991798476860, Commission=0.10000000, Final PnL=-0.1366139425893380199179847686
2025-06-27 04:15:49,223 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007322788517867603983596953720, Commission=0.10000000, Final PnL=-0.1073227885178676039835969537
2025-06-27 04:15:49,864 - WARNING - app.services.portfolio_calculator - Invalid current prices for AUDCAD: buy=0, sell=0
2025-06-27 04:15:49,864 - WARNING - app.services.portfolio_calculator - Invalid current prices for AUDCAD: buy=0, sell=0
2025-06-27 04:15:51,510 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89231000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 04:15:51,512 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04393673110720562390158172232, Commission=0.10000000, Final PnL=-0.1439367311072056239015817223
2025-06-27 04:15:52,179 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:15:52,179 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:15:53,606 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:15:53,606 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:15:55,289 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89231000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007322788517867603983596953720, Commission=0.10000000, Final PnL=-0.1073227885178676039835969537
2025-06-27 04:15:55,291 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03661394258933801991798476860, Commission=0.10000000, Final PnL=-0.1366139425893380199179847686
2025-06-27 04:15:57,440 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:15:57,440 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:15:59,847 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:15:59,847 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:16:02,016 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:16:02,017 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:16:04,179 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89231000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 04:16:04,181 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04393640937017157167859051999, Commission=0.10000000, Final PnL=-0.1439364093701715716785905200
2025-06-27 04:16:06,649 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89231000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007322734895028595279765086665, Commission=0.10000000, Final PnL=-0.1073227348950285952797650867
2025-06-27 04:16:06,649 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03661367447514297639882543332, Commission=0.10000000, Final PnL=-0.1366136744751429763988254333
2025-06-27 04:16:09,116 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89231000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464546979005719055953017333, Commission=0.10000000, Final PnL=-0.1146454697900571905595301733
2025-06-27 04:16:09,117 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02929093958011438111906034666, Commission=0.10000000, Final PnL=-0.1292909395801143811190603467
2025-06-27 04:16:09,492 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 04:16:09,562 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 04:16:09,655 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 04:16:10,958 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5213600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.7400000000000000000000000, PnL USD=-451.9135609145004697776385844, Commission=0.10000000, Final PnL=-452.0135609145004697776385844
2025-06-27 04:16:10,975 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 04:16:11,091 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 04:16:11,121 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 04:16:11,214 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 04:16:11,882 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89231000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 04:16:11,886 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04393640937017157167859051999, Commission=0.10000000, Final PnL=-0.1439364093701715716785905200
2025-06-27 04:16:13,318 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89231000, Current=0.8923100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-26, PnL USD=0E-16, Commission=0.10000000, Final PnL=-0.1000000000000000
2025-06-27 04:16:13,321 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.06000000000000000000000000, PnL USD=-0.04393640937017157167859051999, Commission=0.10000000, Final PnL=-0.1439364093701715716785905200
2025-06-27 04:16:13,325 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 04:16:13,984 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:16:13,985 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:16:14,107 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 04:16:14,120 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 04:16:14,124 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 04:16:16,051 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89231000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 04:16:16,053 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89232, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05125839356194576861961146138, Commission=0.10000000, Final PnL=-0.1512583935619457686196114614
2025-06-27 04:16:18,944 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89231000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02196820468508578583929525999, Commission=0.10000000, Final PnL=-0.1219682046850857858392952600
2025-06-27 04:16:18,946 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02196820468508578583929525999, Commission=0.10000000, Final PnL=-0.1219682046850857858392952600
2025-06-27 04:16:20,924 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89226, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007322734895028595279765086665, Commission=0.10000000, Final PnL=-0.1073227348950285952797650867
2025-06-27 04:16:21,609 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:16:22,580 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03661367447514297639882543332, Commission=0.10000000, Final PnL=-0.1366136744751429763988254333
2025-06-27 04:16:24,983 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:16:27,542 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:16:29,510 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02929093958011438111906034666, Commission=0.10000000, Final PnL=-0.1292909395801143811190603467
2025-06-27 04:16:31,864 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02196852642447586757372271326, Commission=0.10000000, Final PnL=-0.1219685264244758675737227133
2025-06-27 04:16:34,419 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:16:36,350 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:16:38,672 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03661099354914293664101456385, Commission=0.10000000, Final PnL=-0.1366109935491429366410145638
2025-06-27 04:16:41,199 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04393158388003748828491096532, Commission=0.10000000, Final PnL=-0.1439315838800374882849109653
2025-06-27 04:16:43,316 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660965323336457357075913777, Commission=0.10000000, Final PnL=-0.1366096532333645735707591378
2025-06-27 04:16:45,470 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.100000000000000000000000, PnL USD=-0.07321769818200455414082692068, Commission=0.10000000, Final PnL=-0.1732176981820045541408269207
2025-06-27 04:16:47,720 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:16:50,175 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:16:52,496 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.100000000000000000000000, PnL USD=-0.07320858590295469852704325163, Commission=0.10000000, Final PnL=-0.1732085859029546985270432516
2025-06-27 04:16:54,884 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89236, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.110000000000000000000000, PnL USD=-0.08052826542116282815268159124, Commission=0.10000000, Final PnL=-0.1805282654211628281526815912
2025-06-27 04:16:57,239 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89236, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.110000000000000000000000, PnL USD=-0.08052767589806660370866551000, Commission=0.10000000, Final PnL=-0.1805276758980666037086655100
2025-06-27 04:16:59,110 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.100000000000000000000000, PnL USD=-0.07320804995717329077505362490, Commission=0.10000000, Final PnL=-0.1732080499571732907750536249
2025-06-27 04:17:01,750 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89232, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05124601013206828896893027614, Commission=0.10000000, Final PnL=-0.1512460101320682889689302761
2025-06-27 04:17:04,130 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.100000000000000000000000, PnL USD=-0.07320858590295469852704325163, Commission=0.10000000, Final PnL=-0.1732085859029546985270432516
2025-06-27 04:17:06,134 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660536488227714653859669673, Commission=0.10000000, Final PnL=-0.1366053648822771465385966967
2025-06-27 04:17:08,757 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04392708104546452888205578739, Commission=0.10000000, Final PnL=-0.1439270810454645288820557874
2025-06-27 04:17:09,490 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 04:17:09,541 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 04:17:09,602 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 04:17:10,776 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5211900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.9100000000000000000000000, PnL USD=-452.1718430910708245110690705, Commission=0.10000000, Final PnL=-452.2718430910708245110690705
2025-06-27 04:17:10,797 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 04:17:10,900 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 04:17:10,922 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 04:17:11,013 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 04:17:11,574 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.100000000000000000000000, PnL USD=-0.07321126574957354437700873410, Commission=0.10000000, Final PnL=-0.1732112657495735443770087341
2025-06-27 04:17:12,175 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.10000000000000000000000000, PnL USD=-0.07321180174244088147009297899, Commission=0.10000000, Final PnL=-0.1732118017424408814700929790
2025-06-27 04:17:12,178 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 04:17:13,016 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89235, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.100000000000000000000000, PnL USD=-0.07321180174244088147009297899, Commission=0.10000000, Final PnL=-0.1732118017424408814700929790
2025-06-27 04:17:15,467 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02196225420577168040527679761, Commission=0.10000000, Final PnL=-0.1219622542057716804052767976
2025-06-27 04:17:17,924 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660616887157823836472922417, Commission=0.10000000, Final PnL=-0.1366061688715782383647292242
2025-06-27 04:17:20,196 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660616887157823836472922417, Commission=0.10000000, Final PnL=-0.1366061688715782383647292242
2025-06-27 04:17:22,325 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660643687586025126658271590, Commission=0.10000000, Final PnL=-0.1366064368758602512665827159
2025-06-27 04:17:24,772 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02928514950068820101326617272, Commission=0.10000000, Final PnL=-0.1292851495006882010132661727
2025-06-27 04:17:27,452 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660590087122044073504648949, Commission=0.10000000, Final PnL=-0.1366059008712204407350464895
2025-06-27 04:17:29,676 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89231, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04392708104546452888205578739, Commission=0.10000000, Final PnL=-0.1439270810454645288820557874
2025-06-27 04:17:31,681 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660590087122044073504648949, Commission=0.10000000, Final PnL=-0.1366059008712204407350464895
2025-06-27 04:17:33,899 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660590087122044073504648949, Commission=0.10000000, Final PnL=-0.1366059008712204407350464895
2025-06-27 04:17:36,678 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02196370132294694301883753450, Commission=0.10000000, Final PnL=-0.1219637013229469430188375345
2025-06-27 04:17:38,300 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:17:40,726 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660590087122044073504648949, Commission=0.10000000, Final PnL=-0.1366059008712204407350464895
2025-06-27 04:17:43,424 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660590087122044073504648949, Commission=0.10000000, Final PnL=-0.1366059008712204407350464895
2025-06-27 04:17:45,275 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02196370132294694301883753450, Commission=0.10000000, Final PnL=-0.1219637013229469430188375345
2025-06-27 04:17:47,419 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02928493509726259069178337934, Commission=0.10000000, Final PnL=-0.1292849350972625906917833793
2025-06-27 04:17:50,191 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:17:52,239 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660643687586025126658271590, Commission=0.10000000, Final PnL=-0.1366064368758602512665827159
2025-06-27 04:17:54,445 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02196386212551615075994962954, Commission=0.10000000, Final PnL=-0.1219638621255161507599496295
2025-06-27 04:17:57,256 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.080000000000000000000000, PnL USD=-0.05857458741524989383356030986, Commission=0.10000000, Final PnL=-0.1585745874152498938335603099
2025-06-27 04:17:59,255 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89234, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.090000000000000000000000, PnL USD=-0.06589641084215613056275534859, Commission=0.10000000, Final PnL=-0.1658964108421561305627553486
2025-06-27 04:18:01,288 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.080000000000000000000000, PnL USD=-0.05857372968223751647386147313, Commission=0.10000000, Final PnL=-0.1585737296822375164738614731
2025-06-27 04:18:03,904 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:18:06,133 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660858105139844779616342071, Commission=0.10000000, Final PnL=-0.1366085810513984477961634207
2025-06-27 04:18:08,512 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660858105139844779616342071, Commission=0.10000000, Final PnL=-0.1366085810513984477961634207
2025-06-27 04:18:09,489 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 04:18:09,546 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 04:18:09,610 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 04:18:10,660 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:18:11,173 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5211900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.9100000000000000000000000, PnL USD=-452.2115023180052624984337802, Commission=0.10000000, Final PnL=-452.3115023180052624984337802
2025-06-27 04:18:11,180 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 04:18:11,235 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 04:18:11,252 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 04:18:11,339 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 04:18:12,049 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.05000000000000000000000000, PnL USD=-0.03660858105139844779616342071, Commission=0.10000000, Final PnL=-0.1366085810513984477961634207
2025-06-27 04:18:12,064 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 04:18:12,915 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:18:14,593 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 04:18:14,597 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 04:18:14,599 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 04:18:15,400 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660831301571960960895000037, Commission=0.10000000, Final PnL=-0.1366083130157196096089500004
2025-06-27 04:18:17,810 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02196514863083906867769805242, Commission=0.10000000, Final PnL=-0.1219651486308390686776980524
2025-06-27 04:18:19,773 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89227, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464343242055937911846536828, Commission=0.10000000, Final PnL=-0.1146434324205593791184653683
2025-06-27 04:18:19,776 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 04:18:19,780 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 04:18:19,780 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 04:18:22,149 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89233, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.080000000000000000000000, PnL USD=-0.05857587406187076697785099762, Commission=0.10000000, Final PnL=-0.1585758740618707669778509976
2025-06-27 04:18:24,575 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02928793703093538348892549881, Commission=0.10000000, Final PnL=-0.1292879370309353834889254988
2025-06-27 04:18:27,353 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:18:28,916 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.89229, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02928686484111875823693073656, Commission=0.10000000, Final PnL=-0.1292868648411187582369307366
2025-06-27 04:18:31,355 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660938518198525373964869634, Commission=0.10000000, Final PnL=-0.1366093851819852537396486963
2025-06-27 04:18:33,719 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:18:36,469 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89225000, Current=0.8923, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03660965323336457357075913777, Commission=0.10000000, Final PnL=-0.1366096532333645735707591378
2025-06-27 04:18:38,144 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:18:40,497 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:18:43,298 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:18:44,249 - INFO - app.main - Application shutdown event triggered.
2025-06-27 04:18:44,250 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 04:18:44,250 - INFO - app.main - Cancelling 4 other background tasks...
2025-06-27 04:18:44,270 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 04:18:46,416 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 04:18:46,417 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 04:18:46,417 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-27 04:18:46,486 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-27 04:18:46,508 - INFO - app.main - Background task 'Task-6' cancelled successfully.
2025-06-27 04:18:46,521 - INFO - app.main - Redis client connection closed.
2025-06-27 04:18:46,522 - INFO - app.main - Application shutdown event finished.
