2025-06-27 04:47:37,984 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 04:47:37,989 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 04:47:37,989 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 04:47:38,588 - INFO - app.main - Application startup event triggered.
2025-06-27 04:47:38,624 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 04:47:38,625 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 04:47:38,629 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 04:47:38,637 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 04:47:38,638 - INFO - app.main - Firebase events processor background task started
2025-06-27 04:47:38,638 - INFO - app.main - Redis publisher background task started
2025-06-27 04:47:38,638 - INFO - app.main - Pending order checker background task started
2025-06-27 04:47:38,638 - INFO - app.main - SL/TP checker background task started
2025-06-27 04:47:38,638 - INFO - app.main - Redis cleanup background task started
2025-06-27 04:47:38,638 - INFO - app.main - Generating initial service account token...
2025-06-27 04:47:38,638 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 04:47:39,470 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 04:47:39,474 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 04:47:39,474 - INFO - app.main - Application startup event finished.
2025-06-27 04:47:39,474 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 04:47:39,475 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 04:47:40,211 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 04:47:44,239 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 04:47:44,247 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 04:47:44,248 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 04:47:44,503 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 04:47:44,514 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 04:47:44,521 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 04:47:44,531 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 04:47:44,542 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 04:47:44,549 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 04:47:44,564 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 04:47:44,577 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 04:47:44,594 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 04:47:44,610 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 04:47:44,627 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 04:47:44,645 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 04:47:44,662 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 04:47:44,682 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 04:47:44,699 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 04:47:44,713 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 04:47:44,728 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 04:47:44,744 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 04:47:44,758 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 04:47:44,774 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 04:47:44,782 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 04:47:44,797 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 04:47:44,813 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 04:47:44,827 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 04:47:44,841 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 04:47:44,856 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 04:47:44,869 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 04:47:44,886 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 04:47:44,905 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 04:47:44,927 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 04:47:44,947 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 04:47:44,967 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 04:47:44,983 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 04:47:45,000 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 04:47:45,016 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 04:47:45,030 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 04:47:45,041 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 04:47:45,054 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 04:47:45,069 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 04:47:45,083 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 04:47:45,095 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 04:47:45,101 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 04:47:45,108 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 04:47:45,114 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 04:47:45,120 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 04:47:45,125 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 04:47:45,131 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 04:47:45,142 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 04:47:45,157 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 04:47:45,170 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 04:47:45,182 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 04:47:45,197 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 04:47:45,211 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 04:47:45,223 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 04:47:45,239 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 04:47:45,252 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 04:47:45,281 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 04:47:45,298 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 04:47:45,322 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 04:47:45,359 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 04:47:45,394 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 04:47:45,421 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 04:47:45,453 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 04:47:45,480 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 04:47:45,499 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 04:47:45,513 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 04:47:45,526 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 04:47:45,546 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 04:47:45,565 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 04:47:45,590 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 04:47:45,619 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 04:47:45,646 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 04:47:45,664 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 04:47:45,684 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 04:47:45,702 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 04:47:45,715 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 04:47:45,726 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 04:47:45,737 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 04:47:45,750 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 04:47:53,330 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 04:47:53,547 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 04:47:53,664 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 04:47:53,796 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 04:47:53,909 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 04:47:54,045 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 04:47:54,119 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 04:47:54,212 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 04:47:54,274 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 04:47:54,340 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 04:47:54,421 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 04:47:54,540 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 04:47:54,645 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 04:47:54,718 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 04:47:54,797 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 04:47:54,874 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 04:47:54,921 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 04:47:54,992 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 04:47:55,078 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 04:47:55,197 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 04:47:55,271 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 04:47:55,329 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 04:47:55,372 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 04:47:55,459 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 04:47:55,555 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 04:47:55,598 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 04:47:55,690 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 04:47:55,763 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 04:47:55,812 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 04:47:55,856 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 04:47:55,887 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 04:47:55,945 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 04:47:56,051 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 04:47:56,233 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 04:47:56,358 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 04:47:56,516 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 04:47:56,621 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 04:47:56,641 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 04:47:56,659 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 04:47:56,677 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 04:47:56,840 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 04:47:56,865 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 04:47:56,900 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 04:47:56,949 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 04:47:56,999 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 04:47:57,048 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 04:47:57,111 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 04:47:57,144 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 04:47:57,209 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 04:47:57,261 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 04:47:57,319 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 04:47:57,363 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 04:47:57,391 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 04:47:57,449 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 04:47:57,514 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 04:47:57,579 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 04:47:57,639 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 04:47:57,717 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 04:47:57,767 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 04:47:57,846 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 04:47:58,013 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 04:47:58,127 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 04:47:58,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 04:47:58,245 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 04:47:58,313 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 04:47:58,385 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 04:47:58,439 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 04:47:58,507 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 04:47:58,538 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 04:47:58,596 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 04:47:58,640 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 04:47:58,691 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 04:47:58,753 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 04:47:58,797 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 04:47:58,838 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 04:47:58,872 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 04:47:58,916 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 04:47:58,970 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 04:47:59,025 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 04:48:01,322 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198027636534150022712952244, Commission=0.10000000, Final PnL=-0.07801972363465849977287047756
2025-06-27 04:48:01,323 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465351757689433348475301496, Commission=0.10000000, Final PnL=-0.08534648242310566651524698504
2025-06-27 04:48:03,354 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465351757689433348475301496, Commission=0.10000000, Final PnL=-0.08534648242310566651524698504
2025-06-27 04:48:03,355 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007326758788447166742376507481, Commission=0.10000000, Final PnL=-0.09267324121155283325762349252
2025-06-27 04:48:05,602 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198027636534150022712952244, Commission=0.10000000, Final PnL=-0.07801972363465849977287047756
2025-06-27 04:48:05,603 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465351757689433348475301496, Commission=0.10000000, Final PnL=-0.08534648242310566651524698504
2025-06-27 04:48:08,162 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02930682042978452160279000930, Commission=0.10000000, Final PnL=-0.07069317957021547839720999070
2025-06-27 04:48:08,163 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198011532233839120209250698, Commission=0.10000000, Final PnL=-0.07801988467766160879790749302
2025-06-27 04:48:10,304 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03663352553723065200348751163, Commission=0.10000000, Final PnL=-0.06336647446276934799651248837
2025-06-27 04:48:10,305 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02930682042978452160279000930, Commission=0.10000000, Final PnL=-0.07069317957021547839720999070
2025-06-27 04:48:12,909 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465351757689433348475301496, Commission=0.10000000, Final PnL=-0.08534648242310566651524698504
2025-06-27 04:48:12,910 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007326758788447166742376507481, Commission=0.10000000, Final PnL=-0.09267324121155283325762349252
2025-06-27 04:48:15,105 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198027636534150022712952244, Commission=0.10000000, Final PnL=-0.07801972363465849977287047756
2025-06-27 04:48:15,106 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465351757689433348475301496, Commission=0.10000000, Final PnL=-0.08534648242310566651524698504
2025-06-27 04:48:17,686 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02930682042978452160279000930, Commission=0.10000000, Final PnL=-0.07069317957021547839720999070
2025-06-27 04:48:17,687 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198011532233839120209250698, Commission=0.10000000, Final PnL=-0.07801988467766160879790749302
2025-06-27 04:48:19,941 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465341021489226080139500465, Commission=0.10000000, Final PnL=-0.08534658978510773919860499535
2025-06-27 04:48:19,942 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007326705107446130400697502326, Commission=0.10000000, Final PnL=-0.09267329489255386959930249767
2025-06-27 04:48:21,783 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02930746461123648193194806717, Commission=0.10000000, Final PnL=-0.07069253538876351806805193283
2025-06-27 04:48:21,784 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198059845842736144896105038, Commission=0.10000000, Final PnL=-0.07801940154157263855103894962
2025-06-27 04:48:23,320 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:48:23,320 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:48:25,774 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198059845842736144896105038, Commission=0.10000000, Final PnL=-0.07801940154157263855103894962
2025-06-27 04:48:25,775 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465373230561824096597403359, Commission=0.10000000, Final PnL=-0.08534626769438175903402596641
2025-06-27 04:48:28,274 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465373230561824096597403359, Commission=0.10000000, Final PnL=-0.08534626769438175903402596641
2025-06-27 04:48:28,276 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007326866152809120482987016793, Commission=0.10000000, Final PnL=-0.09267313384719087951701298321
2025-06-27 04:48:30,186 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:48:30,186 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:48:32,652 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89214, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.100000000000000000000000, PnL USD=0.07326597747803852325095795266, Commission=0.10000000, Final PnL=-0.02673402252196147674904204734
2025-06-27 04:48:32,654 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89214, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.090000000000000000000000, PnL USD=0.06593937973023467092586215739, Commission=0.10000000, Final PnL=-0.03406062026976532907413784261
2025-06-27 04:48:34,784 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05861149371391729918236966269, Commission=0.10000000, Final PnL=-0.04138850628608270081763033731
2025-06-27 04:48:34,785 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05128505699967763678457345485, Commission=0.10000000, Final PnL=-0.04871494300032236321542654515
2025-06-27 04:48:37,249 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02930574685695864959118483135, Commission=0.10000000, Final PnL=-0.07069425314304135040881516865
2025-06-27 04:48:37,250 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197931014271898719338862351, Commission=0.10000000, Final PnL=-0.07802068985728101280661137649
2025-06-27 04:48:38,634 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 04:48:38,657 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 04:48:38,688 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 04:48:39,248 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.9200000000000000000000000, PnL USD=-450.4010711917007671034025353, Commission=0.10000000, Final PnL=-450.5010711917007671034025353
2025-06-27 04:48:39,256 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 04:48:39,282 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 04:48:39,290 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 04:48:39,316 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 04:48:39,646 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04395862028543797438677724702, Commission=0.10000000, Final PnL=-0.05604137971456202561322275298
2025-06-27 04:48:39,648 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03663218357119831198898103918, Commission=0.10000000, Final PnL=-0.06336781642880168801101896082
2025-06-27 04:48:40,068 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8921800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.06000000000000000000000000, PnL USD=0.04395862028543797438677724702, Commission=0.10000000, Final PnL=-0.05604137971456202561322275298
2025-06-27 04:48:40,069 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8921800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.05000000000000000000000000, PnL USD=0.03663218357119831198898103918, Commission=0.10000000, Final PnL=-0.06336781642880168801101896082
2025-06-27 04:48:40,071 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 04:48:41,567 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:48:41,567 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:48:43,879 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03663245195653925899876182312, Commission=0.10000000, Final PnL=-0.06336754804346074100123817688
2025-06-27 04:48:43,881 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02930596156523140719900945850, Commission=0.10000000, Final PnL=-0.07069403843476859280099054150
2025-06-27 04:48:46,108 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465308813832515202578943512, Commission=0.10000000, Final PnL=-0.08534691186167484797421056488
2025-06-27 04:48:46,108 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007326544069162576012894717562, Commission=0.10000000, Final PnL=-0.09267345593083742398710528244
2025-06-27 04:48:48,525 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:48:48,525 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:48:50,867 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:48:50,867 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:48:53,221 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 04:48:53,222 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007326490391307851799752364625, Commission=0.10000000, Final PnL=-0.1073264903913078517997523646
2025-06-27 04:48:55,230 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007326490391307851799752364625, Commission=0.10000000, Final PnL=-0.09267350960869214820024763538
2025-06-27 04:48:55,231 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 04:48:57,620 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:48:57,620 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:48:59,888 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 04:48:59,889 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007326490391307851799752364625, Commission=0.10000000, Final PnL=-0.1073264903913078517997523646
2025-06-27 04:49:02,210 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:02,211 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:04,452 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:04,452 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:06,912 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:06,912 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:08,991 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:08,991 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:11,204 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03663272034581288006447358781, Commission=0.10000000, Final PnL=-0.06336727965418711993552641219
2025-06-27 04:49:11,205 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02930617627665030405157887025, Commission=0.10000000, Final PnL=-0.07069382372334969594842112975
2025-06-27 04:49:13,704 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04395894234784711079851418775, Commission=0.10000000, Final PnL=-0.05604105765215288920148581225
2025-06-27 04:49:13,705 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03663245195653925899876182312, Commission=0.10000000, Final PnL=-0.06336754804346074100123817688
2025-06-27 04:49:15,890 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05128580848413803209026302293, Commission=0.10000000, Final PnL=-0.04871419151586196790973697707
2025-06-27 04:49:15,891 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04395926441497545607736830537, Commission=0.10000000, Final PnL=-0.05604073558502454392263169463
2025-06-27 04:49:18,553 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05128580848413803209026302293, Commission=0.10000000, Final PnL=-0.04871419151586196790973697707
2025-06-27 04:49:18,554 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04395926441497545607736830537, Commission=0.10000000, Final PnL=-0.05604073558502454392263169463
2025-06-27 04:49:20,064 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 04:49:20,070 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 04:49:20,073 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 04:49:20,704 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89215, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.090000000000000000000000, PnL USD=0.06593841352177066619777128162, Commission=0.10000000, Final PnL=-0.03406158647822933380222871838
2025-06-27 04:49:20,705 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89215, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05861192313046281439801891700, Commission=0.10000000, Final PnL=-0.04138807686953718560198108300
2025-06-27 04:49:22,790 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:22,790 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:25,375 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:25,375 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:28,237 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89214, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.100000000000000000000000, PnL USD=0.07326275687754130187918971391, Commission=0.10000000, Final PnL=-0.02673724312245869812081028609
2025-06-27 04:49:28,239 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89214, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.090000000000000000000000, PnL USD=0.06593648118978717169127074252, Commission=0.10000000, Final PnL=-0.03406351881021282830872925748
2025-06-27 04:49:29,917 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.110000000000000000000000, PnL USD=0.08059198476078833614184189318, Commission=0.10000000, Final PnL=-0.01940801523921166385815810682
2025-06-27 04:49:29,918 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.100000000000000000000000, PnL USD=0.07326544069162576012894717562, Commission=0.10000000, Final PnL=-0.02673455930837423987105282438
2025-06-27 04:49:32,552 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:32,552 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:34,799 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:34,799 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:36,942 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.110000000000000000000000, PnL USD=0.08059021341753789571626383771, Commission=0.10000000, Final PnL=-0.01940978658246210428373616229
2025-06-27 04:49:36,944 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.100000000000000000000000, PnL USD=0.07326383037957990519660348882, Commission=0.10000000, Final PnL=-0.02673616962042009480339651118
2025-06-27 04:49:38,643 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 04:49:38,694 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 04:49:38,801 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 04:49:39,406 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.110000000000000000000000, PnL USD=0.08059198476078833614184189318, Commission=0.10000000, Final PnL=-0.01940801523921166385815810682
2025-06-27 04:49:39,409 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.100000000000000000000000, PnL USD=0.07326544069162576012894717562, Commission=0.10000000, Final PnL=-0.02673455930837423987105282438
2025-06-27 04:49:40,114 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.9800000000000000000000000, PnL USD=-450.4423339214434976287898695, Commission=0.10000000, Final PnL=-450.5423339214434976287898695
2025-06-27 04:49:40,120 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 04:49:40,166 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 04:49:40,176 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 04:49:40,238 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 04:49:41,346 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8921300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.11000000000000000000000000, PnL USD=0.08059021341753789571626383771, Commission=0.10000000, Final PnL=-0.01940978658246210428373616229
2025-06-27 04:49:41,348 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8921300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.10000000000000000000000000, PnL USD=0.07326383037957990519660348882, Commission=0.10000000, Final PnL=-0.02673616962042009480339651118
2025-06-27 04:49:41,350 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 04:49:42,059 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:42,059 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 04:49:43,639 - INFO - app.main - Application shutdown event triggered.
2025-06-27 04:49:43,639 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 04:49:43,639 - INFO - app.main - Cancelling 5 other background tasks...
2025-06-27 04:49:43,658 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 04:49:45,133 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 05:00:11,643 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:00:11,649 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:00:11,649 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:00:17,207 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:00:17,213 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:00:17,213 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:00:22,683 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:00:22,688 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:00:22,689 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:02:14,549 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:02:14,554 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:02:14,554 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:02:59,598 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:02:59,603 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:02:59,604 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:03:28,439 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:03:28,445 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:03:28,445 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:03:29,245 - INFO - app.main - Application startup event triggered.
2025-06-27 05:03:29,277 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 05:03:29,277 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 05:03:29,282 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 05:03:29,296 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 05:03:29,297 - INFO - app.main - Firebase events processor background task started
2025-06-27 05:03:29,297 - INFO - app.main - Redis publisher background task started
2025-06-27 05:03:29,297 - INFO - app.main - Pending order checker background task started
2025-06-27 05:03:29,297 - INFO - app.main - SL/TP checker background task started
2025-06-27 05:03:29,297 - INFO - app.main - Redis cleanup background task started
2025-06-27 05:03:29,297 - INFO - app.main - Generating initial service account token...
2025-06-27 05:03:29,297 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 05:03:30,220 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 05:03:30,223 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 05:03:30,224 - INFO - app.main - Application startup event finished.
2025-06-27 05:03:30,224 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:03:30,225 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 05:03:30,859 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:03:35,942 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:03:35,955 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:03:35,967 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:03:35,977 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:03:35,986 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:03:35,997 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:03:36,007 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:03:36,017 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:03:36,023 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:03:36,033 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:03:36,043 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:03:36,055 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:03:36,066 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:03:36,075 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:03:36,083 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:03:36,096 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:03:36,105 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:03:36,115 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:03:36,124 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:03:36,132 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:03:36,141 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:03:36,149 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:03:36,157 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:03:36,165 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:03:36,174 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:03:36,185 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:03:36,192 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:03:36,202 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:03:36,211 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:03:36,220 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:03:36,231 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:03:36,242 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:03:36,253 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:03:36,263 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:03:36,270 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:03:36,279 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:03:36,287 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:03:36,296 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:03:36,304 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:03:36,312 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:03:36,319 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:03:36,328 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:03:36,339 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:03:36,347 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:03:36,357 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:03:36,366 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:03:36,374 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:03:36,382 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:03:36,392 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:03:36,402 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:03:36,413 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:03:36,422 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:03:36,432 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:03:36,471 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:03:36,497 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:03:36,525 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:03:36,536 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:03:36,542 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:03:36,547 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:03:36,561 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:03:36,571 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:03:36,580 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:03:36,590 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:03:36,600 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:03:36,611 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:03:36,619 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:03:36,629 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:03:36,638 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:03:36,646 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:03:36,656 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:03:36,665 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:03:36,673 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:03:36,683 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:03:36,692 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:03:36,701 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:03:36,708 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:03:36,718 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:03:36,729 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:03:36,739 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:03:38,582 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8921, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1025498282290377163618250939, Commission=0.10000000, Final PnL=0.0025498282290377163618250939
2025-06-27 05:03:38,584 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8921, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09522484049839216519312330152, Commission=0.10000000, Final PnL=-0.00477515950160783480687669848
2025-06-27 05:03:38,887 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:03:38,891 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:03:38,892 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:04:13,532 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:04:13,696 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:04:13,783 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:04:13,799 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:04:13,800 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:04:14,047 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:04:14,158 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:04:14,210 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:04:14,266 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:04:14,350 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:04:14,412 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:04:14,480 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:04:14,689 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:04:14,799 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:04:14,911 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:04:14,914 - INFO - app.main - Application startup event triggered.
2025-06-27 05:04:14,954 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 05:04:14,954 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 05:04:14,960 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 05:04:14,977 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 05:04:14,977 - INFO - app.main - Firebase events processor background task started
2025-06-27 05:04:14,978 - INFO - app.main - Redis publisher background task started
2025-06-27 05:04:14,978 - INFO - app.main - Pending order checker background task started
2025-06-27 05:04:14,978 - INFO - app.main - SL/TP checker background task started
2025-06-27 05:04:14,978 - INFO - app.main - Redis cleanup background task started
2025-06-27 05:04:14,978 - INFO - app.main - Generating initial service account token...
2025-06-27 05:04:14,978 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 05:04:15,033 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:04:15,180 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:04:15,376 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:04:15,519 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:04:15,608 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:04:15,709 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:04:15,827 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:04:15,832 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 05:04:15,839 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 05:04:15,839 - INFO - app.main - Application startup event finished.
2025-06-27 05:04:15,841 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:04:15,842 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 05:04:15,964 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:04:16,024 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:04:16,091 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:04:16,158 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:04:16,210 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:04:16,251 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:04:16,298 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:04:16,340 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:04:16,382 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:04:16,428 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:04:16,464 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:04:16,492 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:04:16,478 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:04:16,605 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:04:16,750 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:04:16,827 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:04:16,987 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:04:17,139 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:04:17,250 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:04:17,320 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:04:17,499 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:04:17,875 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:04:18,084 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:04:18,243 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:04:18,357 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:04:18,420 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:04:18,499 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:04:18,568 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:04:18,667 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:04:18,769 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:04:18,854 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:04:18,949 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:04:19,038 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:04:19,097 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:04:19,291 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:04:19,398 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:04:19,528 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:04:19,638 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:04:19,781 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:04:19,898 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:04:19,943 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:04:19,965 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:04:19,980 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:04:19,996 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:04:20,007 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:04:20,027 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:04:20,041 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:04:20,055 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:04:20,070 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:04:20,088 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:04:20,105 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:04:20,123 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:04:20,142 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:04:20,160 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:04:20,177 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:04:20,192 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:04:20,206 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:04:20,222 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:04:20,236 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:04:20,250 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:04:20,263 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:04:22,023 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197512415945150090098009054, Commission=0.10000000, Final PnL=-0.07802487584054849909901990946
2025-06-27 05:04:22,023 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465008277296766726732006036, Commission=0.10000000, Final PnL=-0.08534991722703233273267993964
2025-06-27 05:04:22,556 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197512415945150090098009054, Commission=0.10000000, Final PnL=-0.07802487584054849909901990946
2025-06-27 05:04:22,557 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465008277296766726732006036, Commission=0.10000000, Final PnL=-0.08534991722703233273267993964
2025-06-27 05:04:24,418 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007324397568300007324397568300, Commission=0.10000000, Final PnL=-0.09267560243169999267560243170
2025-06-27 05:04:24,420 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:04:25,752 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007324397568300007324397568300, Commission=0.10000000, Final PnL=-0.09267560243169999267560243170
2025-06-27 05:04:25,755 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:04:27,741 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464879513660001464879513660, Commission=0.10000000, Final PnL=-0.08535120486339998535120486340
2025-06-27 05:04:27,742 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007324397568300007324397568300, Commission=0.10000000, Final PnL=-0.09267560243169999267560243170
2025-06-27 05:04:28,331 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464804411990888916557416671, Commission=0.10000000, Final PnL=-0.08535195588009111083442583329
2025-06-27 05:04:28,344 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007324022059954444582787083355, Commission=0.10000000, Final PnL=-0.09267597794004555541721291664
2025-06-27 05:04:29,407 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:04:29,414 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05126815441968111207950958348, Commission=0.10000000, Final PnL=-0.04873184558031888792049041652
2025-06-27 05:04:29,415 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04394413235972666749672250013, Commission=0.10000000, Final PnL=-0.05605586764027333250327749987
2025-06-27 05:04:29,427 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:04:29,504 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:04:30,304 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5220500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.0500000000000000000000000, PnL USD=-450.4735571208727964267393997, Commission=0.10000000, Final PnL=-450.5735571208727964267393997
2025-06-27 05:04:30,635 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05126702797714955324447048484, Commission=0.10000000, Final PnL=-0.04873297202285044675552951516
2025-06-27 05:04:30,637 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:04:30,664 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04394316683755675992383184415, Commission=0.10000000, Final PnL=-0.05605683316244324007616815585
2025-06-27 05:04:30,799 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:04:30,865 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:04:31,006 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:04:31,814 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197158341877837996191592207, Commission=0.10000000, Final PnL=-0.07802841658122162003808407793
2025-06-27 05:04:31,817 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464772227918558664127728138, Commission=0.10000000, Final PnL=-0.08535227772081441335872271862
2025-06-27 05:04:32,410 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.03000000000000000000000000, PnL USD=0.02197158341877837996191592207, Commission=0.10000000, Final PnL=-0.07802841658122162003808407793
2025-06-27 05:04:32,412 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.02000000000000000000000000, PnL USD=0.01464772227918558664127728138, Commission=0.10000000, Final PnL=-0.08535227772081441335872271862
2025-06-27 05:04:32,419 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:04:32,954 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197174433678289719420824819, Commission=0.10000000, Final PnL=-0.07802825566321710280579175181
2025-06-27 05:04:32,962 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464782955785526479613883213, Commission=0.10000000, Final PnL=-0.08535217044214473520386116787
2025-06-27 05:04:33,858 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02929565911571052959227766426, Commission=0.10000000, Final PnL=-0.07070434088428947040772233574
2025-06-27 05:04:33,860 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197174433678289719420824819, Commission=0.10000000, Final PnL=-0.07802825566321710280579175181
2025-06-27 05:04:34,576 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02929565911571052959227766426, Commission=0.10000000, Final PnL=-0.07070434088428947040772233574
2025-06-27 05:04:34,577 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197174433678289719420824819, Commission=0.10000000, Final PnL=-0.07802825566321710280579175181
2025-06-27 05:04:35,791 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03662306080893016714764953196, Commission=0.10000000, Final PnL=-0.06337693919106983285235046804
2025-06-27 05:04:35,792 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02929844864714413371811962557, Commission=0.10000000, Final PnL=-0.07070155135285586628188037443
2025-06-27 05:04:36,380 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03662306080893016714764953196, Commission=0.10000000, Final PnL=-0.06337693919106983285235046804
2025-06-27 05:04:36,381 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02929844864714413371811962557, Commission=0.10000000, Final PnL=-0.07070155135285586628188037443
2025-06-27 05:04:38,163 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:38,163 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:39,049 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:39,049 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:40,613 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02929694652574835387781708451, Commission=0.10000000, Final PnL=-0.07070305347425164612218291549
2025-06-27 05:04:40,615 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197270989431126540836281339, Commission=0.10000000, Final PnL=-0.07802729010568873459163718661
2025-06-27 05:04:41,321 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02929694652574835387781708451, Commission=0.10000000, Final PnL=-0.07070305347425164612218291549
2025-06-27 05:04:41,324 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197270989431126540836281339, Commission=0.10000000, Final PnL=-0.07802729010568873459163718661
2025-06-27 05:04:42,355 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:04:42,372 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:04:42,372 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:04:42,657 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:42,657 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:43,377 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:43,378 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:44,949 - INFO - app.main - Application startup event triggered.
2025-06-27 05:04:44,985 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 05:04:44,986 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 05:04:44,996 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 05:04:45,009 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 05:04:45,009 - INFO - app.main - Firebase events processor background task started
2025-06-27 05:04:45,009 - INFO - app.main - Redis publisher background task started
2025-06-27 05:04:45,009 - INFO - app.main - Pending order checker background task started
2025-06-27 05:04:45,009 - INFO - app.main - SL/TP checker background task started
2025-06-27 05:04:45,009 - INFO - app.main - Redis cleanup background task started
2025-06-27 05:04:45,009 - INFO - app.main - Generating initial service account token...
2025-06-27 05:04:45,009 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 05:04:45,135 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:45,135 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:45,952 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:45,952 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:45,980 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 05:04:45,985 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 05:04:45,985 - INFO - app.main - Application startup event finished.
2025-06-27 05:04:45,986 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:04:45,987 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 05:04:46,714 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:04:47,194 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:47,194 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:47,705 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:47,705 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:48,321 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02929737568757278566772381364, Commission=0.10000000, Final PnL=-0.07070262431242721433227618636
2025-06-27 05:04:48,324 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197303176567958925079286023, Commission=0.10000000, Final PnL=-0.07802696823432041074920713977
2025-06-27 05:04:49,822 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:49,822 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:50,440 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:50,440 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:51,064 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:51,064 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:51,876 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197319270490002197319270490, Commission=0.10000000, Final PnL=-0.07802680729509997802680729510
2025-06-27 05:04:51,880 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464879513660001464879513660, Commission=0.10000000, Final PnL=-0.08535120486339998535120486340
2025-06-27 05:04:52,596 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197319270490002197319270490, Commission=0.10000000, Final PnL=-0.07802680729509997802680729510
2025-06-27 05:04:52,597 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464879513660001464879513660, Commission=0.10000000, Final PnL=-0.08535120486339998535120486340
2025-06-27 05:04:53,322 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197319270490002197319270490, Commission=0.10000000, Final PnL=-0.07802680729509997802680729510
2025-06-27 05:04:53,328 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464879513660001464879513660, Commission=0.10000000, Final PnL=-0.08535120486339998535120486340
2025-06-27 05:04:55,152 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02929780486197071684404046027, Commission=0.10000000, Final PnL=-0.07070219513802928315595953973
2025-06-27 05:04:55,154 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197335364647803763303034520, Commission=0.10000000, Final PnL=-0.07802664635352196236696965480
2025-06-27 05:04:56,409 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02929737568757278566772381364, Commission=0.10000000, Final PnL=-0.07070262431242721433227618636
2025-06-27 05:04:56,427 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197303176567958925079286023, Commission=0.10000000, Final PnL=-0.07802696823432041074920713977
2025-06-27 05:04:57,764 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02929737568757278566772381364, Commission=0.10000000, Final PnL=-0.07070262431242721433227618636
2025-06-27 05:04:57,765 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197303176567958925079286023, Commission=0.10000000, Final PnL=-0.07802696823432041074920713977
2025-06-27 05:04:59,518 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:04:59,518 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:02,305 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:02,305 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:03,267 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:03,267 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:04,584 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05860076034486547462953331819, Commission=0.10000000, Final PnL=-0.04139923965513452537046668181
2025-06-27 05:05:04,586 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05127566530175729030084165342, Commission=0.10000000, Final PnL=-0.04872433469824270969915834658
2025-06-27 05:05:05,413 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05860204814158254831006343672, Commission=0.10000000, Final PnL=-0.04139795185841745168993656328
2025-06-27 05:05:05,421 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05127679212388472977130550713, Commission=0.10000000, Final PnL=-0.04872320787611527022869449287
2025-06-27 05:05:06,188 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05860204814158254831006343672, Commission=0.10000000, Final PnL=-0.04139795185841745168993656328
2025-06-27 05:05:06,190 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05127679212388472977130550713, Commission=0.10000000, Final PnL=-0.04872320787611527022869449287
2025-06-27 05:05:06,828 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05127679212388472977130550713, Commission=0.10000000, Final PnL=-0.04872320787611527022869449287
2025-06-27 05:05:06,830 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04395153610618691123254757754, Commission=0.10000000, Final PnL=-0.05604846389381308876745242246
2025-06-27 05:05:07,542 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05127115850844875447707080547, Commission=0.10000000, Final PnL=-0.04872884149155124552292919453
2025-06-27 05:05:07,552 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04394670729295607526606069040, Commission=0.10000000, Final PnL=-0.05605329270704392473393930960
2025-06-27 05:05:08,672 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05127115850844875447707080547, Commission=0.10000000, Final PnL=-0.04872884149155124552292919453
2025-06-27 05:05:08,675 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04394670729295607526606069040, Commission=0.10000000, Final PnL=-0.05605329270704392473393930960
2025-06-27 05:05:09,812 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007325202358715159506281361023, Commission=0.10000000, Final PnL=-0.09267479764128484049371863898
2025-06-27 05:05:09,824 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:05:10,926 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007325202358715159506281361023, Commission=0.10000000, Final PnL=-0.09267479764128484049371863898
2025-06-27 05:05:10,926 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:05:11,647 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007325202358715159506281361023, Commission=0.10000000, Final PnL=-0.09267479764128484049371863898
2025-06-27 05:05:11,649 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:05:12,660 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464890243098535842202023013, Commission=0.10000000, Final PnL=-0.08535109756901464157797976987
2025-06-27 05:05:12,665 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007324451215492679211010115067, Commission=0.10000000, Final PnL=-0.09267554878450732078898988493
2025-06-27 05:05:13,653 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464890243098535842202023013, Commission=0.10000000, Final PnL=-0.08535109756901464157797976987
2025-06-27 05:05:13,657 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007324451215492679211010115067, Commission=0.10000000, Final PnL=-0.09267554878450732078898988493
2025-06-27 05:05:14,320 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465147796784000586059118714, Commission=0.10000000, Final PnL=-0.08534852203215999413940881286
2025-06-27 05:05:14,330 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007325738983920002930295593568, Commission=0.10000000, Final PnL=-0.09267426101607999706970440643
2025-06-27 05:05:14,973 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:05:14,999 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:05:15,041 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:05:15,179 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197721695176000879088678070, Commission=0.10000000, Final PnL=-0.07802278304823999120911321930
2025-06-27 05:05:15,181 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465147796784000586059118714, Commission=0.10000000, Final PnL=-0.08534852203215999413940881286
2025-06-27 05:05:15,665 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5220600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.0400000000000000000000000, PnL USD=-450.5399622089021811219701425, Commission=0.10000000, Final PnL=-450.6399622089021811219701425
2025-06-27 05:05:15,681 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:05:15,712 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:05:15,719 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:05:15,739 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:05:15,821 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197721695176000879088678070, Commission=0.10000000, Final PnL=-0.07802278304823999120911321930
2025-06-27 05:05:15,825 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465147796784000586059118714, Commission=0.10000000, Final PnL=-0.08534852203215999413940881286
2025-06-27 05:05:16,344 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.03000000000000000000000000, PnL USD=0.02197721695176000879088678070, Commission=0.10000000, Final PnL=-0.07802278304823999120911321930
2025-06-27 05:05:16,346 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.02000000000000000000000000, PnL USD=0.01465147796784000586059118714, Commission=0.10000000, Final PnL=-0.08534852203215999413940881286
2025-06-27 05:05:16,348 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:05:16,392 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197721695176000879088678070, Commission=0.10000000, Final PnL=-0.07802278304823999120911321930
2025-06-27 05:05:16,396 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465147796784000586059118714, Commission=0.10000000, Final PnL=-0.08534852203215999413940881286
2025-06-27 05:05:17,278 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:17,278 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:17,863 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:17,863 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:18,304 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:18,305 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:18,973 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:18,973 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:19,889 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:19,889 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:20,406 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:20,406 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:21,090 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465137063572297188401975005, Commission=0.10000000, Final PnL=-0.08534862936427702811598024995
2025-06-27 05:05:21,093 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007325685317861485942009875024, Commission=0.10000000, Final PnL=-0.09267431468213851405799012498
2025-06-27 05:05:22,114 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465222933669357792788172720, Commission=0.10000000, Final PnL=-0.08534777066330642207211827280
2025-06-27 05:05:22,116 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007326114668346788963940863602, Commission=0.10000000, Final PnL=-0.09267388533165321103605913640
2025-06-27 05:05:22,767 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465222933669357792788172720, Commission=0.10000000, Final PnL=-0.08534777066330642207211827280
2025-06-27 05:05:22,770 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007326114668346788963940863602, Commission=0.10000000, Final PnL=-0.09267388533165321103605913640
2025-06-27 05:05:23,307 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007326114668346788963940863602, Commission=0.10000000, Final PnL=-0.1073261146683467889639408636
2025-06-27 05:05:23,309 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01465222933669357792788172720, Commission=0.10000000, Final PnL=-0.1146522293366935779278817272
2025-06-27 05:05:23,893 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007324826767846940419859070333, Commission=0.10000000, Final PnL=-0.1073248267678469404198590703
2025-06-27 05:05:23,894 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464965353569388083971814067, Commission=0.10000000, Final PnL=-0.1146496535356938808397181407
2025-06-27 05:05:24,392 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007324826767846940419859070333, Commission=0.10000000, Final PnL=-0.1073248267678469404198590703
2025-06-27 05:05:24,393 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464965353569388083971814067, Commission=0.10000000, Final PnL=-0.1146496535356938808397181407
2025-06-27 05:05:24,946 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007324826767846940419859070333, Commission=0.10000000, Final PnL=-0.1073248267678469404198590703
2025-06-27 05:05:24,947 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464965353569388083971814067, Commission=0.10000000, Final PnL=-0.1146496535356938808397181407
2025-06-27 05:05:25,461 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007324826767846940419859070333, Commission=0.10000000, Final PnL=-0.1073248267678469404198590703
2025-06-27 05:05:25,462 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464965353569388083971814067, Commission=0.10000000, Final PnL=-0.1146496535356938808397181407
2025-06-27 05:05:26,084 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007325846318395932690124026578, Commission=0.10000000, Final PnL=-0.1073258463183959326901240266
2025-06-27 05:05:26,092 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01465169263679186538024805316, Commission=0.10000000, Final PnL=-0.1146516926367918653802480532
2025-06-27 05:05:26,416 - INFO - app.main - Application shutdown event triggered.
2025-06-27 05:05:26,416 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 05:05:26,416 - INFO - app.main - Cancelling 5 other background tasks...
2025-06-27 05:05:26,421 - INFO - app.main - Background task 'Task-6' cancelled successfully.
2025-06-27 05:05:26,421 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 05:05:28,143 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 05:05:28,143 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 05:05:28,144 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-27 05:05:28,152 - INFO - app.main - Background task 'Task-7' cancelled successfully.
2025-06-27 05:05:28,162 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-27 05:05:28,165 - INFO - app.main - Redis client connection closed.
2025-06-27 05:05:28,165 - INFO - app.main - Application shutdown event finished.
2025-06-27 05:05:45,005 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:05:45,012 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:05:45,024 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:05:45,367 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.9800000000000000000000000, PnL USD=-450.4648805576063969566904008, Commission=0.10000000, Final PnL=-450.5648805576063969566904008
2025-06-27 05:05:45,368 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:05:45,379 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:05:45,381 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:05:45,395 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:05:45,745 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.01000000000000000000000000, PnL USD=-0.007325363338021565869667135490, Commission=0.10000000, Final PnL=-0.1073253633380215658696671355
2025-06-27 05:05:45,746 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.02000000000000000000000000, PnL USD=-0.01465072667604313173933427098, Commission=0.10000000, Final PnL=-0.1146507266760431317393342710
2025-06-27 05:05:45,746 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:05:48,782 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:05:48,798 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:05:48,811 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:05:48,820 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:05:48,831 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:05:48,839 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:05:48,847 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:05:48,854 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:05:48,861 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:05:48,870 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:05:48,876 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:05:48,881 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:05:48,887 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:05:48,892 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:05:48,897 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:05:48,902 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:05:48,908 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:05:48,913 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:05:48,919 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:05:48,924 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:05:48,929 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:05:48,934 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:05:48,939 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:05:48,944 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:05:48,950 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:05:48,955 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:05:48,961 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:05:48,967 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:05:48,972 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:05:48,978 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:05:48,984 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:05:48,989 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:05:48,995 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:05:49,000 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:05:49,006 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:05:49,012 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:05:49,017 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:05:49,024 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:05:49,028 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:05:49,034 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:05:49,039 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:05:49,045 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:05:49,050 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:05:49,055 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:05:49,060 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:05:49,065 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:05:49,069 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:05:49,074 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:05:49,077 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:05:49,083 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:05:49,088 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:05:49,093 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:05:49,098 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:05:49,106 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:05:49,113 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:05:49,119 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:05:49,126 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:05:49,132 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:05:49,138 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:05:49,144 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:05:49,151 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:05:49,157 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:05:49,164 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:05:49,171 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:05:49,176 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:05:49,181 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:05:49,186 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:05:49,190 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:05:49,195 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:05:49,200 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:05:49,206 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:05:49,211 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:05:49,217 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:05:49,224 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:05:49,229 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:05:49,234 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:05:49,239 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:05:49,244 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:05:49,248 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:05:51,572 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:51,572 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:54,042 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:54,042 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:56,183 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:56,183 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:58,436 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:05:58,436 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:00,623 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:00,624 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:06,111 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:06:06,128 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:06:06,144 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:06:06,204 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:06:06,365 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:06:06,385 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:06:06,397 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:06:06,477 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:06:06,495 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:06:06,505 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:06:06,520 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:06:06,536 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:06:06,545 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:06:06,558 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:06:06,566 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:06:06,576 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:06:06,586 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:06:06,595 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:06:06,607 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:06:06,616 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:06:06,626 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:06:06,637 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:06:06,647 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:06:06,655 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:06:06,665 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:06:06,677 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:06:06,689 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:06:06,700 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:06:06,714 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:06:06,727 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:06:06,740 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:06:06,759 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:06:06,777 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:06:06,788 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:06:06,799 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:06:06,809 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:06:06,821 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:06:06,830 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:06:06,840 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:06:06,853 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:06:06,866 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:06:06,878 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:06:06,888 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:06:06,898 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:06:06,911 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:06:06,922 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:06:06,932 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:06:06,942 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:06:06,951 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:06:06,996 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:06:07,023 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:06:07,042 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:06:07,054 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:06:07,066 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:06:07,076 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:06:07,108 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:06:07,123 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:06:07,135 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:06:07,148 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:06:07,160 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:06:07,170 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:06:07,180 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:06:07,191 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:06:07,200 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:06:07,211 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:06:07,221 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:06:07,232 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:06:07,241 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:06:07,253 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:06:07,265 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:06:07,275 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:06:07,288 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:06:07,301 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:06:07,311 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:06:07,323 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:06:07,334 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:06:07,344 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:06:07,358 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:06:07,369 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:06:09,791 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:06:09,794 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007325416999362688721055446081, Commission=0.10000000, Final PnL=-0.1073254169993626887210554461
2025-06-27 05:06:12,259 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465094132298000146509413230, Commission=0.10000000, Final PnL=-0.08534905867701999853490586770
2025-06-27 05:06:12,261 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007325470661490000732547066149, Commission=0.10000000, Final PnL=-0.09267452933850999926745293385
2025-06-27 05:06:14,406 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197609001406469760900140647, Commission=0.10000000, Final PnL=-0.07802390998593530239099859353
2025-06-27 05:06:14,415 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465072667604313173933427098, Commission=0.10000000, Final PnL=-0.08534927332395686826066572902
2025-06-27 05:06:16,766 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:16,766 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:18,907 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:18,907 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:21,376 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:21,376 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:23,507 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02930188264596000293018826460, Commission=0.10000000, Final PnL=-0.07069811735403999706981173540
2025-06-27 05:06:23,509 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197641198447000219764119845, Commission=0.10000000, Final PnL=-0.07802358801552999780235880155
2025-06-27 05:06:25,963 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197592903239984470343483771, Commission=0.10000000, Final PnL=-0.07802407096760015529656516229
2025-06-27 05:06:25,965 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465061935493322980228989181, Commission=0.10000000, Final PnL=-0.08534938064506677019771010819
2025-06-27 05:06:28,275 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:28,276 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:30,380 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:30,380 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:32,731 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:32,732 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:35,105 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:35,105 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:37,181 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02930145335208626347866854196, Commission=0.10000000, Final PnL=-0.07069854664791373652133145804
2025-06-27 05:06:37,185 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197609001406469760900140647, Commission=0.10000000, Final PnL=-0.07802390998593530239099859353
2025-06-27 05:06:39,694 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:39,695 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:42,184 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:42,184 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:44,319 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:06:44,331 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:06:44,340 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:06:44,352 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:06:44,364 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:06:44,377 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:06:44,388 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:06:44,401 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:06:44,506 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:06:44,599 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:06:44,616 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:06:44,634 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:06:44,645 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:06:44,698 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:06:44,711 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:06:44,724 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:06:44,737 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:06:44,751 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:06:44,764 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:06:44,776 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:06:44,790 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:06:44,802 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:06:44,818 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:06:44,830 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:06:44,847 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:06:44,858 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:06:44,872 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:06:44,884 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:06:44,899 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:06:44,913 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:06:44,930 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:06:44,941 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:06:44,954 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:06:44,966 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:06:44,977 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:06:44,987 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:06:45,005 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:06:45,010 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:06:45,031 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:06:45,031 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:06:45,046 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:06:45,064 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:06:45,089 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:06:45,097 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:06:45,112 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:06:45,150 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:06:45,177 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:06:45,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:06:45,214 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:06:45,231 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:06:45,247 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:06:45,264 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:06:45,281 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:06:45,304 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:06:45,322 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:06:45,342 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:06:45,358 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:06:45,376 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:06:45,395 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:06:45,416 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:06:45,433 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:06:45,453 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:06:45,470 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:06:45,485 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:06:45,503 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:06:45,520 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:06:45,536 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:06:45,552 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:06:45,571 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:06:45,592 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:06:45,942 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5220300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.0700000000000000000000000, PnL USD=-450.6226143545460234027908141, Commission=0.10000000, Final PnL=-450.7226143545460234027908141
2025-06-27 05:06:45,969 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:06:45,975 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:06:46,007 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:06:46,040 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:06:46,041 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:06:46,054 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:06:46,059 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:06:46,085 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:06:46,091 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:06:46,100 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:06:46,116 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:06:46,141 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:06:46,156 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:06:46,168 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:06:46,182 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:06:46,197 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:06:46,856 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.03000000000000000000000000, PnL USD=0.02197592903239984470343483771, Commission=0.10000000, Final PnL=-0.07802407096760015529656516229
2025-06-27 05:06:46,858 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.02000000000000000000000000, PnL USD=0.01465061935493322980228989181, Commission=0.10000000, Final PnL=-0.08534938064506677019771010819
2025-06-27 05:06:46,860 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:06:48,705 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:48,705 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:50,927 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05127679212388472977130550713, Commission=0.10000000, Final PnL=-0.04872320787611527022869449287
2025-06-27 05:06:50,928 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04395153610618691123254757754, Commission=0.10000000, Final PnL=-0.05604846389381308876745242246
2025-06-27 05:06:53,220 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:53,220 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:55,775 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:06:55,777 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89224, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007325202358715159506281361023, Commission=0.10000000, Final PnL=-0.1073252023587151595062813610
2025-06-27 05:06:57,843 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:06:57,843 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:07:00,111 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:07:00,112 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:07:02,942 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05859947260474655728098447114, Commission=0.10000000, Final PnL=-0.04140052739525344271901552886
2025-06-27 05:07:02,943 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05127453852915323762086141225, Commission=0.10000000, Final PnL=-0.04872546147084676237913858775
2025-06-27 05:07:04,900 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:07:04,901 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:07:07,139 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02930123870986645960457978361, Commission=0.10000000, Final PnL=-0.07069876129013354039542021639
2025-06-27 05:07:07,140 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197592903239984470343483771, Commission=0.10000000, Final PnL=-0.07802407096760015529656516229
2025-06-27 05:07:09,320 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05127416294928985284315233554, Commission=0.10000000, Final PnL=-0.04872583705071014715684766446
2025-06-27 05:07:09,322 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04394928252796273100841628760, Commission=0.10000000, Final PnL=-0.05605071747203726899158371240
2025-06-27 05:07:11,503 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02929952168530848733894419174, Commission=0.10000000, Final PnL=-0.07070047831469151266105580826
2025-06-27 05:07:11,505 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197464126398136550420814380, Commission=0.10000000, Final PnL=-0.07802535873601863449579185620
2025-06-27 05:07:13,912 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:07:13,912 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:07:16,166 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05127416294928985284315233554, Commission=0.10000000, Final PnL=-0.04872583705071014715684766446
2025-06-27 05:07:16,169 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04394928252796273100841628760, Commission=0.10000000, Final PnL=-0.05605071747203726899158371240
2025-06-27 05:07:18,510 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007324880421327121834736047934, Commission=0.10000000, Final PnL=-0.09267511957867287816526395207
2025-06-27 05:07:18,512 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:07:20,759 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197480222677995898036917668, Commission=0.10000000, Final PnL=-0.07802519777322004101963082332
2025-06-27 05:07:20,760 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464986815118663932024611778, Commission=0.10000000, Final PnL=-0.08535013184881336067975388222
2025-06-27 05:07:23,222 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89224000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007324987730645551168701792424, Commission=0.10000000, Final PnL=-0.1073249877306455511687017924
2025-06-27 05:07:23,223 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89225, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01464997546129110233740358485, Commission=0.10000000, Final PnL=-0.1146499754612911023374035848
2025-06-27 05:07:25,885 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464997546129110233740358485, Commission=0.10000000, Final PnL=-0.08535002453870889766259641515
2025-06-27 05:07:26,391 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:07:27,555 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:07:29,870 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197496319193665350610537727, Commission=0.10000000, Final PnL=-0.07802503680806334649389462273
2025-06-27 05:07:32,226 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:07:34,786 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:07:36,832 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89228, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03662386557576379071658255386, Commission=0.10000000, Final PnL=-0.1366238655757637907165825539
2025-06-27 05:07:39,086 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:07:41,237 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:07:43,590 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01464965353569388083971814067, Commission=0.10000000, Final PnL=-0.08535034646430611916028185933
2025-06-27 05:07:45,004 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:07:45,010 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:07:45,020 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:07:45,374 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5220500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.0500000000000000000000000, PnL USD=-450.5524758174514784828500995, Commission=0.10000000, Final PnL=-450.6524758174514784828500995
2025-06-27 05:07:45,395 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:07:45,411 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:07:45,413 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:07:45,424 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:07:45,788 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007324880421327121834736047934, Commission=0.10000000, Final PnL=-0.09267511957867287816526395207
2025-06-27 05:07:46,091 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.01000000000000000000000000, PnL USD=0.007324880421327121834736047934, Commission=0.10000000, Final PnL=-0.09267511957867287816526395207
2025-06-27 05:07:46,093 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:07:48,005 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03662359731622278866719404647, Commission=0.10000000, Final PnL=-0.06337640268377721133280595353
2025-06-27 05:07:48,806 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:07:48,807 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:07:48,808 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:07:50,347 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:07:52,590 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197415838973367320031642788, Commission=0.10000000, Final PnL=-0.07802584161026632679968357212
2025-06-27 05:07:54,959 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:07:57,323 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:07:59,455 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03662198784150003662198784150, Commission=0.10000000, Final PnL=-0.06337801215849996337801215850
2025-06-27 05:08:01,800 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:08:03,399 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:08:03,401 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:08:03,402 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:08:04,184 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197287082881668766296545865, Commission=0.10000000, Final PnL=-0.07802712917118331233703454135
2025-06-27 05:08:06,284 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02929737568757278566772381364, Commission=0.10000000, Final PnL=-0.07070262431242721433227618636
2025-06-27 05:08:08,683 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197287082881668766296545865, Commission=0.10000000, Final PnL=-0.07802712917118331233703454135
2025-06-27 05:08:11,810 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:08:13,472 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007324290276272229220988486216, Commission=0.10000000, Final PnL=-0.09267570972372777077901151378
2025-06-27 05:08:15,728 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89223, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:08:18,309 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007324397568300007324397568300, Commission=0.10000000, Final PnL=-0.09267560243169999267560243170
2025-06-27 05:08:20,253 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03662225607746339605505057534, Commission=0.10000000, Final PnL=-0.06337774392253660394494942466
2025-06-27 05:08:22,402 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:08:24,660 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04394670729295607526606069040, Commission=0.10000000, Final PnL=-0.05605329270704392473393930960
2025-06-27 05:08:27,055 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03662225607746339605505057534, Commission=0.10000000, Final PnL=-0.06337774392253660394494942466
2025-06-27 05:08:29,313 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04394702918082737606937771007, Commission=0.10000000, Final PnL=-0.05605297081917262393062228993
2025-06-27 05:08:31,511 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89215, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05859775570595646186751047435, Commission=0.10000000, Final PnL=-0.04140224429404353813248952565
2025-06-27 05:08:34,173 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:08:36,428 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:08:38,796 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.100000000000000000000000, PnL USD=0.07324558512235674994689695079, Commission=0.10000000, Final PnL=-0.02675441487764325005310304921
2025-06-27 05:08:41,036 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89215, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05859646809788539995751756063, Commission=0.10000000, Final PnL=-0.04140353190211460004248243937
2025-06-27 05:08:43,271 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05127190958564972496282786555, Commission=0.10000000, Final PnL=-0.04872809041435027503717213445
2025-06-27 05:08:45,006 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:08:45,021 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:08:45,037 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:08:45,369 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5220600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.0400000000000000000000000, PnL USD=-450.4835904558137207061796980, Commission=0.10000000, Final PnL=-450.5835904558137207061796980
2025-06-27 05:08:45,380 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:08:45,396 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:08:45,398 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:08:45,409 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:08:45,761 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03662279256117837497344847539, Commission=0.10000000, Final PnL=-0.06337720743882162502655152461
2025-06-27 05:08:46,096 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8921800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.05000000000000000000000000, PnL USD=0.03662279256117837497344847539, Commission=0.10000000, Final PnL=-0.06337720743882162502655152461
2025-06-27 05:08:46,098 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:08:47,897 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05127190958564972496282786555, Commission=0.10000000, Final PnL=-0.04872809041435027503717213445
2025-06-27 05:08:50,154 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04394863869091654885989906463, Commission=0.10000000, Final PnL=-0.05605136130908345114010093537
2025-06-27 05:08:52,402 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:08:54,654 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:08:57,010 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:08:59,246 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05127341180606930700321557540, Commission=0.10000000, Final PnL=-0.04872658819393069299678442460
2025-06-27 05:09:00,608 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:09:00,609 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:09:00,610 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:09:01,518 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89218, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03662386557576379071658255386, Commission=0.10000000, Final PnL=-0.06337613442423620928341744614
2025-06-27 05:09:03,772 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89215, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05860161886972127605025088818, Commission=0.10000000, Final PnL=-0.04139838113027872394974911182
2025-06-27 05:09:06,437 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465051203539563707751585918, Commission=0.10000000, Final PnL=-0.08534948796460436292248414082
2025-06-27 05:09:08,683 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:09:10,940 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04395443390352001758177356141, Commission=0.10000000, Final PnL=-0.05604556609647998241822643859
2025-06-27 05:09:13,192 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05128017288744002051206915498, Commission=0.10000000, Final PnL=-0.04871982711255997948793084502
2025-06-27 05:09:15,507 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04394863869091654885989906463, Commission=0.10000000, Final PnL=-0.05605136130908345114010093537
2025-06-27 05:09:17,649 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8922, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02197721695176000879088678070, Commission=0.10000000, Final PnL=-0.07802278304823999120911321930
2025-06-27 05:09:19,908 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04395475590458887651643907871, Commission=0.10000000, Final PnL=-0.05604524409541112348356092129
2025-06-27 05:09:22,203 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.070000000000000000000000, PnL USD=0.05128054855535368926917892516, Commission=0.10000000, Final PnL=-0.04871945144464631073082107484
2025-06-27 05:09:24,659 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89215, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05860634120611850202191877161, Commission=0.10000000, Final PnL=-0.04139365879388149797808122839
2025-06-27 05:09:26,911 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89214, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.090000000000000000000000, PnL USD=0.06593213385688331477465861806, Commission=0.10000000, Final PnL=-0.03406786614311668522534138194
2025-06-27 05:09:29,069 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8921, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09523530445994256578561800387, Commission=0.10000000, Final PnL=-0.00476469554005743421438199613
2025-06-27 05:09:31,519 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89209, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1025610971107073785383578503, Commission=0.10000000, Final PnL=0.0025610971107073785383578503
2025-06-27 05:09:34,077 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89208, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.150000000000000000000000, PnL USD=0.1098868897614721912910976968, Commission=0.10000000, Final PnL=0.0098868897614721912910976968
2025-06-27 05:09:35,821 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89209, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1025610971107073785383578503, Commission=0.10000000, Final PnL=0.0025610971107073785383578503
2025-06-27 05:09:35,921 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 05:09:37,569 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 05:10:46,536 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:10:46,541 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:10:46,541 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:10:47,150 - INFO - app.main - Application startup event triggered.
2025-06-27 05:10:47,187 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 05:10:47,187 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 05:10:47,193 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 05:10:47,206 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 05:10:47,206 - INFO - app.main - Firebase events processor background task started
2025-06-27 05:10:47,206 - INFO - app.main - Redis publisher background task started
2025-06-27 05:10:47,206 - INFO - app.main - Pending order checker background task started
2025-06-27 05:10:47,206 - INFO - app.main - SL/TP checker background task started
2025-06-27 05:10:47,206 - INFO - app.main - Redis cleanup background task started
2025-06-27 05:10:47,206 - INFO - app.main - Generating initial service account token...
2025-06-27 05:10:47,206 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 05:10:48,318 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 05:10:48,323 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 05:10:48,323 - INFO - app.main - Application startup event finished.
2025-06-27 05:10:48,324 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:10:48,325 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 05:10:49,033 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:10:57,953 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:10:57,984 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:10:58,016 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:10:58,056 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:10:58,096 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:10:58,149 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:10:58,209 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:10:58,253 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:10:58,298 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:10:58,358 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:10:58,421 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:10:58,478 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:10:58,549 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:10:58,605 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:10:58,655 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:10:58,705 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:10:58,761 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:10:58,812 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:10:58,887 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:10:58,948 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:10:59,014 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:10:59,046 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:10:59,103 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:10:59,133 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:10:59,160 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:10:59,192 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:10:59,228 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:10:59,260 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:10:59,287 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:10:59,324 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:10:59,357 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:10:59,392 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:10:59,417 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:10:59,453 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:10:59,483 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:10:59,506 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:10:59,532 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:10:59,578 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:10:59,659 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:10:59,723 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:10:59,752 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:10:59,779 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:10:59,813 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:10:59,839 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:10:59,877 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:10:59,996 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:11:00,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:11:00,217 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:11:00,231 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:11:00,293 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:11:00,315 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:11:00,337 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:11:00,359 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:11:00,379 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:11:00,412 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:11:00,439 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:11:00,470 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:11:00,505 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:11:00,532 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:11:00,562 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:11:00,592 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:11:00,615 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:11:00,645 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:11:00,668 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:11:00,695 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:11:00,718 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:11:00,742 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:11:00,775 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:11:00,803 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:11:00,823 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:11:00,848 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:11:00,883 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:11:00,913 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:11:00,941 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:11:00,969 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:11:00,996 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:11:01,025 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:11:01,072 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:11:01,120 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:11:02,759 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52212, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.980000000000000000000000, PnL USD=-450.3071014873469183522848100, Commission=0.10000000, Final PnL=-450.4071014873469183522848100
2025-06-27 05:11:05,118 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.930000000000000000000000, PnL USD=-450.2727181745396317053642914, Commission=0.10000000, Final PnL=-450.3727181745396317053642914
2025-06-27 05:11:07,162 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.940000000000000000000000, PnL USD=-450.2964946080516426051492481, Commission=0.10000000, Final PnL=-450.3964946080516426051492481
2025-06-27 05:11:09,671 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.930000000000000000000000, PnL USD=-450.2783511603177581785200475, Commission=0.10000000, Final PnL=-450.3783511603177581785200475
2025-06-27 05:11:12,594 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.040000000000000000000000, PnL USD=-450.4779540563535358590661128, Commission=0.10000000, Final PnL=-450.5779540563535358590661128
2025-06-27 05:11:14,534 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.930000000000000000000000, PnL USD=-450.3572277624153851928779670, Commission=0.10000000, Final PnL=-450.4572277624153851928779670
2025-06-27 05:11:16,784 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.040000000000000000000000, PnL USD=-450.4948636778819083845297231, Commission=0.10000000, Final PnL=-450.5948636778819083845297231
2025-06-27 05:11:19,203 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:11:21,182 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.930000000000000000000000, PnL USD=-450.3459579845601391339163945, Commission=0.10000000, Final PnL=-450.4459579845601391339163945
2025-06-27 05:11:25,639 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52208, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.020000000000000000000000, PnL USD=-450.4472943384422896465436347, Commission=0.10000000, Final PnL=-450.5472943384422896465436347
2025-06-27 05:11:26,409 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.000000000000000000000000, PnL USD=-450.4222708789490147012824523, Commission=0.10000000, Final PnL=-450.5222708789490147012824523
2025-06-27 05:11:28,262 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.900000000000000000000000, PnL USD=-450.2070276829161506611125705, Commission=0.10000000, Final PnL=-450.3070276829161506611125705
2025-06-27 05:11:30,280 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.3196107129007643136813400, Commission=0.10000000, Final PnL=-450.4196107129007643136813400
2025-06-27 05:11:32,656 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:11:34,911 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:11:37,049 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:11:39,783 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52212, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.980000000000000000000000, PnL USD=-450.3521699423266986100859470, Commission=0.10000000, Final PnL=-450.4521699423266986100859470
2025-06-27 05:11:41,973 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:11:44,229 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.040000000000000000000000, PnL USD=-450.4215978182000150123852178, Commission=0.10000000, Final PnL=-450.5215978182000150123852178
2025-06-27 05:11:46,605 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52212, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.980000000000000000000000, PnL USD=-450.3634384656766461072675182, Commission=0.10000000, Final PnL=-450.4634384656766461072675182
2025-06-27 05:11:47,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:11:47,351 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:11:47,454 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:11:48,436 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.9800000000000000000000000, PnL USD=-450.3634384656766461072675182, Commission=0.10000000, Final PnL=-450.4634384656766461072675182
2025-06-27 05:11:48,446 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:11:48,493 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:11:48,528 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:11:48,589 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:11:49,247 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.3759492562335013949531471, Commission=0.10000000, Final PnL=-450.4759492562335013949531471
2025-06-27 05:11:49,858 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8921200000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.11000000000000000000000000, PnL USD=0.08057368463459834018209652727, Commission=0.10000000, Final PnL=-0.01942631536540165981790347273
2025-06-27 05:11:49,858 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:11:51,089 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:11:53,342 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.000000000000000000000000, PnL USD=-450.4110000375342500031278542, Commission=0.10000000, Final PnL=-450.5110000375342500031278542
2025-06-27 05:11:53,840 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 9, Amount: 1555
2025-06-27 05:11:53,899 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 21, User ID: 9, Amount: 1555
2025-06-27 05:11:55,495 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.3872186565576949542719163, Commission=0.10000000, Final PnL=-450.4872186565576949542719163
2025-06-27 05:11:55,907 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 9
2025-06-27 05:11:55,916 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 9. Data found: False, User ID match: False
2025-06-27 05:11:55,934 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:11:57,863 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.000000000000000000000000, PnL USD=-450.4166353877336536296073868, Commission=0.10000000, Final PnL=-450.5166353877336536296073868
2025-06-27 05:11:59,901 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.3928535682113902512261035, Commission=0.10000000, Final PnL=-450.4928535682113902512261035
2025-06-27 05:12:02,840 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.4041238145284388058954533, Commission=0.10000000, Final PnL=-450.5041238145284388058954533
2025-06-27 05:12:04,658 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.000000000000000000000000, PnL USD=-450.4222708789490147012824523, Commission=0.10000000, Final PnL=-450.5222708789490147012824523
2025-06-27 05:12:07,204 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:12:09,126 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.000000000000000000000000, PnL USD=-450.3715565341406660494908299, Commission=0.10000000, Final PnL=-450.4715565341406660494908299
2025-06-27 05:12:11,344 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52209, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.010000000000000000000000, PnL USD=-450.4291469609388684533193204, Commission=0.10000000, Final PnL=-450.5291469609388684533193204
2025-06-27 05:12:13,976 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.000000000000000000000000, PnL USD=-450.4053648283455109598638775, Commission=0.10000000, Final PnL=-450.5053648283455109598638775
2025-06-27 05:12:16,002 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.3984886208665407184055451, Commission=0.10000000, Final PnL=-450.4984886208665407184055451
2025-06-27 05:12:18,327 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.000000000000000000000000, PnL USD=-450.4110000375342500031278542, Commission=0.10000000, Final PnL=-450.5110000375342500031278542
2025-06-27 05:12:20,940 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.3928535682113902512261035, Commission=0.10000000, Final PnL=-450.4928535682113902512261035
2025-06-27 05:12:22,967 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:12:25,106 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:12:27,638 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.000000000000000000000000, PnL USD=-450.4110000375342500031278542, Commission=0.10000000, Final PnL=-450.5110000375342500031278542
2025-06-27 05:12:29,824 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52212, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.980000000000000000000000, PnL USD=-450.3916122413232239821835198, Commission=0.10000000, Final PnL=-450.4916122413232239821835198
2025-06-27 05:12:32,192 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.4323018981243978428698340, Commission=0.10000000, Final PnL=-450.5323018981243978428698340
2025-06-27 05:12:34,550 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:12:36,769 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.000000000000000000000000, PnL USD=-450.4391781987437751808012812, Commission=0.10000000, Final PnL=-450.5391781987437751808012812
2025-06-27 05:12:38,879 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:12:41,612 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52207, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.030000000000000000000000, PnL USD=-450.4428986087478730857771995, Commission=0.10000000, Final PnL=-450.5428986087478730857771995
2025-06-27 05:12:43,417 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52208, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.020000000000000000000000, PnL USD=-450.5318483293705418595920410, Commission=0.10000000, Final PnL=-450.6318483293705418595920410
2025-06-27 05:12:45,682 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.4943060943561506695031911, Commission=0.10000000, Final PnL=-450.5943060943561506695031911
2025-06-27 05:12:47,205 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:12:47,359 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:12:47,597 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:12:48,294 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.050000000000000000000000, PnL USD=-450.5975846317502033664977160, Commission=0.10000000, Final PnL=-450.6975846317502033664977160
2025-06-27 05:12:48,705 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5220500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.0500000000000000000000000, PnL USD=-450.5975846317502033664977160, Commission=0.10000000, Final PnL=-450.6975846317502033664977160
2025-06-27 05:12:48,707 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:12:48,759 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:12:48,767 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:12:48,804 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:12:49,475 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8921700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.06000000000000000000000000, PnL USD=0.04395604395604395604395604396, Commission=0.10000000, Final PnL=-0.05604395604395604395604395604
2025-06-27 05:12:49,482 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:12:50,232 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:12:52,923 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.5281337605126151381657990, Commission=0.10000000, Final PnL=-450.6281337605126151381657990
2025-06-27 05:12:55,054 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52203, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.070000000000000000000000, PnL USD=-450.4929436492843559203282955, Commission=0.10000000, Final PnL=-450.5929436492843559203282955
2025-06-27 05:12:57,523 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.060000000000000000000000, PnL USD=-450.6552185939396973603514525, Commission=0.10000000, Final PnL=-450.7552185939396973603514525
2025-06-27 05:12:59,488 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.5676057924577894038574665, Commission=0.10000000, Final PnL=-450.6676057924577894038574665
2025-06-27 05:13:01,614 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52203, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.070000000000000000000000, PnL USD=-450.6677347084371127827077362, Commission=0.10000000, Final PnL=-450.7677347084371127827077362
2025-06-27 05:13:04,056 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52202, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.080000000000000000000000, PnL USD=-450.6858916591569039751677180, Commission=0.10000000, Final PnL=-450.7858916591569039751677180
2025-06-27 05:13:06,156 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.000000000000000000000000, PnL USD=-450.4786335481449039604579866, Commission=0.10000000, Final PnL=-450.5786335481449039604579866
2025-06-27 05:13:08,510 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52202, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.080000000000000000000000, PnL USD=-450.7028150150826730752381310, Commission=0.10000000, Final PnL=-450.8028150150826730752381310
2025-06-27 05:13:10,971 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52201, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.090000000000000000000000, PnL USD=-450.7040490643970210901808624, Commission=0.10000000, Final PnL=-450.8040490643970210901808624
2025-06-27 05:13:12,994 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:13:15,424 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.522, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.100000000000000000000000, PnL USD=-450.7334902117859109798227607, Commission=0.10000000, Final PnL=-450.8334902117859109798227607
2025-06-27 05:13:18,051 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.522, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.100000000000000000000000, PnL USD=-450.7222069241745312539114326, Commission=0.10000000, Final PnL=-450.8222069241745312539114326
2025-06-27 05:13:19,878 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52203, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.070000000000000000000000, PnL USD=-450.6790162087740158958633206, Commission=0.10000000, Final PnL=-450.7790162087740158958633206
2025-06-27 05:13:22,431 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52201, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.090000000000000000000000, PnL USD=-450.7040490643970210901808624, Commission=0.10000000, Final PnL=-450.8040490643970210901808624
2025-06-27 05:13:24,585 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.060000000000000000000000, PnL USD=-450.6890638494949368514601144, Commission=0.10000000, Final PnL=-450.7890638494949368514601144
2025-06-27 05:13:26,692 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.7585240074100035047313874, Commission=0.10000000, Final PnL=-450.8585240074100035047313874
2025-06-27 05:13:28,964 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.7460071095979572422770740, Commission=0.10000000, Final PnL=-450.8460071095979572422770740
2025-06-27 05:13:31,555 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.7698084866691701088997371, Commission=0.10000000, Final PnL=-450.8698084866691701088997371
2025-06-27 05:13:33,501 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:13:36,056 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:13:38,721 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52196, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.140000000000000000000000, PnL USD=-450.7835578030340960296400140, Commission=0.10000000, Final PnL=-450.8835578030340960296400140
2025-06-27 05:13:39,949 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 9
2025-06-27 05:13:39,966 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 9. Data found: False, User ID match: False
2025-06-27 05:13:39,969 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:13:40,704 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52194, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.160000000000000000000000, PnL USD=-450.8142343943623186591731234, Commission=0.10000000, Final PnL=-450.9142343943623186591731234
2025-06-27 05:13:42,770 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52195, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.150000000000000000000000, PnL USD=-450.7960747008461422920943273, Commission=0.10000000, Final PnL=-450.8960747008461422920943273
2025-06-27 05:13:45,985 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52194, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.160000000000000000000000, PnL USD=-450.8142343943623186591731234, Commission=0.10000000, Final PnL=-450.9142343943623186591731234
2025-06-27 05:13:47,234 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:13:47,326 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:13:47,772 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:13:47,858 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:13:48,366 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5219400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.1600000000000000000000000, PnL USD=-450.8142343943623186591731234, Commission=0.10000000, Final PnL=-450.9142343943623186591731234
2025-06-27 05:13:48,368 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:13:48,380 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:13:48,385 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:13:48,403 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:13:48,949 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8920900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.14000000000000000000000000, PnL USD=0.1025753745832875407553943657, Commission=0.10000000, Final PnL=0.0025753745832875407553943657
2025-06-27 05:13:48,951 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:13:49,720 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52193, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.170000000000000000000000, PnL USD=-450.8380377774161649288387638, Commission=0.10000000, Final PnL=-450.9380377774161649288387638
2025-06-27 05:13:51,568 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:13:54,020 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:13:54,337 - INFO - app.api.v1.endpoints.money_requests - Processing status update for money request ID 21: current status=0, new status=1
2025-06-27 05:13:54,397 - INFO - app.crud.wallet - Wallet record created successfully for user 9 with transaction ID 9391942766.
2025-06-27 05:13:54,426 - INFO - app.api.v1.endpoints.money_requests - Committing transaction to update money request ID 21 to status 1
2025-06-27 05:13:54,456 - INFO - app.api.v1.endpoints.money_requests - Money request ID 21 state after commit: status=1, expected status=1
2025-06-27 05:13:54,456 - INFO - app.api.v1.endpoints.money_requests - Admin admin@example.com (ID: 10) successfully updated money request ID 21 to status 1.
2025-06-27 05:13:56,240 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.7585240074100035047313874, Commission=0.10000000, Final PnL=-450.8585240074100035047313874
2025-06-27 05:13:57,694 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 9
2025-06-27 05:13:57,695 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 9. Data found: False, User ID match: False
2025-06-27 05:13:57,696 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:13:58,677 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52195, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.150000000000000000000000, PnL USD=-450.8073601201652271873826511, Commission=0.10000000, Final PnL=-450.9073601201652271873826511
2025-06-27 05:14:00,704 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52197, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.130000000000000000000000, PnL USD=-450.7936110554776687362307230, Commission=0.10000000, Final PnL=-450.8936110554776687362307230
2025-06-27 05:14:02,872 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:14:05,339 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.7867362649742761650831800, Commission=0.10000000, Final PnL=-450.8867362649742761650831800
2025-06-27 05:14:07,586 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52195, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.150000000000000000000000, PnL USD=-450.8017173398755804784018225, Commission=0.10000000, Final PnL=-450.9017173398755804784018225
2025-06-27 05:14:09,850 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52196, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.140000000000000000000000, PnL USD=-450.8399889837510327733406775, Commission=0.10000000, Final PnL=-450.9399889837510327733406775
2025-06-27 05:14:12,045 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52194, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.160000000000000000000000, PnL USD=-450.8480941353195218126056206, Commission=0.10000000, Final PnL=-450.9480941353195218126056206
2025-06-27 05:14:14,468 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52195, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.150000000000000000000000, PnL USD=-450.8355761407022594980284158, Commission=0.10000000, Final PnL=-450.9355761407022594980284158
2025-06-27 05:14:16,819 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.7641661764153659360879198, Commission=0.10000000, Final PnL=-450.8641661764153659360879198
2025-06-27 05:14:19,075 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.7516491219286277553166189, Commission=0.10000000, Final PnL=-450.8516491219286277553166189
2025-06-27 05:14:21,178 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52197, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.130000000000000000000000, PnL USD=-450.7823256978345224683940418, Commission=0.10000000, Final PnL=-450.8823256978345224683940418
2025-06-27 05:14:23,463 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52196, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.140000000000000000000000, PnL USD=-450.8061285800120168235529742, Commission=0.10000000, Final PnL=-450.9061285800120168235529742
2025-06-27 05:14:23,836 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 9
2025-06-27 05:14:23,839 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 9. Data found: False, User ID match: False
2025-06-27 05:14:23,839 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:14:25,813 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52196, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.140000000000000000000000, PnL USD=-450.8117716274237360271383329, Commission=0.10000000, Final PnL=-450.9117716274237360271383329
2025-06-27 05:14:28,169 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52196, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.140000000000000000000000, PnL USD=-450.8117716274237360271383329, Commission=0.10000000, Final PnL=-450.9117716274237360271383329
2025-06-27 05:14:30,627 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:14:32,593 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:14:34,926 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52195, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.150000000000000000000000, PnL USD=-450.8299326540319955937210525, Commission=0.10000000, Final PnL=-450.9299326540319955937210525
2025-06-27 05:14:37,180 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:14:39,636 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:14:41,688 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:14:41,703 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:14:41,721 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:14:41,738 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:14:41,756 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:14:41,772 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:14:41,785 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:14:41,798 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:14:41,828 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:14:41,850 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:14:41,866 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:14:41,878 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:14:41,888 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:14:41,896 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:14:41,905 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:14:41,914 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:14:41,924 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:14:41,934 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:14:41,941 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:14:41,949 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:14:41,957 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:14:41,965 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:14:41,972 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:14:41,980 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:14:41,990 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:14:41,996 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:14:42,006 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:14:42,013 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:14:42,022 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:14:42,030 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:14:42,041 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:14:42,048 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:14:42,055 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:14:42,065 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:14:42,074 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:14:42,081 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:14:42,090 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:14:42,098 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:14:42,105 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:14:42,113 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:14:42,122 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:14:42,129 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:14:42,137 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:14:42,146 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:14:42,153 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:14:42,162 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:14:42,170 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:14:42,177 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:14:42,186 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:14:42,196 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:14:42,205 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:14:42,216 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:14:42,224 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:14:42,234 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:14:42,242 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:14:42,250 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:14:42,259 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:14:42,270 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:14:42,278 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:14:42,285 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:14:42,294 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:14:42,302 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:14:42,312 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:14:42,326 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:14:42,333 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:14:42,341 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:14:42,349 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:14:42,360 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:14:42,370 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:14:42,379 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:14:42,388 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:14:42,395 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:14:42,403 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:14:42,411 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:14:42,419 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:14:42,430 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:14:42,442 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:14:42,452 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:14:42,460 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:14:44,839 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.7685760064089725615862207, Commission=0.10000000, Final PnL=-450.8685760064089725615862207
2025-06-27 05:14:46,552 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52195, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.150000000000000000000000, PnL USD=-450.8186461045463649108752253, Commission=0.10000000, Final PnL=-450.9186461045463649108752253
2025-06-27 05:14:47,201 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:14:47,212 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:14:47,230 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:14:47,668 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5219500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.1500000000000000000000000, PnL USD=-450.8186461045463649108752253, Commission=0.10000000, Final PnL=-450.9186461045463649108752253
2025-06-27 05:14:47,672 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:14:47,687 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:14:47,690 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:14:47,717 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:14:48,140 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8921700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.06000000000000000000000000, PnL USD=0.04395829822774794311796209329, Commission=0.10000000, Final PnL=-0.05604170177225205688203790671
2025-06-27 05:14:48,144 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:14:48,655 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52196, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.140000000000000000000000, PnL USD=-450.8117716274237360271383329, Commission=0.10000000, Final PnL=-450.9117716274237360271383329
2025-06-27 05:14:51,120 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.7742185837495462340556035, Commission=0.10000000, Final PnL=-450.8742185837495462340556035
2025-06-27 05:14:53,467 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:14:55,512 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.7698084866691701088997371, Commission=0.10000000, Final PnL=-450.8698084866691701088997371
2025-06-27 05:14:58,069 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.7742185837495462340556035, Commission=0.10000000, Final PnL=-450.8742185837495462340556035
2025-06-27 05:15:00,889 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.522, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.100000000000000000000000, PnL USD=-450.7165654922085236873396333, Commission=0.10000000, Final PnL=-450.8165654922085236873396333
2025-06-27 05:15:02,366 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52195, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.150000000000000000000000, PnL USD=-450.8073601201652271873826511, Commission=0.10000000, Final PnL=-450.9073601201652271873826511
2025-06-27 05:15:04,606 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.7698084866691701088997371, Commission=0.10000000, Final PnL=-450.8698084866691701088997371
2025-06-27 05:15:06,925 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:15:09,546 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:15:11,547 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:15:13,723 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52197, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.130000000000000000000000, PnL USD=-450.7936110554776687362307230, Commission=0.10000000, Final PnL=-450.8936110554776687362307230
2025-06-27 05:15:16,036 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.7754509381767201992764961, Commission=0.10000000, Final PnL=-450.8754509381767201992764961
2025-06-27 05:15:18,340 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52197, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.130000000000000000000000, PnL USD=-450.7879683060246091451889497, Commission=0.10000000, Final PnL=-450.8879683060246091451889497
2025-06-27 05:15:20,805 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:15:22,959 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52197, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.130000000000000000000000, PnL USD=-450.7597566775978171076676596, Commission=0.10000000, Final PnL=-450.8597566775978171076676596
2025-06-27 05:15:25,207 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52196, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.140000000000000000000000, PnL USD=-450.7779154619303318188076552, Commission=0.10000000, Final PnL=-450.8779154619303318188076552
2025-06-27 05:15:27,477 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52197, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.130000000000000000000000, PnL USD=-450.7484730149193952137779113, Commission=0.10000000, Final PnL=-450.8484730149193952137779113
2025-06-27 05:15:29,816 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:15:32,387 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.7359567437668969660558726, Commission=0.10000000, Final PnL=-450.8359567437668969660558726
2025-06-27 05:15:33,383 - INFO - app.api.v1.endpoints.users - Received withdrawal request - User ID: 9, Amount: 335
2025-06-27 05:15:33,403 - INFO - app.api.v1.endpoints.users - Withdrawal request created successfully - Money Request ID: 22, User ID: 9, Amount: 335
2025-06-27 05:15:34,526 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.7572912755038177494054325, Commission=0.10000000, Final PnL=-450.8572912755038177494054325
2025-06-27 05:15:36,879 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:15:39,133 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52197, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.130000000000000000000000, PnL USD=-450.7259073842302878598247810, Commission=0.10000000, Final PnL=-450.8259073842302878598247810
2025-06-27 05:15:41,386 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.7403652385065024470228931, Commission=0.10000000, Final PnL=-450.8403652385065024470228931
2025-06-27 05:15:43,518 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.7415983478315288816571750, Commission=0.10000000, Final PnL=-450.8415983478315288816571750
2025-06-27 05:15:45,520 - INFO - app.api.v1.endpoints.money_requests - Processing status update for money request ID 22: current status=0, new status=2
2025-06-27 05:15:45,558 - INFO - app.crud.wallet - Wallet record created successfully for user 9 with transaction ID 2942218911.
2025-06-27 05:15:45,567 - INFO - app.api.v1.endpoints.money_requests - Committing transaction to update money request ID 22 to status 2
2025-06-27 05:15:45,586 - INFO - app.api.v1.endpoints.money_requests - Money request ID 22 state after commit: status=2, expected status=2
2025-06-27 05:15:45,587 - INFO - app.api.v1.endpoints.money_requests - Admin admin@example.com (ID: 10) successfully updated money request ID 22 to status 2.
2025-06-27 05:15:45,990 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52196, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.140000000000000000000000, PnL USD=-450.7779154619303318188076552, Commission=0.10000000, Final PnL=-450.8779154619303318188076552
2025-06-27 05:15:47,204 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:15:47,222 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:15:47,254 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:15:47,735 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5219600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.1400000000000000000000000, PnL USD=-450.7722732620722457255864020, Commission=0.10000000, Final PnL=-450.8722732620722457255864020
2025-06-27 05:15:47,745 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:15:47,805 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:15:47,813 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:15:47,883 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:15:48,358 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.7347235086489598718301750, Commission=0.10000000, Final PnL=-450.8347235086489598718301750
2025-06-27 05:15:48,758 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8921000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.13000000000000000000000000, PnL USD=0.09524437508700207339678074012, Commission=0.10000000, Final PnL=-0.00475562491299792660321925988
2025-06-27 05:15:48,760 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:15:49,048 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 9
2025-06-27 05:15:49,051 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 9. Data found: False, User ID match: False
2025-06-27 05:15:49,052 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:15:50,299 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:15:52,677 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.7190327788833402170239928, Commission=0.10000000, Final PnL=-450.8190327788833402170239928
2025-06-27 05:15:55,107 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.7303152809241898944891548, Commission=0.10000000, Final PnL=-450.8303152809241898944891548
2025-06-27 05:15:57,258 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52197, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.130000000000000000000000, PnL USD=-450.7484730149193952137779113, Commission=0.10000000, Final PnL=-450.8484730149193952137779113
2025-06-27 05:16:00,043 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:16:01,770 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.7008760951188986232790989, Commission=0.10000000, Final PnL=-450.8008760951188986232790989
2025-06-27 05:16:04,134 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.522, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.100000000000000000000000, PnL USD=-450.6714391199329186638799544, Commission=0.10000000, Final PnL=-450.7714391199329186638799544
2025-06-27 05:16:06,375 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.6783139767721265518622347, Commission=0.10000000, Final PnL=-450.7783139767721265518622347
2025-06-27 05:16:08,904 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.522, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.100000000000000000000000, PnL USD=-450.6488793222120715331572954, Commission=0.10000000, Final PnL=-450.7488793222120715331572954
2025-06-27 05:16:10,913 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52201, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.090000000000000000000000, PnL USD=-450.6363647740498329307820341, Commission=0.10000000, Final PnL=-450.7363647740498329307820341
2025-06-27 05:16:13,196 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.6670337646734913523389983, Commission=0.10000000, Final PnL=-450.7670337646734913523389983
2025-06-27 05:16:15,562 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.522, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.100000000000000000000000, PnL USD=-450.7052830519293590497765874, Commission=0.10000000, Final PnL=-450.8052830519293590497765874
2025-06-27 05:16:17,793 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.522, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.100000000000000000000000, PnL USD=-450.6770794222923080773948086, Commission=0.10000000, Final PnL=-450.7770794222923080773948086
2025-06-27 05:16:20,077 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52201, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.090000000000000000000000, PnL USD=-450.6758448060075093867334168, Commission=0.10000000, Final PnL=-450.7758448060075093867334168
2025-06-27 05:16:22,252 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:16:24,706 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:16:26,878 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.522, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.100000000000000000000000, PnL USD=-450.6883604505632040050062578, Commission=0.10000000, Final PnL=-450.7883604505632040050062578
2025-06-27 05:16:29,406 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.6952353537502659541182213, Commission=0.10000000, Final PnL=-450.7952353537502659541182213
2025-06-27 05:16:31,432 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52196, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.140000000000000000000000, PnL USD=-450.7440643812813677267550282, Commission=0.10000000, Final PnL=-450.8440643812813677267550282
2025-06-27 05:16:33,666 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52197, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.130000000000000000000000, PnL USD=-450.7315485800823539718895105, Commission=0.10000000, Final PnL=-450.8315485800823539718895105
2025-06-27 05:16:35,965 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.7077508416665623709340309, Commission=0.10000000, Final PnL=-450.8077508416665623709340309
2025-06-27 05:16:38,258 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.6952353537502659541182213, Commission=0.10000000, Final PnL=-450.7952353537502659541182213
2025-06-27 05:16:40,602 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52202, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.080000000000000000000000, PnL USD=-450.6238502258875943284067729, Commission=0.10000000, Final PnL=-450.7238502258875943284067729
2025-06-27 05:16:42,930 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:16:45,159 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52203, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.070000000000000000000000, PnL USD=-450.6226143545460234027908141, Commission=0.10000000, Final PnL=-450.7226143545460234027908141
2025-06-27 05:16:47,464 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:16:47,466 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52204, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.060000000000000000000000, PnL USD=-450.6157388866639967961553865, Commission=0.10000000, Final PnL=-450.7157388866639967961553865
2025-06-27 05:16:47,473 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:16:47,492 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:16:47,864 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5220400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.0600000000000000000000000, PnL USD=-450.6157388866639967961553865, Commission=0.10000000, Final PnL=-450.7157388866639967961553865
2025-06-27 05:16:47,868 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:16:47,880 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:16:47,883 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:16:47,893 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:16:48,252 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8920900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.14000000000000000000000000, PnL USD=0.1025723684692539325513411337, Commission=0.10000000, Final PnL=0.0025723684692539325513411337
2025-06-27 05:16:48,253 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:16:49,878 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:16:51,976 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.6557541172348200430495069, Commission=0.10000000, Final PnL=-450.7557541172348200430495069
2025-06-27 05:16:54,304 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52199, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.110000000000000000000000, PnL USD=-450.6557541172348200430495069, Commission=0.10000000, Final PnL=-450.7557541172348200430495069
2025-06-27 05:16:58,490 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.040000000000000000000000, PnL USD=-450.5625148606539939180818181, Commission=0.10000000, Final PnL=-450.6625148606539939180818181
2025-06-27 05:17:00,631 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:17:03,524 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52198, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.120000000000000000000000, PnL USD=-450.6626287401919683640140660, Commission=0.10000000, Final PnL=-450.7626287401919683640140660
2025-06-27 05:17:05,406 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.040000000000000000000000, PnL USD=-450.5625148606539939180818181, Commission=0.10000000, Final PnL=-450.6625148606539939180818181
2025-06-27 05:17:07,500 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52203, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.070000000000000000000000, PnL USD=-450.6000575654807343353064110, Commission=0.10000000, Final PnL=-450.7000575654807343353064110
2025-06-27 05:17:07,977 - INFO - app.main - Application shutdown event triggered.
2025-06-27 05:17:07,981 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 05:17:07,981 - INFO - app.main - Cancelling 5 other background tasks...
2025-06-27 05:17:07,999 - INFO - app.main - Background task 'Task-6' cancelled successfully.
2025-06-27 05:17:07,999 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 05:17:09,936 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 05:17:09,936 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 05:17:09,938 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-27 05:17:09,941 - INFO - app.main - Background task 'Task-7' cancelled successfully.
2025-06-27 05:17:09,947 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-27 05:17:09,951 - INFO - app.main - Redis client connection closed.
2025-06-27 05:17:09,952 - INFO - app.main - Application shutdown event finished.
2025-06-27 05:17:19,289 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:17:19,299 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:17:19,299 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:17:20,124 - INFO - app.main - Application startup event triggered.
2025-06-27 05:17:20,158 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 05:17:20,158 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 05:17:20,167 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 05:17:20,175 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 05:17:20,175 - INFO - app.main - Firebase events processor background task started
2025-06-27 05:17:20,175 - INFO - app.main - Redis publisher background task started
2025-06-27 05:17:20,175 - INFO - app.main - Pending order checker background task started
2025-06-27 05:17:20,175 - INFO - app.main - SL/TP checker background task started
2025-06-27 05:17:20,175 - INFO - app.main - Redis cleanup background task started
2025-06-27 05:17:20,175 - INFO - app.main - Generating initial service account token...
2025-06-27 05:17:20,176 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 05:17:21,091 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 05:17:21,093 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 05:17:21,093 - INFO - app.main - Application startup event finished.
2025-06-27 05:17:21,093 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:17:21,093 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 05:17:21,728 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:17:21,773 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 05:17:23,639 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 05:17:23,639 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 05:17:23,640 - INFO - app.main - Application shutdown event triggered.
2025-06-27 05:17:23,640 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 05:17:23,640 - INFO - app.main - Cancelling 5 other background tasks...
2025-06-27 05:17:23,647 - INFO - app.main - Background task 'Task-7' cancelled successfully.
2025-06-27 05:17:23,654 - INFO - app.main - Redis client connection closed.
2025-06-27 05:17:23,654 - INFO - app.main - Application shutdown event finished.
2025-06-27 05:17:27,010 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:17:27,016 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:17:27,017 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:17:27,674 - INFO - app.main - Application startup event triggered.
2025-06-27 05:17:27,706 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 05:17:27,706 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 05:17:27,713 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 05:17:27,722 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 05:17:27,722 - INFO - app.main - Firebase events processor background task started
2025-06-27 05:17:27,723 - INFO - app.main - Redis publisher background task started
2025-06-27 05:17:27,723 - INFO - app.main - Pending order checker background task started
2025-06-27 05:17:27,723 - INFO - app.main - SL/TP checker background task started
2025-06-27 05:17:27,723 - INFO - app.main - Redis cleanup background task started
2025-06-27 05:17:27,723 - INFO - app.main - Generating initial service account token...
2025-06-27 05:17:27,723 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 05:17:28,520 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 05:17:28,523 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 05:17:28,523 - INFO - app.main - Application startup event finished.
2025-06-27 05:17:28,523 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:17:28,524 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 05:17:29,220 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:17:35,053 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:17:35,090 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:17:35,148 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:17:35,236 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:17:35,276 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:17:35,326 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:17:35,417 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:17:35,489 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:17:35,551 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:17:35,602 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:17:35,654 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:17:35,695 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:17:35,751 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:17:35,782 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:17:35,842 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:17:35,869 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:17:35,919 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:17:35,956 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:17:35,992 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:17:36,044 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:17:36,089 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:17:36,125 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:17:36,155 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:17:36,209 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:17:36,258 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:17:36,300 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:17:36,389 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:17:36,554 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:17:36,678 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:17:36,835 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:17:36,860 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:17:36,954 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:17:37,009 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:17:37,113 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:17:37,174 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:17:37,196 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:17:37,220 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:17:37,320 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:17:37,463 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:17:37,697 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:17:37,870 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:17:37,986 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:17:38,087 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:17:38,174 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:17:38,217 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:17:38,250 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:17:38,291 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:17:38,377 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:17:38,479 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:17:38,540 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:17:38,600 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:17:38,709 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:17:38,821 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:17:38,951 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:17:39,084 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:17:39,162 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:17:39,311 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:17:39,423 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:17:39,507 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:17:39,702 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:17:39,873 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:17:40,116 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:17:40,256 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:17:40,354 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:17:40,481 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:17:40,547 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:17:40,615 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:17:40,666 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:17:40,714 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:17:40,763 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:17:40,849 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:17:40,911 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:17:40,987 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:17:41,126 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:17:41,239 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:17:41,349 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:17:41,472 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:17:41,543 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:17:41,586 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:17:45,179 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52203, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.070000000000000000000000, PnL USD=-450.6282539046856227472967561, Commission=0.10000000, Final PnL=-450.7282539046856227472967561
2025-06-27 05:17:47,053 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52209, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.010000000000000000000000, PnL USD=-450.5475251861585632939115199, Commission=0.10000000, Final PnL=-450.6475251861585632939115199
2025-06-27 05:17:49,433 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.5168573073361199409305934, Commission=0.10000000, Final PnL=-450.6168573073361199409305934
2025-06-27 05:17:51,773 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.000000000000000000000000, PnL USD=-450.5406487785342410893071686, Commission=0.10000000, Final PnL=-450.6406487785342410893071686
2025-06-27 05:17:54,094 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52208, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.020000000000000000000000, PnL USD=-450.5769567720457560511626743, Commission=0.10000000, Final PnL=-450.6769567720457560511626743
2025-06-27 05:17:56,416 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52209, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.010000000000000000000000, PnL USD=-450.5531637965558670404485382, Commission=0.10000000, Final PnL=-450.6531637965558670404485382
2025-06-27 05:17:58,705 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:18:01,035 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.5281337605126151381657990, Commission=0.10000000, Final PnL=-450.6281337605126151381657990
2025-06-27 05:18:03,412 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52212, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.980000000000000000000000, PnL USD=-450.5212570241417718984268425, Commission=0.10000000, Final PnL=-450.6212570241417718984268425
2025-06-27 05:18:05,655 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:18:05,760 - INFO - app.main - Application shutdown event triggered.
2025-06-27 05:18:05,761 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 05:18:05,761 - INFO - app.main - Cancelling 5 other background tasks...
2025-06-27 05:18:05,762 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 05:18:07,405 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 05:18:07,405 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 05:18:07,406 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-27 05:18:07,408 - INFO - app.main - Background task 'Task-7' cancelled successfully.
2025-06-27 05:18:07,411 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-27 05:18:07,412 - INFO - app.main - Background task 'Task-6' cancelled successfully.
2025-06-27 05:18:07,412 - INFO - app.main - Redis client connection closed.
2025-06-27 05:18:07,412 - INFO - app.main - Application shutdown event finished.
2025-06-27 05:18:08,997 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:18:09,002 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:18:09,002 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:18:09,628 - INFO - app.main - Application startup event triggered.
2025-06-27 05:18:09,663 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 05:18:09,663 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 05:18:09,670 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 05:18:09,676 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 05:18:09,676 - INFO - app.main - Firebase events processor background task started
2025-06-27 05:18:09,676 - INFO - app.main - Redis publisher background task started
2025-06-27 05:18:09,676 - INFO - app.main - Pending order checker background task started
2025-06-27 05:18:09,676 - INFO - app.main - SL/TP checker background task started
2025-06-27 05:18:09,676 - INFO - app.main - Redis cleanup background task started
2025-06-27 05:18:09,676 - INFO - app.main - Generating initial service account token...
2025-06-27 05:18:09,676 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 05:18:10,687 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 05:18:10,690 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 05:18:10,690 - INFO - app.main - Application startup event finished.
2025-06-27 05:18:10,690 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:18:10,691 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 05:18:11,295 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:18:11,324 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 9
2025-06-27 05:18:11,337 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 9. Data found: False, User ID match: False
2025-06-27 05:18:11,337 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:18:11,555 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:18:11,564 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:18:11,573 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:18:11,582 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:18:11,591 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:18:11,600 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:18:11,609 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:18:11,618 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:18:11,627 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:18:11,635 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:18:11,645 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:18:11,655 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:18:11,664 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:18:11,673 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:18:11,682 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:18:11,690 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:18:11,698 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:18:11,707 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:18:11,716 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:18:11,724 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:18:11,733 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:18:11,741 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:18:11,750 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:18:11,757 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:18:11,767 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:18:11,776 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:18:11,784 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:18:11,792 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:18:11,800 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:18:11,808 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:18:11,817 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:18:11,826 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:18:11,840 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:18:11,858 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:18:11,873 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:18:11,888 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:18:11,903 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:18:11,918 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:18:11,933 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:18:11,950 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:18:11,964 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:18:11,970 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:18:11,975 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:18:11,981 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:18:12,003 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:18:12,016 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:18:12,026 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:18:12,037 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:18:12,046 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:18:12,054 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:18:12,063 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:18:12,071 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:18:12,079 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:18:12,086 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:18:12,094 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:18:12,101 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:18:12,109 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:18:12,117 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:18:12,125 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:18:12,133 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:18:12,141 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:18:12,149 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:18:12,156 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:18:12,163 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:18:12,171 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:18:12,178 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:18:12,186 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:18:12,194 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:18:12,201 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:18:12,208 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:18:12,215 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:18:12,224 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:18:12,230 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:18:12,237 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:18:12,244 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:18:12,252 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:18:12,261 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:18:12,269 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:18:12,276 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:18:15,304 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:18:18,068 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52212, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.980000000000000000000000, PnL USD=-450.5156187424909891870244293, Commission=0.10000000, Final PnL=-450.6156187424909891870244293
2025-06-27 05:18:18,649 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '8776888990', 'order_user_id': '', 'order_company_name': 'AUDCHF', 'order_type': 'BUY', 'order_status': 'CLOSED', 'order_price': '', 'order_quantity': '0.01000000', 'contract_value': '1000.00000000', 'margin': '', 'stop_loss': '', 'take_profit': '', 'close_price': '0.52213', 'net_profit': '', 'swap': '', 'commission': '', 'cancel_message': '', 'close_message': '', 'takeprofit_id': '', 'stoploss_id': '', 'cancel_id': '', 'close_id': '6562078955', 'modify_id': '', 'stoploss_cancel_id': '', 'takeprofit_cancel_id': '', 'status': 'CLOSED', 'timestamp': '2025-06-27T12:18:18.649428', 'account_type': 'live', 'action': 'close_order'}
2025-06-27 05:18:18,969 - INFO - app.core.firebase - Order data (ID: 8776888990) sent to Firebase successfully.
2025-06-27 05:18:20,433 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.970000000000000000000000, PnL USD=-450.4974657405669232213253238, Commission=0.10000000, Final PnL=-450.5974657405669232213253238
2025-06-27 05:18:23,071 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:18:25,095 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52211, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.990000000000000000000000, PnL USD=-450.5281337605126151381657990, Commission=0.10000000, Final PnL=-450.6281337605126151381657990
2025-06-27 05:18:27,576 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.000000000000000000000000, PnL USD=-450.5406487785342410893071686, Commission=0.10000000, Final PnL=-450.6406487785342410893071686
2025-06-27 05:18:29,630 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52209, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.010000000000000000000000, PnL USD=-450.5588025480895585897901205, Commission=0.10000000, Final PnL=-450.6588025480895585897901205
2025-06-27 05:18:32,291 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.970000000000000000000000, PnL USD=-450.5087418494925096679724166, Commission=0.10000000, Final PnL=-450.6087418494925096679724166
2025-06-27 05:18:32,462 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 9
2025-06-27 05:18:32,475 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 9. Data found: False, User ID match: False
2025-06-27 05:18:32,485 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:18:34,447 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.970000000000000000000000, PnL USD=-450.4861901961029697022788992, Commission=0.10000000, Final PnL=-450.5861901961029697022788992
2025-06-27 05:18:36,781 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:18:39,469 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52213, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.970000000000000000000000, PnL USD=-450.4805526355308604895629974, Commission=0.10000000, Final PnL=-450.5805526355308604895629974
2025-06-27 05:18:41,870 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52214, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.960000000000000000000000, PnL USD=-450.4905887064477372847416900, Commission=0.10000000, Final PnL=-450.5905887064477372847416900
2025-06-27 05:18:43,462 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.940000000000000000000000, PnL USD=-450.4542837834455485195104247, Commission=0.10000000, Final PnL=-450.5542837834455485195104247
2025-06-27 05:18:45,850 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:18:47,952 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.930000000000000000000000, PnL USD=-450.4361320034540152927778543, Commission=0.10000000, Final PnL=-450.5361320034540152927778543
2025-06-27 05:18:50,613 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:18:52,487 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:18:52,491 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 9
2025-06-27 05:18:52,539 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 9. Data found: False, User ID match: False
2025-06-27 05:18:52,552 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:18:54,814 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.940000000000000000000000, PnL USD=-450.4486465516162538951531155, Commission=0.10000000, Final PnL=-450.5486465516162538951531155
2025-06-27 05:18:56,861 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-27 05:18:59,198 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.930000000000000000000000, PnL USD=-450.4248582762892790549249772, Commission=0.10000000, Final PnL=-450.5248582762892790549249772
2025-06-27 05:19:01,251 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52217, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.930000000000000000000000, PnL USD=-450.4079487436179797777555311, Commission=0.10000000, Final PnL=-450.5079487436179797777555311
2025-06-27 05:19:03,722 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.880000000000000000000000, PnL USD=-450.3566512326367163058440746, Commission=0.10000000, Final PnL=-450.4566512326367163058440746
2025-06-27 05:19:05,974 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52216, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.940000000000000000000000, PnL USD=-450.4148261234092075131705730, Commission=0.10000000, Final PnL=-450.5148261234092075131705730
2025-06-27 05:19:08,332 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.52219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.910000000000000000000000, PnL USD=-450.3829212133346681349484433, Commission=0.10000000, Final PnL=-450.4829212133346681349484433
2025-06-27 05:19:09,677 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:19:09,698 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:19:09,748 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:19:10,279 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5221900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.9100000000000000000000000, PnL USD=-450.3829212133346681349484433, Commission=0.10000000, Final PnL=-450.4829212133346681349484433
2025-06-27 05:19:10,307 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:19:10,342 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:19:10,343 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:19:10,362 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:19:10,787 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.8921900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.04000000000000000000000000, PnL USD=0.02930896781142610110128446551, Commission=0.10000000, Final PnL=-0.07069103218857389889871553449
2025-06-27 05:19:10,789 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:19:15,452 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:19:15,483 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:19:15,507 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:19:15,532 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:19:15,570 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:19:15,591 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:19:15,631 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:19:15,661 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:19:15,702 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:19:15,760 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:19:15,826 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:19:15,845 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:19:15,881 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:19:15,899 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:19:15,929 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:19:15,964 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:19:15,985 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:19:16,011 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:19:16,054 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:19:16,085 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:19:16,109 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:19:16,127 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:19:16,150 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:19:16,170 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:19:16,213 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:19:16,243 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:19:16,275 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:19:16,300 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:19:16,314 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:19:16,334 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:19:16,342 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:19:16,353 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:19:16,375 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:19:16,398 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:19:16,414 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:19:16,431 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:19:16,450 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:19:16,472 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:19:16,500 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:19:16,546 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:19:16,574 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:19:16,596 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:19:16,624 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:19:16,650 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:19:16,665 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:19:16,675 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:19:16,694 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:19:16,716 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:19:16,739 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:19:16,751 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:19:16,764 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:19:16,771 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:19:16,777 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:19:16,784 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:19:16,801 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:19:16,813 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:19:16,828 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:19:16,836 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:19:16,841 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:19:16,846 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:19:16,852 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:19:16,868 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:19:16,891 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:19:16,954 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:19:17,041 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:19:17,063 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:19:17,104 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:19:17,125 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:19:17,145 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:19:17,161 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:19:17,176 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:19:17,189 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:19:17,201 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:19:17,212 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:19:17,223 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:19:17,234 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:19:17,249 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:19:17,259 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:19:17,273 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:19:20,104 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02930918256689820920894516252, Commission=0.10000000, Final PnL=-0.07069081743310179079105483748
2025-06-27 05:19:22,463 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89222, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007327241952856525275321116379, Commission=0.10000000, Final PnL=-0.09267275804714347472467888362
2025-06-27 05:19:25,024 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89221, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465448390571305055064223276, Commission=0.10000000, Final PnL=-0.08534551609428694944935776724
2025-06-27 05:19:26,954 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=SELL, Entry=0.89223000, Current=0.89219, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02930896781142610110128446551, Commission=0.10000000, Final PnL=-0.07069103218857389889871553449
2025-06-27 05:19:29,422 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:19:31,780 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:19:43,247 - INFO - app.main - Application shutdown event triggered.
2025-06-27 05:19:43,247 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 05:19:43,248 - INFO - app.main - Cancelling 5 other background tasks...
2025-06-27 05:19:43,250 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-27 05:19:43,252 - INFO - app.main - Background task 'Task-6' cancelled successfully.
2025-06-27 05:19:43,252 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 05:19:44,787 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 05:19:44,787 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 05:19:44,787 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-27 05:19:44,787 - INFO - app.main - Background task 'Task-7' cancelled successfully.
2025-06-27 05:19:44,788 - INFO - app.main - Redis client connection closed.
2025-06-27 05:19:44,788 - INFO - app.main - Application shutdown event finished.
2025-06-27 05:25:29,496 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:25:29,501 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:25:29,501 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:25:30,063 - INFO - app.main - Application startup event triggered.
2025-06-27 05:25:30,095 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 05:25:30,095 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 05:25:30,103 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 05:25:30,110 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 05:25:30,110 - INFO - app.main - Firebase events processor background task started
2025-06-27 05:25:30,110 - INFO - app.main - Redis publisher background task started
2025-06-27 05:25:30,111 - INFO - app.main - Pending order checker background task started
2025-06-27 05:25:30,111 - INFO - app.main - SL/TP checker background task started
2025-06-27 05:25:30,111 - INFO - app.main - Redis cleanup background task started
2025-06-27 05:25:30,111 - INFO - app.main - Generating initial service account token...
2025-06-27 05:25:30,111 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 05:25:31,194 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 05:25:31,195 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 05:25:31,195 - INFO - app.main - Application startup event finished.
2025-06-27 05:25:31,195 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:25:31,196 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 05:25:31,914 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:25:33,956 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:25:33,963 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:25:33,973 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:25:33,983 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:25:33,994 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:25:34,007 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:25:34,020 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:25:34,033 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:25:34,048 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:25:34,058 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:25:34,071 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:25:34,081 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:25:34,091 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:25:34,098 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:25:34,109 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:25:34,115 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:25:34,123 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:25:34,126 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:25:34,129 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:25:34,133 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:25:34,136 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:25:34,143 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:25:34,146 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:25:34,150 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:25:34,155 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:25:34,161 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:25:34,167 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:25:34,171 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:25:34,175 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:25:34,179 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:25:34,183 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:25:34,186 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:25:34,189 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:25:34,193 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:25:34,196 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:25:34,200 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:25:34,203 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:25:34,208 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:25:34,212 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:25:34,216 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:25:34,219 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:25:34,222 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:25:34,226 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:25:34,230 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:25:34,234 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:25:34,238 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:25:34,242 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:25:34,246 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:25:34,250 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:25:34,253 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:25:34,257 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:25:34,261 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:25:34,272 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:25:34,277 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:25:34,288 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:25:34,299 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:25:34,307 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:25:34,316 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:25:34,324 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:25:34,332 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:25:34,337 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:25:34,346 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:25:34,353 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:25:34,364 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:25:34,375 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:25:34,386 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:25:34,397 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:25:34,407 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:25:34,417 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:25:34,426 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:25:34,433 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:25:34,443 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:25:34,450 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:25:34,458 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:25:34,468 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:25:34,478 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:25:34,488 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:25:34,495 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:25:34,502 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:25:56,452 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:25:56,454 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:25:56,455 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:26:25,981 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89217, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-2.000000000000000000000000, PnL USD=-1.465341021489226080139500465, Commission=20.00000000, Final PnL=-21.46534102148922608013950046
2025-06-27 05:26:26,352 - WARNING - app.services.portfolio_calculator - Invalid current prices for AUDCAD: buy=0, sell=0
2025-06-27 05:26:27,027 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:26:28,178 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:26:30,126 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:26:30,144 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89218, Quantity=2.00000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=20.00000000, Final PnL=-20.00000000000000
2025-06-27 05:26:30,172 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:26:30,251 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:26:30,788 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5217800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.3200000000000000000000000, PnL USD=-451.2291335328666424555120033, Commission=0.10000000, Final PnL=-451.3291335328666424555120033
2025-06-27 05:26:30,791 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:26:30,820 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:26:30,836 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:26:30,897 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:26:31,374 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.8921800000, Quantity=2.00000000, Contract Size=100000.00000000, PnL=0E-26, PnL USD=0E-16, Commission=20.00000000, Final PnL=-20.0000000000000000
2025-06-27 05:26:31,384 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:26:32,906 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89217, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-2.000000000000000000000000, PnL USD=-1.465341021489226080139500465, Commission=20.00000000, Final PnL=-21.46534102148922608013950046
2025-06-27 05:26:34,574 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89219, Quantity=2.00000000, Contract Size=100000.00000000, PnL=2.000000000000000000000000, PnL USD=1.465362494046964867934205224, Commission=20.00000000, Final PnL=-18.53463750595303513206579478
2025-06-27 05:26:37,261 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89221, Quantity=2.00000000, Contract Size=100000.00000000, PnL=6.000000000000000000000000, PnL USD=4.396023064467678240418501396, Commission=20.00000000, Final PnL=-15.60397693553232175958149860
2025-06-27 05:26:39,214 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.8922, Quantity=2.00000000, Contract Size=100000.00000000, PnL=4.000000000000000000000000, PnL USD=2.930682042978452160279000930, Commission=20.00000000, Final PnL=-17.06931795702154783972099907
2025-06-27 05:26:41,404 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:26:43,711 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89219, Quantity=2.00000000, Contract Size=100000.00000000, PnL=2.000000000000000000000000, PnL USD=1.465351757689433348475301496, Commission=20.00000000, Final PnL=-18.53464824231056665152469850
2025-06-27 05:26:46,028 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89218, Quantity=2.00000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=20.00000000, Final PnL=-20.00000000000000
2025-06-27 05:26:48,816 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89215, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-6.000000000000000000000000, PnL USD=-4.395990856339018814840865131, Commission=20.00000000, Final PnL=-24.39599085633901881484086513
2025-06-27 05:26:50,659 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:26:53,289 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:26:54,946 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:26:56,447 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:26:56,449 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:26:56,452 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:26:57,228 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89218, Quantity=2.00000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=20.00000000, Final PnL=-20.00000000000000
2025-06-27 05:26:59,939 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89221, Quantity=2.00000000, Contract Size=100000.00000000, PnL=6.000000000000000000000000, PnL USD=4.395733208299144297268784433, Commission=20.00000000, Final PnL=-15.60426679170085570273121557
2025-06-27 05:27:01,930 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:27:04,347 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89222, Quantity=2.00000000, Contract Size=100000.00000000, PnL=8.000000000000000000000000, PnL USD=5.861364085956904320558001861, Commission=20.00000000, Final PnL=-14.13863591404309567944199814
2025-06-27 05:27:06,378 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89219, Quantity=2.00000000, Contract Size=100000.00000000, PnL=2.000000000000000000000000, PnL USD=1.465341021489226080139500465, Commission=20.00000000, Final PnL=-18.53465897851077391986049954
2025-06-27 05:27:08,890 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89229, Quantity=2.00000000, Contract Size=100000.00000000, PnL=22.000000000000000000000000, PnL USD=16.11875123638148688153450512, Commission=20.00000000, Final PnL=-3.88124876361851311846549488
2025-06-27 05:27:11,244 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.8923, Quantity=2.00000000, Contract Size=100000.00000000, PnL=24.000000000000000000000000, PnL USD=17.58061444247476449301903102, Commission=20.00000000, Final PnL=-2.41938555752523550698096898
2025-06-27 05:27:13,296 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:27:15,543 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:27:18,111 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89229, Quantity=2.00000000, Contract Size=100000.00000000, PnL=22.000000000000000000000000, PnL USD=16.11863313990973565441650548, Commission=20.00000000, Final PnL=-3.88136686009026434558349452
2025-06-27 05:27:20,368 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89228, Quantity=2.00000000, Contract Size=100000.00000000, PnL=20.000000000000000000000000, PnL USD=14.65040471743031901256272205, Commission=20.00000000, Final PnL=-5.34959528256968098743727795
2025-06-27 05:27:22,510 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:27:22,515 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:27:22,522 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:27:22,528 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:27:24,408 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:27:24,437 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:27:24,441 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:27:24,971 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:27:27,025 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89227, Quantity=2.00000000, Contract Size=100000.00000000, PnL=18.000000000000000000000000, PnL USD=13.18526766093351695039409300, Commission=20.00000000, Final PnL=-6.81473233906648304960590700
2025-06-27 05:27:29,039 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:27:30,108 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:27:30,121 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:27:30,155 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:27:30,595 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5217300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.3700000000000000000000000, PnL USD=-451.2747946303346022841114005, Commission=0.10000000, Final PnL=-451.3747946303346022841114005
2025-06-27 05:27:30,603 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:27:30,627 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:27:30,632 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:27:30,655 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:27:31,321 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.8922700000, Quantity=2.00000000, Contract Size=100000.00000000, PnL=18.00000000000000000000000000, PnL USD=13.18526766093351695039409300, Commission=20.00000000, Final PnL=-6.81473233906648304960590700
2025-06-27 05:27:31,329 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:27:31,837 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89228, Quantity=2.00000000, Contract Size=100000.00000000, PnL=20.000000000000000000000000, PnL USD=14.65029740103724105599343667, Commission=20.00000000, Final PnL=-5.34970259896275894400656333
2025-06-27 05:27:33,779 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89228, Quantity=2.00000000, Contract Size=100000.00000000, PnL=20.000000000000000000000000, PnL USD=14.65029740103724105599343667, Commission=20.00000000, Final PnL=-5.34970259896275894400656333
2025-06-27 05:27:34,151 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:27:34,152 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:27:34,153 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:27:36,026 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.8923, Quantity=2.00000000, Contract Size=100000.00000000, PnL=24.000000000000000000000000, PnL USD=17.58022810345964238885999546, Commission=20.00000000, Final PnL=-2.41977189654035761114000454
2025-06-27 05:27:38,286 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89226, Quantity=2.00000000, Contract Size=100000.00000000, PnL=16.000000000000000000000000, PnL USD=11.72023792082979284479474933, Commission=20.00000000, Final PnL=-8.27976207917020715520525067
2025-06-27 05:27:40,608 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89226, Quantity=2.00000000, Contract Size=100000.00000000, PnL=16.000000000000000000000000, PnL USD=11.72032377394425521005017764, Commission=20.00000000, Final PnL=-8.27967622605574478994982236
2025-06-27 05:27:42,988 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89228, Quantity=2.00000000, Contract Size=100000.00000000, PnL=20.000000000000000000000000, PnL USD=14.64997546129110233740358485, Commission=20.00000000, Final PnL=-5.35002453870889766259641515
2025-06-27 05:27:45,133 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:27:47,395 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:27:50,123 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.8923, Quantity=2.00000000, Contract Size=100000.00000000, PnL=24.000000000000000000000000, PnL USD=17.57997055354932280488430182, Commission=20.00000000, Final PnL=-2.42002944645067719511569818
2025-06-27 05:27:51,997 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89228, Quantity=2.00000000, Contract Size=100000.00000000, PnL=20.000000000000000000000000, PnL USD=14.64997546129110233740358485, Commission=20.00000000, Final PnL=-5.35002453870889766259641515
2025-06-27 05:27:54,248 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:27:56,606 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89224, Quantity=2.00000000, Contract Size=100000.00000000, PnL=12.000000000000000000000000, PnL USD=8.790114051729821194429997729, Commission=20.00000000, Final PnL=-11.20988594827017880557000227
2025-06-27 05:27:58,761 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89225, Quantity=2.00000000, Contract Size=100000.00000000, PnL=14.000000000000000000000000, PnL USD=10.25513306035145806016833068, Commission=20.00000000, Final PnL=-9.74486693964854193983166932
2025-06-27 05:27:59,428 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:27:59,437 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:27:59,438 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:28:01,109 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89226, Quantity=2.00000000, Contract Size=100000.00000000, PnL=16.000000000000000000000000, PnL USD=11.72015206897309492590666364, Commission=20.00000000, Final PnL=-8.27984793102690507409333636
2025-06-27 05:28:03,347 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89226, Quantity=2.00000000, Contract Size=100000.00000000, PnL=16.000000000000000000000000, PnL USD=11.72023792082979284479474933, Commission=20.00000000, Final PnL=-8.27976207917020715520525067
2025-06-27 05:28:05,637 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:28:08,165 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89224, Quantity=2.00000000, Contract Size=100000.00000000, PnL=12.000000000000000000000000, PnL USD=8.789598974546786302874931331, Commission=20.00000000, Final PnL=-11.21040102545321369712506867
2025-06-27 05:28:10,734 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89224, Quantity=2.00000000, Contract Size=100000.00000000, PnL=12.000000000000000000000000, PnL USD=8.790693585723913616784364286, Commission=20.00000000, Final PnL=-11.20930641427608638321563571
2025-06-27 05:28:12,683 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89219, Quantity=2.00000000, Contract Size=100000.00000000, PnL=2.000000000000000000000000, PnL USD=1.465126330517848901521533694, Commission=20.00000000, Final PnL=-18.53487366948215109847846631
2025-06-27 05:28:14,935 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:28:17,405 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89226, Quantity=2.00000000, Contract Size=100000.00000000, PnL=16.000000000000000000000000, PnL USD=11.72092478096521815571248572, Commission=20.00000000, Final PnL=-8.27907521903478184428751428
2025-06-27 05:28:19,601 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89224, Quantity=2.00000000, Contract Size=100000.00000000, PnL=12.000000000000000000000000, PnL USD=8.790693585723913616784364286, Commission=20.00000000, Final PnL=-11.20930641427608638321563571
2025-06-27 05:28:22,087 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89221, Quantity=2.00000000, Contract Size=100000.00000000, PnL=6.000000000000000000000000, PnL USD=4.395314594642111509131266070, Commission=20.00000000, Final PnL=-15.60468540535788849086873393
2025-06-27 05:28:24,147 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89221, Quantity=2.00000000, Contract Size=100000.00000000, PnL=6.000000000000000000000000, PnL USD=4.395378991553546704564601083, Commission=20.00000000, Final PnL=-15.60462100844645329543539892
2025-06-27 05:28:26,260 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:28:28,922 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:28:30,113 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:28:30,141 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:28:30,184 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:28:31,130 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.8922, Quantity=2.00000000, Contract Size=100000.00000000, PnL=4.000000000000000000000000, PnL USD=2.930252661035697803043067388, Commission=20.00000000, Final PnL=-17.06974733896430219695693261
2025-06-27 05:28:31,533 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5216900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.4100000000000000000000000, PnL USD=-451.2909769352132428439057374, Commission=0.10000000, Final PnL=-451.3909769352132428439057374
2025-06-27 05:28:31,541 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:28:31,587 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:28:31,605 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:28:31,638 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:28:32,250 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.8922000000, Quantity=2.00000000, Contract Size=100000.00000000, PnL=4.00000000000000000000000000, PnL USD=2.930252661035697803043067388, Commission=20.00000000, Final PnL=-17.06974733896430219695693261
2025-06-27 05:28:32,252 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:28:33,618 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89224, Quantity=2.00000000, Contract Size=100000.00000000, PnL=12.000000000000000000000000, PnL USD=8.790114051729821194429997729, Commission=20.00000000, Final PnL=-11.20988594827017880557000227
2025-06-27 05:28:35,728 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89219, Quantity=2.00000000, Contract Size=100000.00000000, PnL=2.000000000000000000000000, PnL USD=1.465051203539563707751585918, Commission=20.00000000, Final PnL=-18.53494879646043629224841408
2025-06-27 05:28:38,078 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89225, Quantity=2.00000000, Contract Size=100000.00000000, PnL=14.000000000000000000000000, PnL USD=10.25528330220122330879390543, Commission=20.00000000, Final PnL=-9.74471669779877669120609457
2025-06-27 05:28:40,495 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89224, Quantity=2.00000000, Contract Size=100000.00000000, PnL=12.000000000000000000000000, PnL USD=8.790371612959937881373935083, Commission=20.00000000, Final PnL=-11.20962838704006211862606492
2025-06-27 05:28:42,693 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89223, Quantity=2.00000000, Contract Size=100000.00000000, PnL=10.000000000000000000000000, PnL USD=7.325363338021565869667135490, Commission=20.00000000, Final PnL=-12.67463666197843413033286451
2025-06-27 05:28:45,270 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89224, Quantity=2.00000000, Contract Size=100000.00000000, PnL=12.000000000000000000000000, PnL USD=8.790436005625879043600562588, Commission=20.00000000, Final PnL=-11.20956399437412095639943741
2025-06-27 05:28:47,494 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89228, Quantity=2.00000000, Contract Size=100000.00000000, PnL=20.000000000000000000000000, PnL USD=14.65072667604313173933427098, Commission=20.00000000, Final PnL=-5.34927332395686826066572902
2025-06-27 05:28:49,963 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89227, Quantity=2.00000000, Contract Size=100000.00000000, PnL=18.000000000000000000000000, PnL USD=13.18546083185607336976427326, Commission=20.00000000, Final PnL=-6.81453916814392663023572674
2025-06-27 05:28:52,003 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89228, Quantity=2.00000000, Contract Size=100000.00000000, PnL=20.000000000000000000000000, PnL USD=14.65040471743031901256272205, Commission=20.00000000, Final PnL=-5.34959528256968098743727795
2025-06-27 05:28:54,477 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89228, Quantity=2.00000000, Contract Size=100000.00000000, PnL=20.000000000000000000000000, PnL USD=14.65029740103724105599343667, Commission=20.00000000, Final PnL=-5.34970259896275894400656333
2025-06-27 05:28:56,507 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89228, Quantity=2.00000000, Contract Size=100000.00000000, PnL=20.000000000000000000000000, PnL USD=14.65040471743031901256272205, Commission=20.00000000, Final PnL=-5.34959528256968098743727795
2025-06-27 05:28:59,077 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:29:00,939 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89229, Quantity=2.00000000, Contract Size=100000.00000000, PnL=22.000000000000000000000000, PnL USD=16.11544518917335091381899425, Commission=20.00000000, Final PnL=-3.88455481082664908618100575
2025-06-27 05:29:03,368 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89228, Quantity=2.00000000, Contract Size=100000.00000000, PnL=20.000000000000000000000000, PnL USD=14.65061935493322980228989181, Commission=20.00000000, Final PnL=-5.34938064506677019771010819
2025-06-27 05:29:05,717 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89235, Quantity=2.00000000, Contract Size=100000.00000000, PnL=34.000000000000000000000000, PnL USD=24.90532314656782671755166023, Commission=20.00000000, Final PnL=4.90532314656782671755166023
2025-06-27 05:29:07,887 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89227, Quantity=2.00000000, Contract Size=100000.00000000, PnL=18.000000000000000000000000, PnL USD=13.18526766093351695039409300, Commission=20.00000000, Final PnL=-6.81473233906648304960590700
2025-06-27 05:29:10,330 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89226, Quantity=2.00000000, Contract Size=100000.00000000, PnL=16.000000000000000000000000, PnL USD=11.72015206897309492590666364, Commission=20.00000000, Final PnL=-8.27984793102690507409333636
2025-06-27 05:29:12,581 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89228, Quantity=2.00000000, Contract Size=100000.00000000, PnL=20.000000000000000000000000, PnL USD=14.65008277296766726732006036, Commission=20.00000000, Final PnL=-5.34991722703233273267993964
2025-06-27 05:29:14,956 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89218000, Current=0.89227, Quantity=2.00000000, Contract Size=100000.00000000, PnL=18.000000000000000000000000, PnL USD=13.18478475838881930252488628, Commission=20.00000000, Final PnL=-6.81521524161118069747511372
2025-06-27 05:29:16,951 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89318000, Current=0.89227, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-182.000000000000000000000000, PnL USD=-133.3138001757984178142396718, Commission=20.00000000, Final PnL=-153.3138001757984178142396718
2025-06-27 05:29:18,196 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:29:18,197 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:29:18,198 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:29:19,264 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89318000, Current=0.89228, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-180.000000000000000000000000, PnL USD=-131.8488133606797538822150601, Commission=20.00000000, Final PnL=-151.8488133606797538822150601
2025-06-27 05:29:21,594 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89318000, Current=0.89227, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-182.000000000000000000000000, PnL USD=-133.3206361298923912008380154, Commission=20.00000000, Final PnL=-153.3206361298923912008380154
2025-06-27 05:29:24,038 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89318000, Current=0.89226, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-184.000000000000000000000000, PnL USD=-134.7768125283837037254068941, Commission=20.00000000, Final PnL=-154.7768125283837037254068941
2025-06-27 05:29:26,077 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89318000, Current=0.89229, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-178.000000000000000000000000, PnL USD=-130.3819164676755394734914519, Commission=20.00000000, Final PnL=-150.3819164676755394734914519
2025-06-27 05:29:28,431 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89318000, Current=0.89222, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-192.000000000000000000000000, PnL USD=-140.6377040894807392269321203, Commission=20.00000000, Final PnL=-160.6377040894807392269321203
2025-06-27 05:29:30,135 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:29:30,358 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:29:30,457 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:29:31,222 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89318000, Current=0.8922, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-196.000000000000000000000000, PnL USD=-143.5666046498000322292377785, Commission=20.00000000, Final PnL=-163.5666046498000322292377785
2025-06-27 05:29:31,747 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5218700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.2300000000000000000000000, PnL USD=-450.9639459188783174762143215, Commission=0.10000000, Final PnL=-451.0639459188783174762143215
2025-06-27 05:29:31,762 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:29:31,812 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:29:31,817 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:29:31,856 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:29:32,621 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89318000, Current=0.8922000000, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-196.0000000000000000000000000, PnL USD=-143.5666046498000322292377785, Commission=20.00000000, Final PnL=-163.5666046498000322292377785
2025-06-27 05:29:32,631 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:29:33,454 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89518000, Current=0.89224, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-588.000000000000000000000000, PnL USD=-430.6998139494000966877133356, Commission=20.00000000, Final PnL=-450.6998139494000966877133356
2025-06-27 05:29:33,454 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 84.81734147019542611483433388% which is below threshold 100.0%
2025-06-27 05:29:34,524 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:29:34,532 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:29:34,533 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:29:35,668 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89518000, Current=0.89222, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-592.000000000000000000000000, PnL USD=-433.6360972751245238792850864, Commission=20.00000000, Final PnL=-453.6360972751245238792850864
2025-06-27 05:29:35,668 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 84.59274336519489624972003779% which is below threshold 100.0%
2025-06-27 05:29:37,640 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89518000, Current=0.89221, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-594.000000000000000000000000, PnL USD=-435.1010840902431878113096982, Commission=20.00000000, Final PnL=-455.1010840902431878113096982
2025-06-27 05:29:37,640 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 84.48068562892544553399551015% which is below threshold 100.0%
2025-06-27 05:29:40,610 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89518000, Current=0.89213, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-610.000000000000000000000000, PnL USD=-446.8177057009544319188989240, Commission=20.00000000, Final PnL=-466.8177057009544319188989240
2025-06-27 05:29:40,610 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 83.58447408567296960118568677% which is below threshold 100.0%
2025-06-27 05:29:42,303 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:29:44,632 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89518000, Current=0.89215, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-606.000000000000000000000000, PnL USD=-443.8910049809551714034573689, Commission=20.00000000, Final PnL=-463.8910049809551714034573689
2025-06-27 05:29:44,632 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 83.80833921130874123964834444% which is below threshold 100.0%
2025-06-27 05:29:47,088 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89217, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1402.000000000000000000000000, PnL USD=-1026.955757398183416349252857, Commission=20.00000000, Final PnL=-1046.955757398183416349252857
2025-06-27 05:29:47,088 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 39.20936017606735638128635354% which is below threshold 100.0%
2025-06-27 05:29:47,845 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:29:47,854 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:29:47,863 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:29:49,307 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:29:51,851 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89216, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1404.000000000000000000000000, PnL USD=-1028.420744213302080281277469, Commission=20.00000000, Final PnL=-1048.420744213302080281277469
2025-06-27 05:29:51,851 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 39.09730243979790566556182591% which is below threshold 100.0%
2025-06-27 05:29:53,880 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89216, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1404.000000000000000000000000, PnL USD=-1028.420744213302080281277469, Commission=20.00000000, Final PnL=-1048.420744213302080281277469
2025-06-27 05:29:53,881 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 39.09730243979790566556182591% which is below threshold 100.0%
2025-06-27 05:29:55,746 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.8922, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1396.000000000000000000000000, PnL USD=-1022.553306817266208129152292, Commission=20.00000000, Final PnL=-1042.553306817266208129152292
2025-06-27 05:29:55,746 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 39.54610630991959244814683964% which is below threshold 100.0%
2025-06-27 05:29:58,446 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89214, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1408.000000000000000000000000, PnL USD=-1031.365827216923775619332249, Commission=20.00000000, Final PnL=-1051.365827216923775619332249
2025-06-27 05:29:58,446 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 38.87203124206036825491779179% which is below threshold 100.0%
2025-06-27 05:30:00,485 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89215, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1406.000000000000000000000000, PnL USD=-1029.893274928764494319472015, Commission=20.00000000, Final PnL=-1049.893274928764494319472015
2025-06-27 05:30:00,486 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 38.98466766598351670788449803% which is below threshold 100.0%
2025-06-27 05:30:02,450 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89214, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1408.000000000000000000000000, PnL USD=-1031.358272474893604553212373, Commission=20.00000000, Final PnL=-1051.358272474893604553212373
2025-06-27 05:30:02,450 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 38.87260910889252269451850132% which is below threshold 100.0%
2025-06-27 05:30:04,946 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89193, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1450.000000000000000000000000, PnL USD=-1062.208808274972895361444018, Commission=20.00000000, Final PnL=-1082.208808274972895361444018
2025-06-27 05:30:04,946 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 36.51283278273049333679244135% which is below threshold 100.0%
2025-06-27 05:30:07,254 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89194, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1448.000000000000000000000000, PnL USD=-1060.572767889841060572767890, Commission=20.00000000, Final PnL=-1080.572767889841060572767890
2025-06-27 05:30:07,254 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 36.63797451104592797852389261% which is below threshold 100.0%
2025-06-27 05:30:09,391 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89202, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1432.000000000000000000000000, PnL USD=-1048.992030004688232536333802, Commission=20.00000000, Final PnL=-1068.992030004688232536333802
2025-06-27 05:30:09,391 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 37.52379222513571480197852128% which is below threshold 100.0%
2025-06-27 05:30:11,877 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.8921, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1416.000000000000000000000000, PnL USD=-1037.324640123072414929856049, Commission=20.00000000, Final PnL=-1057.324640123072414929856049
2025-06-27 05:30:11,877 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 38.41623800336004781199708961% which is below threshold 100.0%
2025-06-27 05:30:14,025 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89229, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1378.000000000000000000000000, PnL USD=-1009.375915616759449164957515, Commission=20.00000000, Final PnL=-1029.375915616759449164957515
2025-06-27 05:30:14,026 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 40.55405301130076496998068497% which is below threshold 100.0%
2025-06-27 05:30:16,208 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.8923, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1376.000000000000000000000000, PnL USD=-1008.117691879377545936758198, Commission=20.00000000, Final PnL=-1028.117691879377545936758198
2025-06-27 05:30:16,208 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 40.65029531346788955239544131% which is below threshold 100.0%
2025-06-27 05:30:17,837 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:30:17,838 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:30:17,838 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:30:18,676 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89217, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1402.000000000000000000000000, PnL USD=-1027.083653839109763155388526, Commission=20.00000000, Final PnL=-1047.083653839109763155388526
2025-06-27 05:30:18,676 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 39.19957729918462820550055257% which is below threshold 100.0%
2025-06-27 05:30:20,940 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89212, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1412.000000000000000000000000, PnL USD=-1034.424656229624691394202240, Commission=20.00000000, Final PnL=-1054.424656229624691394202240
2025-06-27 05:30:20,940 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 38.63805954261485513487572265% which is below threshold 100.0%
2025-06-27 05:30:24,159 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89216, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1404.000000000000000000000000, PnL USD=-1028.420744213302080281277469, Commission=20.00000000, Final PnL=-1048.420744213302080281277469
2025-06-27 05:30:24,159 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 39.09730243979790566556182591% which is below threshold 100.0%
2025-06-27 05:30:26,103 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89231, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1374.000000000000000000000000, PnL USD=-1006.600780958102257159393109, Commission=20.00000000, Final PnL=-1026.600780958102257159393109
2025-06-27 05:30:26,103 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 40.76632475633133765560920113% which is below threshold 100.0%
2025-06-27 05:30:28,294 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89226, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1384.000000000000000000000000, PnL USD=-1013.971412453385887920992285, Commission=20.00000000, Final PnL=-1033.971412453385887920992285
2025-06-27 05:30:28,294 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 40.20254065144101518942958772% which is below threshold 100.0%
2025-06-27 05:30:30,126 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:30:30,230 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:30:30,356 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:30:31,225 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.89226, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1384.000000000000000000000000, PnL USD=-1013.956555185171618007985640, Commission=20.00000000, Final PnL=-1033.956555185171618007985640
2025-06-27 05:30:31,225 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 40.20367709296121023383289555% which is below threshold 100.0%
2025-06-27 05:30:31,737 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5217100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.3900000000000000000000000, PnL USD=-451.3507082294888975165003068, Commission=0.10000000, Final PnL=-451.4507082294888975165003068
2025-06-27 05:30:31,743 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:30:31,805 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:30:31,811 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:30:31,823 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:30:32,249 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89918000, Current=0.8922600000, Quantity=2.00000000, Contract Size=100000.00000000, PnL=-1384.000000000000000000000000, PnL USD=-1013.971412453385887920992285, Commission=20.00000000, Final PnL=-1033.971412453385887920992285
2025-06-27 05:30:32,249 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 40.20254065144101518942958772% which is below threshold 100.0%
2025-06-27 05:30:32,257 - WARNING - app.main - CRITICAL: User 10 margin level 40.20254065144101518942958772% below cutoff threshold 50.0%. Initiating auto-cutoff.
2025-06-27 05:30:32,257 - WARNING - app.main - AUTO-CUTOFF: Initiating for user 10 (demo) with margin level 40.20254065144101518942958772%
2025-06-27 05:30:32,270 - WARNING - app.main - AUTO-CUTOFF: Found 1 positions for user 10. Barclays user: False
2025-06-27 05:30:32,270 - INFO - app.main - AUTO-CUTOFF: Processing non-Barclays user 10. Closing orders locally.
2025-06-27 05:30:32,317 - ERROR - app.main - Error processing local closure for order 3859192777: name 'DemoUser' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 516, in handle_margin_cutoff
    if isinstance(user_for_cutoff, DemoUser):
                                   ^^^^^^^^
NameError: name 'DemoUser' is not defined
2025-06-27 05:30:32,359 - ERROR - app.main - Error updating user financials after auto-cutoff: name 'DemoUser' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 564, in handle_margin_cutoff
    user_type_str = 'demo' if isinstance(user_for_cutoff, DemoUser) else 'live'
                                                          ^^^^^^^^
NameError: name 'DemoUser' is not defined
2025-06-27 05:30:32,361 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:30:50,248 - INFO - app.main - Application shutdown event triggered.
2025-06-27 05:30:50,248 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 05:30:50,248 - INFO - app.main - Cancelling 5 other background tasks...
2025-06-27 05:30:50,248 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 05:30:50,374 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 05:30:50,375 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 05:30:50,375 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-27 05:30:50,376 - INFO - app.main - Background task 'Task-7' cancelled successfully.
2025-06-27 05:30:50,381 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-27 05:30:50,382 - INFO - app.main - Background task 'Task-6' cancelled successfully.
2025-06-27 05:30:50,384 - INFO - app.main - Redis client connection closed.
2025-06-27 05:30:50,384 - INFO - app.main - Application shutdown event finished.
2025-06-27 05:34:16,198 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:34:16,203 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:34:16,203 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:34:16,717 - INFO - app.main - Application startup event triggered.
2025-06-27 05:34:16,751 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 05:34:16,751 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 05:34:16,758 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 05:34:16,766 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 05:34:16,766 - INFO - app.main - Firebase events processor background task started
2025-06-27 05:34:16,766 - INFO - app.main - Redis publisher background task started
2025-06-27 05:34:16,766 - INFO - app.main - Pending order checker background task started
2025-06-27 05:34:16,766 - INFO - app.main - SL/TP checker background task started
2025-06-27 05:34:16,766 - INFO - app.main - Redis cleanup background task started
2025-06-27 05:34:16,766 - INFO - app.main - Generating initial service account token...
2025-06-27 05:34:16,766 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 05:34:17,886 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 05:34:17,887 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 05:34:17,887 - INFO - app.main - Application startup event finished.
2025-06-27 05:34:17,887 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:34:17,888 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 05:34:18,559 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:34:18,961 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:34:18,968 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:34:18,974 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:34:18,979 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:34:18,986 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:34:18,992 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:34:18,999 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:34:19,006 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:34:19,014 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:34:19,022 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:34:19,029 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:34:19,036 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:34:19,044 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:34:19,053 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:34:19,059 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:34:19,067 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:34:19,074 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:34:19,079 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:34:19,086 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:34:19,092 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:34:19,099 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:34:19,105 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:34:19,113 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:34:19,121 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:34:19,131 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:34:19,142 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:34:19,151 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:34:19,161 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:34:19,170 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:34:19,178 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:34:19,189 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:34:19,203 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:34:19,214 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:34:19,223 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:34:19,232 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:34:19,239 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:34:19,249 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:34:19,253 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:34:19,259 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:34:19,276 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:34:19,290 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:34:19,304 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:34:19,319 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:34:19,332 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:34:19,345 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:34:19,359 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:34:19,369 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:34:19,398 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:34:19,406 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:34:19,416 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:34:19,426 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:34:19,438 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:34:19,448 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:34:19,460 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:34:19,471 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:34:19,483 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:34:19,496 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:34:19,506 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:34:19,517 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:34:19,528 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:34:19,537 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:34:19,551 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:34:19,564 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:34:19,577 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:34:19,586 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:34:19,594 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:34:19,604 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:34:19,614 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:34:19,626 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:34:19,634 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:34:19,641 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:34:19,655 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:34:19,666 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:34:19,673 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:34:19,682 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:34:19,689 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:34:19,699 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:34:19,708 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:34:19,717 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:34:25,887 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:34:25,888 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:34:25,889 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:35:16,766 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:35:16,801 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:35:16,856 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:35:17,738 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5209600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-361.1400000000000000000000000, PnL USD=-453.0105368790767686904164576, Commission=0.10000000, Final PnL=-453.1105368790767686904164576
2025-06-27 05:35:17,749 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:35:17,876 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:35:17,888 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:35:18,327 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:35:18,374 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:35:44,919 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:35:44,934 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:35:44,937 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:36:16,771 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:36:16,834 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:36:16,920 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:36:18,183 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5214000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.7000000000000000000000000, PnL USD=-452.3564674308359878602422935, Commission=0.10000000, Final PnL=-452.4564674308359878602422935
2025-06-27 05:36:18,188 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:36:18,248 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:36:18,258 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:36:18,309 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:36:18,360 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:36:35,400 - INFO - app.main - Application shutdown event triggered.
2025-06-27 05:36:35,401 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 05:36:35,401 - INFO - app.main - Cancelling 5 other background tasks...
2025-06-27 05:36:35,415 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-27 05:36:35,425 - INFO - app.main - Background task 'Task-6' cancelled successfully.
2025-06-27 05:36:35,425 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 05:36:37,506 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 05:36:37,506 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 05:36:37,506 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-27 05:36:37,507 - INFO - app.main - Background task 'Task-7' cancelled successfully.
2025-06-27 05:36:37,509 - INFO - app.main - Redis client connection closed.
2025-06-27 05:36:37,510 - INFO - app.main - Application shutdown event finished.
2025-06-27 05:36:50,345 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 05:36:50,349 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 05:36:50,350 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 05:36:50,825 - INFO - app.main - Application startup event triggered.
2025-06-27 05:36:50,858 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 05:36:50,858 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 05:36:50,865 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 05:36:50,874 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 05:36:50,874 - INFO - app.main - Firebase events processor background task started
2025-06-27 05:36:50,874 - INFO - app.main - Redis publisher background task started
2025-06-27 05:36:50,874 - INFO - app.main - Pending order checker background task started
2025-06-27 05:36:50,874 - INFO - app.main - SL/TP checker background task started
2025-06-27 05:36:50,874 - INFO - app.main - Redis cleanup background task started
2025-06-27 05:36:50,874 - INFO - app.main - Generating initial service account token...
2025-06-27 05:36:50,874 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 05:36:51,690 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 05:36:51,694 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 05:36:51,694 - INFO - app.main - Application startup event finished.
2025-06-27 05:36:51,695 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:36:51,695 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 05:36:52,291 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 05:36:56,812 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:36:56,819 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:36:56,828 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:36:56,833 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:36:56,838 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:36:56,846 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:36:56,854 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:36:56,864 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:36:56,873 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:36:56,881 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:36:56,889 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:36:56,897 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:36:56,905 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:36:56,913 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:36:56,920 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:36:56,927 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:36:56,935 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:36:56,942 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:36:56,950 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:36:56,957 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:36:56,964 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:36:56,970 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:36:56,977 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:36:56,986 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:36:56,993 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:36:57,000 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:36:57,009 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:36:57,018 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:36:57,025 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:36:57,032 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:36:57,040 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:36:57,049 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:36:57,056 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:36:57,064 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:36:57,071 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:36:57,080 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:36:57,087 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:36:57,095 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:36:57,102 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:36:57,109 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:36:57,115 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:36:57,123 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:36:57,131 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:36:57,139 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:36:57,146 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:36:57,153 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:36:57,161 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:36:57,168 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:36:57,177 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:36:57,184 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:36:57,191 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:36:57,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:36:57,206 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:36:57,213 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:36:57,220 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:36:57,227 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:36:57,233 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:36:57,240 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:36:57,247 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:36:57,254 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:36:57,261 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:36:57,268 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:36:57,275 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:36:57,282 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:36:57,289 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:36:57,296 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:36:57,304 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:36:57,311 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:36:57,318 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:36:57,329 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:36:57,337 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:36:57,354 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:36:57,367 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:36:57,377 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:36:57,387 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:36:57,395 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:36:57,403 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:36:57,411 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:36:57,419 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:36:59,575 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:36:59,576 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:36:59,576 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:37:09,252 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89267, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02198365881361521269189902173, Commission=0.10000000, Final PnL=-0.1219836588136152126918990217
2025-06-27 05:37:09,663 - WARNING - app.services.portfolio_calculator - Invalid current prices for AUDCAD: buy=0, sell=0
2025-06-27 05:37:10,839 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:37:11,873 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89271, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007327886271205070897299673909, Commission=0.10000000, Final PnL=-0.09267211372879492910270032609
2025-06-27 05:37:13,138 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89268, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01465620213833989198379024043, Commission=0.10000000, Final PnL=-0.1146562021383398919837902404
2025-06-27 05:37:15,556 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89267, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02198381990854730918044319381, Commission=0.10000000, Final PnL=-0.1219838199085473091804431938
2025-06-27 05:37:17,965 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89265, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03664104236437318168827266798, Commission=0.10000000, Final PnL=-0.1366410423643731816882726680
2025-06-27 05:37:19,995 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:37:22,152 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8927, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:37:24,915 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89266, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02931498215450461344531656516, Commission=0.10000000, Final PnL=-0.1293149821545046134453165652
2025-06-27 05:37:26,990 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89268, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01465749107725230672265828258, Commission=0.10000000, Final PnL=-0.1146574910772523067226582826
2025-06-27 05:37:29,117 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89265, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.050000000000000000000000, PnL USD=-0.03664453336851208536710493529, Commission=0.10000000, Final PnL=-0.1366445333685120853671049353
2025-06-27 05:37:30,323 - WARNING - app.services.portfolio_calculator - Invalid current prices for AUDCAD: buy=0, sell=0
2025-06-27 05:37:30,324 - WARNING - app.services.portfolio_calculator - Invalid current prices for AUDCAD: buy=0, sell=0
2025-06-27 05:37:31,160 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:37:31,161 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:37:32,286 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89274, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02931713073241521852256319674, Commission=0.10000000, Final PnL=-0.07068286926758478147743680326
2025-06-27 05:37:32,288 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.89274, Quantity=0.60000000, Contract Size=100000.00000000, PnL=4.800000000000000000000000, PnL USD=3.518055687889826222707583609, Commission=6.00000000, Final PnL=-2.481944312110173777292416391
2025-06-27 05:37:33,721 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89271, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007329551284870340237770643681, Commission=0.10000000, Final PnL=-0.09267044871512965976222935632
2025-06-27 05:37:33,724 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.89271, Quantity=0.60000000, Contract Size=100000.00000000, PnL=3.000000000000000000000000, PnL USD=2.198865385461102071331193104, Commission=6.00000000, Final PnL=-3.801134614538897928668806896
2025-06-27 05:37:36,177 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89272, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465963981264980319433551518, Commission=0.10000000, Final PnL=-0.08534036018735019680566448482
2025-06-27 05:37:36,178 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.89272, Quantity=0.60000000, Contract Size=100000.00000000, PnL=3.600000000000000000000000, PnL USD=2.638735166276964574980392732, Commission=6.00000000, Final PnL=-3.361264833723035425019607268
2025-06-27 05:37:38,338 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:37:38,338 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:37:40,739 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89275, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03663969984757884863407198968, Commission=0.10000000, Final PnL=-0.06336030015242115136592801032
2025-06-27 05:37:40,741 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.89275, Quantity=0.60000000, Contract Size=100000.00000000, PnL=5.400000000000000000000000, PnL USD=3.957087583538515652479774886, Commission=6.00000000, Final PnL=-2.042912416461484347520225114
2025-06-27 05:37:43,141 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89272, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465953236091768672579344719, Commission=0.10000000, Final PnL=-0.08534046763908231327420655281
2025-06-27 05:37:43,142 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.89272, Quantity=0.60000000, Contract Size=100000.00000000, PnL=3.600000000000000000000000, PnL USD=2.638715824965183610642820494, Commission=6.00000000, Final PnL=-3.361284175034816389357179506
2025-06-27 05:37:45,295 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:37:45,296 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:37:47,542 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8927, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:37:47,544 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.8927, Quantity=0.60000000, Contract Size=100000.00000000, PnL=2.400000000000000000000000, PnL USD=1.759066522032308188454660060, Commission=6.00000000, Final PnL=-4.240933477967691811545339940
2025-06-27 05:37:49,796 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8927, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:37:49,797 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.8927, Quantity=0.60000000, Contract Size=100000.00000000, PnL=2.400000000000000000000000, PnL USD=1.758898929270276806718993910, Commission=6.00000000, Final PnL=-4.241101070729723193281006090
2025-06-27 05:37:50,874 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:37:50,906 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:37:50,969 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:37:51,951 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5214300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.6700000000000000000000000, PnL USD=-452.3358625446792500156769298, Commission=0.10000000, Final PnL=-452.4358625446792500156769298
2025-06-27 05:37:51,965 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:37:52,049 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:37:52,061 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:37:52,122 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:37:52,775 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:37:52,775 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:37:53,392 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8927000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-26, PnL USD=0E-16, Commission=0.10000000, Final PnL=-0.1000000000000000
2025-06-27 05:37:53,393 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.8927000000, Quantity=0.60000000, Contract Size=100000.00000000, PnL=2.40000000000000000000000000, PnL USD=1.759040736451721661120802123, Commission=6.00000000, Final PnL=-4.240959263548278338879197877
2025-06-27 05:37:53,394 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:37:54,265 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89273, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198913736614112628361589375, Commission=0.10000000, Final PnL=-0.07801086263385887371638410625
2025-06-27 05:37:54,267 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.89273, Quantity=0.60000000, Contract Size=100000.00000000, PnL=4.200000000000000000000000, PnL USD=3.078479231259757679706225125, Commission=6.00000000, Final PnL=-2.921520768740242320293774875
2025-06-27 05:37:56,963 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:37:56,963 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:37:58,851 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8927, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:37:58,852 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.8927, Quantity=0.60000000, Contract Size=100000.00000000, PnL=2.400000000000000000000000, PnL USD=1.759169671914856187879320961, Commission=6.00000000, Final PnL=-4.240830328085143812120679039
2025-06-27 05:38:01,086 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89272, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465942491076075085574392917, Commission=0.10000000, Final PnL=-0.08534057508923924914425607083
2025-06-27 05:38:01,087 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.89272, Quantity=0.60000000, Contract Size=100000.00000000, PnL=3.600000000000000000000000, PnL USD=2.638696483936935154033907250, Commission=6.00000000, Final PnL=-3.361303516063064845966092750
2025-06-27 05:38:03,626 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89268, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.020000000000000000000000, PnL USD=-0.01465963981264980319433551518, Commission=0.10000000, Final PnL=-0.1146596398126498031943355152
2025-06-27 05:38:03,627 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.89268, Quantity=0.60000000, Contract Size=100000.00000000, PnL=1.200000000000000000000000, PnL USD=0.8795783887589881916601309106, Commission=6.00000000, Final PnL=-5.120421611241011808339869089
2025-06-27 05:38:06,089 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89269, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007329443841801284118561083585, Commission=0.10000000, Final PnL=-0.1073294438418012841185610836
2025-06-27 05:38:06,090 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.89269, Quantity=0.60000000, Contract Size=100000.00000000, PnL=1.800000000000000000000000, PnL USD=1.319299891524231141340995045, Commission=6.00000000, Final PnL=-4.680700108475768858659004955
2025-06-27 05:38:08,139 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89274, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02931734560752869435201336871, Commission=0.10000000, Final PnL=-0.07068265439247130564798663129
2025-06-27 05:38:08,141 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.89274, Quantity=0.60000000, Contract Size=100000.00000000, PnL=4.800000000000000000000000, PnL USD=3.518081472903443322241604245, Commission=6.00000000, Final PnL=-2.481918527096556677758395755
2025-06-27 05:38:10,389 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89273, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198800920564652076401002653, Commission=0.10000000, Final PnL=-0.07801199079435347923598997347
2025-06-27 05:38:10,392 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.89273, Quantity=0.60000000, Contract Size=100000.00000000, PnL=4.200000000000000000000000, PnL USD=3.078321288790512906961403715, Commission=6.00000000, Final PnL=-2.921678711209487093038596285
2025-06-27 05:38:12,545 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:38:12,545 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:38:14,884 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89273, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198704230306939110550848700, Commission=0.10000000, Final PnL=-0.07801295769693060889449151300
2025-06-27 05:38:14,889 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89266000, Current=0.89273, Quantity=0.60000000, Contract Size=100000.00000000, PnL=4.200000000000000000000000, PnL USD=3.078185922429714754771188180, Commission=6.00000000, Final PnL=-2.921814077570285245228811820
2025-06-27 05:38:17,822 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89275, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.050000000000000000000000, PnL USD=0.03664507050511565184251414500, Commission=0.10000000, Final PnL=-0.06335492949488434815748585500
2025-06-27 05:38:17,827 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89276000, Current=0.89275, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-0.600000000000000000000000, PnL USD=-0.4397408460613878221101697400, Commission=6.00000000, Final PnL=-6.439740846061387822110169740
2025-06-27 05:38:17,907 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:38:17,942 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:38:17,943 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:38:19,654 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89273, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198929854137653008869017078, Commission=0.10000000, Final PnL=-0.07801070145862346991130982922
2025-06-27 05:38:19,656 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89276000, Current=0.89273, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-1.800000000000000000000000, PnL USD=-1.319357912482591805321410247, Commission=6.00000000, Final PnL=-7.319357912482591805321410247
2025-06-27 05:38:22,009 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:38:22,010 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:38:24,207 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:38:24,207 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:38:26,572 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8927, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:38:26,573 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89276000, Current=0.8927, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-3.600000000000000000000000, PnL USD=-2.638406402532870146431555341, Commission=6.00000000, Final PnL=-8.638406402532870146431555341
2025-06-27 05:38:28,811 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89267, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02198688116090732529590677562, Commission=0.10000000, Final PnL=-0.1219868811609073252959067756
2025-06-27 05:38:28,812 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89276000, Current=0.89267, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-5.400000000000000000000000, PnL USD=-3.957638608963318553263219612, Commission=6.00000000, Final PnL=-9.957638608963318553263219612
2025-06-27 05:38:30,657 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:38:30,660 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:38:30,663 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:38:31,528 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89274, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02931562669480966829368394823, Commission=0.10000000, Final PnL=-0.07068437330519033170631605177
2025-06-27 05:38:31,529 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89376000, Current=0.89274, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-61.200000000000000000000000, PnL USD=-44.85290884305879248933644079, Commission=6.00000000, Final PnL=-50.85290884305879248933644079
2025-06-27 05:38:33,394 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89276, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.060000000000000000000000, PnL USD=0.04397215097105166727739098571, Commission=0.10000000, Final PnL=-0.05602784902894833272260901429
2025-06-27 05:38:33,396 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89376000, Current=0.89276, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-60.000000000000000000000000, PnL USD=-43.97215097105166727739098571, Commission=6.00000000, Final PnL=-49.97215097105166727739098571
2025-06-27 05:38:35,524 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89264, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04397215097105166727739098571, Commission=0.10000000, Final PnL=-0.1439721509710516672773909857
2025-06-27 05:38:35,525 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89376000, Current=0.89264, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-67.200000000000000000000000, PnL USD=-49.24880908757786735067790399, Commission=6.00000000, Final PnL=-55.24880908757786735067790399
2025-06-27 05:38:38,098 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89266, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02931541184489215592867560298, Commission=0.10000000, Final PnL=-0.1293154118448921559286756030
2025-06-27 05:38:38,100 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89376000, Current=0.89266, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-66.000000000000000000000000, PnL USD=-48.37042954407205728231474492, Commission=6.00000000, Final PnL=-54.37042954407205728231474492
2025-06-27 05:38:40,283 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89267, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02198688116090732529590677562, Commission=0.10000000, Final PnL=-0.1219868811609073252959067756
2025-06-27 05:38:40,284 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89476000, Current=0.89267, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-125.400000000000000000000000, PnL USD=-91.90516325259261973689032211, Commission=6.00000000, Final PnL=-97.90516325259261973689032211
2025-06-27 05:38:40,933 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:38:40,941 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:38:40,945 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:38:42,535 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89264, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04397279549718574108818011257, Commission=0.10000000, Final PnL=-0.1439727954971857410881801126
2025-06-27 05:38:42,537 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89476000, Current=0.89264, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-127.200000000000000000000000, PnL USD=-93.22232645403377110694183865, Commission=6.00000000, Final PnL=-99.22232645403377110694183865
2025-06-27 05:38:45,206 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89263, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.070000000000000000000000, PnL USD=-0.05129595568029429222573151697, Commission=0.10000000, Final PnL=-0.1512959556802942922257315170
2025-06-27 05:38:45,211 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89476000, Current=0.89263, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-127.800000000000000000000000, PnL USD=-93.65175908488015066354982669, Commission=6.00000000, Final PnL=-99.65175908488015066354982669
2025-06-27 05:38:47,259 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89266, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02931218947399275988919992379, Commission=0.10000000, Final PnL=-0.1293121894739927598891999238
2025-06-27 05:38:47,260 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89476000, Current=0.89266, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-126.000000000000000000000000, PnL USD=-92.33339684307719365097975993, Commission=6.00000000, Final PnL=-98.33339684307719365097975993
2025-06-27 05:38:49,419 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89267, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02198414210549456991689994284, Commission=0.10000000, Final PnL=-0.1219841421054945699168999428
2025-06-27 05:38:49,420 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89476000, Current=0.89267, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-125.400000000000000000000000, PnL USD=-91.89371400096730225264176108, Commission=6.00000000, Final PnL=-97.89371400096730225264176108
2025-06-27 05:38:50,872 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:38:50,897 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:38:50,993 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:38:51,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:38:51,746 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:38:52,260 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5212900000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.8100000000000000000000000, PnL USD=-452.5909108014199520828890757, Commission=0.10000000, Final PnL=-452.6909108014199520828890757
2025-06-27 05:38:52,265 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:38:52,301 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:38:52,315 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:38:52,400 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:38:52,412 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:38:52,413 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:38:52,438 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:38:53,496 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8926700000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.03000000000000000000000000, PnL USD=-0.02198672002110725122026296117, Commission=0.10000000, Final PnL=-0.1219867200211072512202629612
2025-06-27 05:38:53,498 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89476000, Current=0.8926700000, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-125.4000000000000000000000000, PnL USD=-91.90448968822831010069917770, Commission=6.00000000, Final PnL=-97.90448968822831010069917770
2025-06-27 05:38:53,526 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:38:54,313 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89266, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02931562669480966829368394823, Commission=0.10000000, Final PnL=-0.1293156266948096682936839482
2025-06-27 05:38:54,314 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89576000, Current=0.89266, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-186.000000000000000000000000, PnL USD=-136.3176641308649575656303593, Commission=6.00000000, Final PnL=-142.3176641308649575656303593
2025-06-27 05:38:54,315 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 90.97686396834437276500637743% which is below threshold 100.0%
2025-06-27 05:38:56,156 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89267, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02198478652772281581145847074, Commission=0.10000000, Final PnL=-0.1219847865277228158114584707
2025-06-27 05:38:56,186 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89576000, Current=0.89267, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-185.400000000000000000000000, PnL USD=-135.8659807413270017148133492, Commission=6.00000000, Final PnL=-141.8659807413270017148133492
2025-06-27 05:38:56,187 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 91.09185613451543840202800619% which is below threshold 100.0%
2025-06-27 05:38:58,612 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89264, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.060000000000000000000000, PnL USD=-0.04396925083724781802592720158, Commission=0.10000000, Final PnL=-0.1439692508372478180259272016
2025-06-27 05:38:58,614 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89876000, Current=0.89264, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-367.200000000000000000000000, PnL USD=-269.0918151239566463186744737, Commission=6.00000000, Final PnL=-275.0918151239566463186744737
2025-06-27 05:38:58,614 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 57.71063538973522706197850517% which is below threshold 100.0%
2025-06-27 05:38:59,751 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:38:59,755 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:38:59,756 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:39:00,978 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8927, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:39:00,979 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89876000, Current=0.8927, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-363.600000000000000000000000, PnL USD=-266.4536600737217772371188416, Commission=6.00000000, Final PnL=-272.4536600737217772371188416
2025-06-27 05:39:00,980 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 58.38256071004289469721701491% which is below threshold 100.0%
2025-06-27 05:39:03,220 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89269, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.010000000000000000000000, PnL USD=-0.007328423289729214759444505515, Commission=0.10000000, Final PnL=-0.1073284232897292147594445055
2025-06-27 05:39:03,223 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89876000, Current=0.89269, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-364.200000000000000000000000, PnL USD=-266.9011762119380015389688908, Commission=6.00000000, Final PnL=-272.9011762119380015389688908
2025-06-27 05:39:03,223 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 58.26861312843456904233075249% which is below threshold 100.0%
2025-06-27 05:39:05,870 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8927, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-27 05:39:05,871 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89876000, Current=0.8927, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-363.600000000000000000000000, PnL USD=-266.4614708145542486534022205, Commission=6.00000000, Final PnL=-272.4614708145542486534022205
2025-06-27 05:39:05,871 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 58.38060396458795784918650688% which is below threshold 100.0%
2025-06-27 05:39:07,939 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:39:07,940 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89271, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007328476995910709836281823911, Commission=0.10000000, Final PnL=-0.09267152300408929016371817609
2025-06-27 05:39:07,943 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:39:07,944 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:39:07,971 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89886000, Current=0.89271, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-369.000000000000000000000000, PnL USD=-270.4208011491051929587993023, Commission=6.00000000, Final PnL=-276.4208011491051929587993023
2025-06-27 05:39:07,972 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 57.39054913643077329234085214% which is below threshold 100.0%
2025-06-27 05:39:10,499 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89273, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198543098773212950884547173, Commission=0.10000000, Final PnL=-0.07801456901226787049115452827
2025-06-27 05:39:10,500 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89886000, Current=0.89273, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-367.800000000000000000000000, PnL USD=-269.5413839095959077784454835, Commission=6.00000000, Final PnL=-275.5413839095959077784454835
2025-06-27 05:39:10,500 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 57.61453245018208391188299772% which is below threshold 100.0%
2025-06-27 05:39:12,432 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89266, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02931347833733950870610306619, Commission=0.10000000, Final PnL=-0.1293134783373395087061030662
2025-06-27 05:39:12,434 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89886000, Current=0.89266, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-372.000000000000000000000000, PnL USD=-272.6153485372574309667585156, Commission=6.00000000, Final PnL=-278.6153485372574309667585156
2025-06-27 05:39:12,434 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 56.83159196442749443208041218% which is below threshold 100.0%
2025-06-27 05:39:14,789 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89273, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198639774859287054409005629, Commission=0.10000000, Final PnL=-0.07801360225140712945590994371
2025-06-27 05:39:14,790 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89886000, Current=0.89273, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-367.800000000000000000000000, PnL USD=-269.5532363977485928705440901, Commission=6.00000000, Final PnL=-275.5532363977485928705440901
2025-06-27 05:39:14,790 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 57.61156340907382819350151564% which is below threshold 100.0%
2025-06-27 05:39:15,615 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:39:15,621 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:39:15,622 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:39:17,244 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89267, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.030000000000000000000000, PnL USD=-0.02198736459447970566247929523, Commission=0.10000000, Final PnL=-0.1219873645944797056624792952
2025-06-27 05:39:17,261 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89896000, Current=0.89267, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-377.400000000000000000000000, PnL USD=-276.6010465985546972339895340, Commission=6.00000000, Final PnL=-282.6010465985546972339895340
2025-06-27 05:39:17,261 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 55.83493090584232859692561733% which is below threshold 100.0%
2025-06-27 05:39:19,493 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89271, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.010000000000000000000000, PnL USD=0.007329282683103804630640799185, Commission=0.10000000, Final PnL=-0.09267071731689619536935920082
2025-06-27 05:39:19,494 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89896000, Current=0.89271, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-375.000000000000000000000000, PnL USD=-274.8481006163926736490299694, Commission=6.00000000, Final PnL=-280.8481006163926736490299694
2025-06-27 05:39:19,494 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 56.28142303436892305423771110% which is below threshold 100.0%
2025-06-27 05:39:21,807 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89273, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.030000000000000000000000, PnL USD=0.02198784804931141389192239755, Commission=0.10000000, Final PnL=-0.07801215195068858610807760245
2025-06-27 05:39:21,810 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89896000, Current=0.89273, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-373.800000000000000000000000, PnL USD=-273.9685866944202170933530735, Commission=6.00000000, Final PnL=-279.9685866944202170933530735
2025-06-27 05:39:21,810 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 56.50543097267557539908781945% which is below threshold 100.0%
2025-06-27 05:39:25,399 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:39:25,503 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:39:25,594 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:39:25,662 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:39:25,770 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:39:25,829 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:39:25,880 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:39:25,972 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:39:26,021 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:39:26,073 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:39:26,108 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:39:26,142 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:39:26,202 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:39:26,249 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:39:26,290 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:39:26,330 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:39:26,376 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:39:26,416 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:39:26,465 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:39:26,506 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:39:26,556 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:39:26,586 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:39:26,609 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:39:26,629 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:39:26,652 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:39:26,679 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:39:26,707 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:39:26,728 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:39:26,749 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:39:26,769 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:39:26,791 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:39:26,826 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:39:26,843 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:39:26,864 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:39:26,880 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:39:26,915 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:39:26,936 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:39:26,958 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:39:26,985 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:39:27,011 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:39:27,034 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:39:27,054 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:39:27,098 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:39:27,134 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:39:27,156 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:39:27,183 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:39:27,204 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:39:27,225 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:39:27,246 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:39:27,272 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:39:27,310 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:39:27,330 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:39:27,347 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:39:27,374 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:39:27,404 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:39:27,443 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:39:27,460 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:39:27,482 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:39:27,510 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:39:27,535 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:39:27,568 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:39:27,596 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:39:27,629 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:39:27,651 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:39:27,673 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:39:27,694 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:39:27,721 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:39:27,749 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:39:27,783 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:39:27,814 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:39:27,893 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:39:27,943 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:39:27,988 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:39:28,013 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:39:28,045 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:39:28,070 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:39:28,099 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:39:28,125 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:39:28,157 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:39:30,983 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89272, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465867280376434717600668435, Commission=0.10000000, Final PnL=-0.08534132719623565282399331565
2025-06-27 05:39:30,985 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89896000, Current=0.89272, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-374.400000000000000000000000, PnL USD=-274.4103548864685791348451311, Commission=6.00000000, Final PnL=-280.4103548864685791348451311
2025-06-27 05:39:30,985 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 56.39292317717643741070994203% which is below threshold 100.0%
2025-06-27 05:39:33,330 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89274, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02931390798364283934512729565, Commission=0.10000000, Final PnL=-0.07068609201635716065487270435
2025-06-27 05:39:33,332 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89896000, Current=0.89274, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-373.200000000000000000000000, PnL USD=-273.4987614873876910900376684, Commission=6.00000000, Final PnL=-279.4987614873876910900376684
2025-06-27 05:39:33,332 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 56.62496682631358863374187912% which is below threshold 100.0%
2025-06-27 05:39:35,676 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89279, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.090000000000000000000000, PnL USD=0.06595629296319638852653641520, Commission=0.10000000, Final PnL=-0.03404370703680361147346358480
2025-06-27 05:39:35,677 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89896000, Current=0.89279, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-370.200000000000000000000000, PnL USD=-271.3002183886144781391531212, Commission=6.00000000, Final PnL=-277.3002183886144781391531212
2025-06-27 05:39:35,677 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 57.18492511069186518259724308% which is below threshold 100.0%
2025-06-27 05:39:37,943 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89278, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.080000000000000000000000, PnL USD=0.05862695667467901741220613238, Commission=0.10000000, Final PnL=-0.04137304332532098258779386762
2025-06-27 05:39:37,944 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89896000, Current=0.89278, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-370.800000000000000000000000, PnL USD=-271.7359441871372457055754236, Commission=6.00000000, Final PnL=-277.7359441871372457055754236
2025-06-27 05:39:37,944 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 57.07393101423890405387097790% which is below threshold 100.0%
2025-06-27 05:39:40,486 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:39:40,486 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:39:42,960 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89282, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.120000000000000000000000, PnL USD=0.08795010297491223312640628550, Commission=0.10000000, Final PnL=-0.01204989702508776687359371450
2025-06-27 05:39:42,963 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89906000, Current=0.89282, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-374.400000000000000000000000, PnL USD=-274.4043212817261673543876108, Commission=6.00000000, Final PnL=-280.4043212817261673543876108
2025-06-27 05:39:42,963 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 56.41279567133019637716732107% which is below threshold 100.0%
2025-06-27 05:39:44,995 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89283, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09527788160623850252486386257, Commission=0.10000000, Final PnL=-0.00472211839376149747513613743
2025-06-27 05:39:44,997 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89906000, Current=0.89283, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-373.800000000000000000000000, PnL USD=-273.9605549570150172599547064, Commission=6.00000000, Final PnL=-279.9605549570150172599547064
2025-06-27 05:39:44,998 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 56.52580368880206960507306599% which is below threshold 100.0%
2025-06-27 05:39:47,466 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89272, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.020000000000000000000000, PnL USD=0.01465813563172900038844059424, Commission=0.10000000, Final PnL=-0.08534186436827099961155940576
2025-06-27 05:39:47,467 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89906000, Current=0.89272, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-380.400000000000000000000000, PnL USD=-278.7977397154855873881401025, Commission=6.00000000, Final PnL=-284.7977397154855873881401025
2025-06-27 05:39:47,467 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 55.29379614704164682021402863% which is below threshold 100.0%
2025-06-27 05:39:49,610 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89282, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.120000000000000000000000, PnL USD=0.08794752464362930118362710250, Commission=0.10000000, Final PnL=-0.01205247535637069881637289750
2025-06-27 05:39:49,612 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89906000, Current=0.89282, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-374.400000000000000000000000, PnL USD=-274.3962768881234196929165598, Commission=6.00000000, Final PnL=-280.3962768881234196929165598
2025-06-27 05:39:49,612 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 56.41481030551399393949121109% which is below threshold 100.0%
2025-06-27 05:39:50,894 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:39:50,993 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:39:51,120 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:39:52,367 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89288, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.180000000000000000000000, PnL USD=0.1319212869654439517754406537, Commission=0.10000000, Final PnL=0.0319212869654439517754406537
2025-06-27 05:39:52,369 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89936000, Current=0.89288, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-388.800000000000000000000000, PnL USD=-284.9499798453589358349518121, Commission=6.00000000, Final PnL=-290.9499798453589358349518121
2025-06-27 05:39:52,369 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 53.78191474850477443616094110% which is below threshold 100.0%
2025-06-27 05:39:52,786 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5212600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.8400000000000000000000000, PnL USD=-452.8046178943405697076170159, Commission=0.10000000, Final PnL=-452.9046178943405697076170159
2025-06-27 05:39:52,791 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:39:52,848 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:39:52,861 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:39:52,920 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:39:54,006 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8928800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.18000000000000000000000000, PnL USD=0.1319222538184163466330509220, Commission=0.10000000, Final PnL=0.0319222538184163466330509220
2025-06-27 05:39:54,008 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89936000, Current=0.8928800000, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-388.8000000000000000000000000, PnL USD=-284.9520682477793087273899915, Commission=6.00000000, Final PnL=-290.9520682477793087273899915
2025-06-27 05:39:54,008 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 53.78139180450412295995266663% which is below threshold 100.0%
2025-06-27 05:39:54,013 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:39:54,329 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89287, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1245932397173932162645480930, Commission=0.10000000, Final PnL=0.0245932397173932162645480930
2025-06-27 05:39:54,331 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89936000, Current=0.89287, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-389.400000000000000000000000, PnL USD=-285.3918090938406965495001612, Commission=6.00000000, Final PnL=-291.3918090938406965495001612
2025-06-27 05:39:54,332 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 53.66939193974414326396382165% which is below threshold 100.0%
2025-06-27 05:39:56,052 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89274, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.040000000000000000000000, PnL USD=0.02931627126345800077688118848, Commission=0.10000000, Final PnL=-0.07068372873654199922311881152
2025-06-27 05:39:56,053 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89936000, Current=0.89274, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-397.200000000000000000000000, PnL USD=-291.1105736461379477144302016, Commission=6.00000000, Final PnL=-297.1105736461379477144302016
2025-06-27 05:39:56,053 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.21285925423391294093911857% which is below threshold 100.0%
2025-06-27 05:39:58,342 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89287, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1245941528696965033017450510, Commission=0.10000000, Final PnL=0.0245941528696965033017450510
2025-06-27 05:39:58,343 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89936000, Current=0.89287, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-389.400000000000000000000000, PnL USD=-285.3939007497636375629383699, Commission=6.00000000, Final PnL=-291.3939007497636375629383699
2025-06-27 05:39:58,343 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 53.66886816722350350486343543% which is below threshold 100.0%
2025-06-27 05:40:00,966 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89289, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.190000000000000000000000, PnL USD=0.1392492268003459243949987541, Commission=0.10000000, Final PnL=0.0392492268003459243949987541
2025-06-27 05:40:00,966 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89936000, Current=0.89289, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-388.200000000000000000000000, PnL USD=-284.5081570731278307902027176, Commission=6.00000000, Final PnL=-290.5081570731278307902027176
2025-06-27 05:40:00,967 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 53.89443590792707746929686129% which is below threshold 100.0%
2025-06-27 05:40:03,025 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89287, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1245923265784748433434717285, Commission=0.10000000, Final PnL=0.0245923265784748433434717285
2025-06-27 05:40:03,035 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89946000, Current=0.89287, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-395.400000000000000000000000, PnL USD=-289.7870937007585474000513027, Commission=6.00000000, Final PnL=-295.7870937007585474000513027
2025-06-27 05:40:03,035 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.56828576441614536245012626% which is below threshold 100.0%
2025-06-27 05:40:05,576 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89282, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.120000000000000000000000, PnL USD=0.08794623553467646778602680894, Commission=0.10000000, Final PnL=-0.01205376446532353221397319106
2025-06-27 05:40:05,578 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89946000, Current=0.89282, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-398.400000000000000000000000, PnL USD=-291.9815019751258730496090057, Commission=6.00000000, Final PnL=-297.9815019751258730496090057
2025-06-27 05:40:05,578 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.00936240709692697802365436% which is below threshold 100.0%
2025-06-27 05:40:07,726 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8929, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.200000000000000000000000, PnL USD=0.1465781334740483414684197411, Commission=0.10000000, Final PnL=0.0465781334740483414684197411
2025-06-27 05:40:07,727 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89946000, Current=0.8929, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-393.600000000000000000000000, PnL USD=-288.4657666769271360098500506, Commission=6.00000000, Final PnL=-294.4657666769271360098500506
2025-06-27 05:40:07,727 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.90481226458574350066847937% which is below threshold 100.0%
2025-06-27 05:40:09,980 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89283, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09527648503059840961559602770, Commission=0.10000000, Final PnL=-0.00472351496940159038440397230
2025-06-27 05:40:09,982 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89946000, Current=0.89283, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-397.800000000000000000000000, PnL USD=-291.5460441936311334237238448, Commission=6.00000000, Final PnL=-297.5460441936311334237238448
2025-06-27 05:40:09,982 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.12028958874651526564915981% which is below threshold 100.0%
2025-06-27 05:40:12,114 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89286, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1172599286180184537812662607, Commission=0.10000000, Final PnL=0.0172599286180184537812662607
2025-06-27 05:40:12,115 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89946000, Current=0.89286, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-396.000000000000000000000000, PnL USD=-290.2183233295956731086339951, Commission=6.00000000, Final PnL=-296.2183233295956731086339951
2025-06-27 05:40:12,115 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.45841728061285801667141098% which is below threshold 100.0%
2025-06-27 05:40:14,588 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89283, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.130000000000000000000000, PnL USD=0.09527439024390243902439024390, Commission=0.10000000, Final PnL=-0.00472560975609756097560975610
2025-06-27 05:40:14,589 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89956000, Current=0.89283, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-403.800000000000000000000000, PnL USD=-295.9369136960600375234521576, Commission=6.00000000, Final PnL=-301.9369136960600375234521576
2025-06-27 05:40:14,589 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.02028918861233682781076549% which is below threshold 100.0%
2025-06-27 05:40:16,942 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89286, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1172625067792386731747357929, Commission=0.10000000, Final PnL=0.0172625067792386731747357929
2025-06-27 05:40:16,944 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89956000, Current=0.89286, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-402.000000000000000000000000, PnL USD=-294.6220482828371663515236797, Commission=6.00000000, Final PnL=-300.6220482828371663515236797
2025-06-27 05:40:16,945 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.35519750581007398392941757% which is below threshold 100.0%
2025-06-27 05:40:19,198 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89284, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.140000000000000000000000, PnL USD=0.1026039414571225457503646104, Commission=0.10000000, Final PnL=0.0026039414571225457503646104
2025-06-27 05:40:19,203 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89956000, Current=0.89284, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-403.200000000000000000000000, PnL USD=-295.4993513965129317610500781, Commission=6.00000000, Final PnL=-301.4993513965129317610500781
2025-06-27 05:40:19,204 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.13174341883012019558090200% which is below threshold 100.0%
2025-06-27 05:40:21,537 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89286, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1172616473795686237147024119, Commission=0.10000000, Final PnL=0.0172616473795686237147024119
2025-06-27 05:40:21,538 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89956000, Current=0.89286, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-402.000000000000000000000000, PnL USD=-294.6198890411661670831898100, Commission=6.00000000, Final PnL=-300.6198890411661670831898100
2025-06-27 05:40:21,538 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.35573822336683657101608147% which is below threshold 100.0%
2025-06-27 05:40:23,677 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:40:23,678 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:40:26,167 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89287, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.170000000000000000000000, PnL USD=0.1245895872420262664165103189, Commission=0.10000000, Final PnL=0.0245895872420262664165103189
2025-06-27 05:40:26,168 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89956000, Current=0.89287, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-401.400000000000000000000000, PnL USD=-294.1780018761726078799249531, Commission=6.00000000, Final PnL=-300.1780018761726078799249531
2025-06-27 05:40:26,168 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.46827551445985880364044322% which is below threshold 100.0%
2025-06-27 05:40:28,423 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8929, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.200000000000000000000000, PnL USD=0.1465749107725230672265828258, Commission=0.10000000, Final PnL=0.0465749107725230672265828258
2025-06-27 05:40:28,425 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89956000, Current=0.8929, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-399.600000000000000000000000, PnL USD=-292.8566717235010883187124860, Commission=6.00000000, Final PnL=-298.8566717235010883187124860
2025-06-27 05:40:28,425 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.80480267737340850978633084% which is below threshold 100.0%
2025-06-27 05:40:30,634 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:40:30,634 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:40:33,019 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89291, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.210000000000000000000000, PnL USD=0.1539036563111492205879119671, Commission=0.10000000, Final PnL=0.0539036563111492205879119671
2025-06-27 05:40:33,020 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89960000, Current=0.89291, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-401.400000000000000000000000, PnL USD=-294.1758459204537959237517314, Commission=6.00000000, Final PnL=-300.1758459204537959237517314
2025-06-27 05:40:33,020 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.47615937967716844874018103% which is below threshold 100.0%
2025-06-27 05:40:33,982 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:40:33,989 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:40:33,991 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:40:35,476 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89294, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.240000000000000000000000, PnL USD=0.1758898929270276806718993910, Commission=0.10000000, Final PnL=0.0758898929270276806718993910
2025-06-27 05:40:35,478 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89960000, Current=0.89294, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-399.600000000000000000000000, PnL USD=-292.8566717235010883187124860, Commission=6.00000000, Final PnL=-298.8566717235010883187124860
2025-06-27 05:40:35,478 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.81214666167946974020076995% which is below threshold 100.0%
2025-06-27 05:40:37,524 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89295, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.250000000000000000000000, PnL USD=0.1832226668425604268355246764, Commission=0.10000000, Final PnL=0.0832226668425604268355246764
2025-06-27 05:40:37,527 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89960000, Current=0.89295, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-399.000000000000000000000000, PnL USD=-292.4233762807264412294973836, Commission=6.00000000, Final PnL=-298.4233762807264412294973836
2025-06-27 05:40:37,527 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.92253276702059753922843428% which is below threshold 100.0%
2025-06-27 05:40:39,880 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89296, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.260000000000000000000000, PnL USD=0.1905515735162628439089456635, Commission=0.10000000, Final PnL=0.0905515735162628439089456635
2025-06-27 05:40:39,882 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89960000, Current=0.89296, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-398.400000000000000000000000, PnL USD=-291.9836418803042962050921244, Commission=6.00000000, Final PnL=-297.9836418803042962050921244
2025-06-27 05:40:39,883 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.03453099010746464885057026% which is below threshold 100.0%
2025-06-27 05:40:42,346 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89286, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1172607879924953095684803002, Commission=0.10000000, Final PnL=0.0172607879924953095684803002
2025-06-27 05:40:42,348 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89960000, Current=0.89286, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-404.400000000000000000000000, PnL USD=-296.3766416510318949343339587, Commission=6.00000000, Final PnL=-302.3766416510318949343339587
2025-06-27 05:40:42,348 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 50.91563664527910423509645555% which is below threshold 100.0%
2025-06-27 05:40:44,463 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89304, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.340000000000000000000000, PnL USD=0.2491828269058821804963135599, Commission=0.10000000, Final PnL=0.1491828269058821804963135599
2025-06-27 05:40:44,464 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89965000, Current=0.89304, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-396.600000000000000000000000, PnL USD=-290.6644386790378611318763467, Commission=6.00000000, Final PnL=-296.6644386790378611318763467
2025-06-27 05:40:44,464 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.37970584158830098670239920% which is below threshold 100.0%
2025-06-27 05:40:44,650 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:40:44,651 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:40:44,666 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:40:47,049 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89286, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.160000000000000000000000, PnL USD=0.1172625067792386731747357929, Commission=0.10000000, Final PnL=0.0172625067792386731747357929
2025-06-27 05:40:47,052 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89965000, Current=0.89286, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-407.400000000000000000000000, PnL USD=-298.5796578866364715711710127, Commission=6.00000000, Final PnL=-304.5796578866364715711710127
2025-06-27 05:40:47,052 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 50.36373782602469301350395147% which is below threshold 100.0%
2025-06-27 05:40:49,402 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89299, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.290000000000000000000000, PnL USD=0.2125382935373700951292086247, Commission=0.10000000, Final PnL=0.1125382935373700951292086247
2025-06-27 05:40:49,403 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89965000, Current=0.89299, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-399.600000000000000000000000, PnL USD=-292.8631106811485862539026428, Commission=6.00000000, Final PnL=-298.8631106811485862539026428
2025-06-27 05:40:49,403 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.81971472615396543859171927% which is below threshold 100.0%
2025-06-27 05:40:50,882 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:40:50,930 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:40:51,031 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:40:51,967 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89296, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.260000000000000000000000, PnL USD=0.1905473840042799873945576736, Commission=0.10000000, Final PnL=0.0905473840042799873945576736
2025-06-27 05:40:51,972 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89965000, Current=0.89296, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-401.400000000000000000000000, PnL USD=-294.1758459204537959237517314, Commission=6.00000000, Final PnL=-300.1758459204537959237517314
2025-06-27 05:40:51,972 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.48533936005974498675822990% which is below threshold 100.0%
2025-06-27 05:40:52,583 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5214600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.6400000000000000000000000, PnL USD=-452.4173921770328925910128710, Commission=0.10000000, Final PnL=-452.5173921770328925910128710
2025-06-27 05:40:52,598 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:40:52,650 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:40:52,660 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:40:52,715 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:40:53,803 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8929600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.26000000000000000000000000, PnL USD=0.1905487804878048780487804878, Commission=0.10000000, Final PnL=0.0905487804878048780487804878
2025-06-27 05:40:53,807 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89965000, Current=0.8929600000, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-401.4000000000000000000000000, PnL USD=-294.1780018761726078799249531, Commission=6.00000000, Final PnL=-300.1780018761726078799249531
2025-06-27 05:40:53,808 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.48479960024931658143743954% which is below threshold 100.0%
2025-06-27 05:40:53,811 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:40:54,327 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:40:54,327 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:40:56,042 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:40:56,042 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:40:58,309 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89298, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.280000000000000000000000, PnL USD=0.2051988596806226319685166321, Commission=0.10000000, Final PnL=0.1051988596806226319685166321
2025-06-27 05:40:58,311 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89965000, Current=0.89298, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-400.200000000000000000000000, PnL USD=-293.2877987292327761207155577, Commission=6.00000000, Final PnL=-299.2877987292327761207155577
2025-06-27 05:40:58,311 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.71148327540843412863014728% which is below threshold 100.0%
2025-06-27 05:40:59,812 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:40:59,825 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:40:59,825 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:41:00,684 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89298, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.280000000000000000000000, PnL USD=0.2052093868636676780557876376, Commission=0.10000000, Final PnL=0.1052093868636676780557876376
2025-06-27 05:41:00,686 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89965000, Current=0.89298, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-400.200000000000000000000000, PnL USD=-293.3028450815707312783079020, Commission=6.00000000, Final PnL=-299.3028450815707312783079020
2025-06-27 05:41:00,686 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.70771650306709832896958329% which is below threshold 100.0%
2025-06-27 05:41:01,670 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:41:01,672 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:41:01,673 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:41:03,122 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89297, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.270000000000000000000000, PnL USD=0.1978804801899652609823666505, Commission=0.10000000, Final PnL=0.0978804801899652609823666505
2025-06-27 05:41:03,123 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89965000, Current=0.89297, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-400.800000000000000000000000, PnL USD=-293.7425794819928763027131613, Commission=6.00000000, Final PnL=-299.7425794819928763027131613
2025-06-27 05:41:03,123 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.59571827998023121934744730% which is below threshold 100.0%
2025-06-27 05:41:04,135 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:41:04,137 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:41:04,137 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:41:05,070 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89296, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.260000000000000000000000, PnL USD=0.1905487804878048780487804878, Commission=0.10000000, Final PnL=0.0905487804878048780487804878
2025-06-27 05:41:05,071 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89965000, Current=0.89296, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-401.400000000000000000000000, PnL USD=-294.1780018761726078799249531, Commission=6.00000000, Final PnL=-300.1780018761726078799249531
2025-06-27 05:41:05,071 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.48479960024931658143743954% which is below threshold 100.0%
2025-06-27 05:41:07,537 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89299, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.290000000000000000000000, PnL USD=0.2125258328814105852521728934, Commission=0.10000000, Final PnL=0.1125258328814105852521728934
2025-06-27 05:41:07,538 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89965000, Current=0.89299, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-399.600000000000000000000000, PnL USD=-292.8459407565919650578216835, Commission=6.00000000, Final PnL=-298.8459407565919650578216835
2025-06-27 05:41:07,538 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.82401301107033232142457835% which is below threshold 100.0%
2025-06-27 05:41:09,637 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:41:09,637 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:41:11,933 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.893, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.300000000000000000000000, PnL USD=0.2198462541862390901296360079, Commission=0.10000000, Final PnL=0.1198462541862390901296360079
2025-06-27 05:41:11,934 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89965000, Current=0.893, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-399.000000000000000000000000, PnL USD=-292.3955180676979898724158905, Commission=6.00000000, Final PnL=-298.3955180676979898724158905
2025-06-27 05:41:11,934 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.93868673660050835927392978% which is below threshold 100.0%
2025-06-27 05:41:14,297 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:41:14,297 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:41:16,537 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:41:16,537 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:41:18,751 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.893, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.300000000000000000000000, PnL USD=0.2198494763918303934572795826, Commission=0.10000000, Final PnL=0.1198494763918303934572795826
2025-06-27 05:41:18,752 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89968000, Current=0.893, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-400.800000000000000000000000, PnL USD=-293.7189004594854056589255223, Commission=6.00000000, Final PnL=-299.7189004594854056589255223
2025-06-27 05:41:18,752 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.60715401380525208170247195% which is below threshold 100.0%
2025-06-27 05:41:21,063 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89296, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.260000000000000000000000, PnL USD=0.1905348165735977370326400797, Commission=0.10000000, Final PnL=0.0905348165735977370326400797
2025-06-27 05:41:21,064 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89968000, Current=0.89296, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-403.200000000000000000000000, PnL USD=-295.4755309325946445060018467, Commission=6.00000000, Final PnL=-301.4755309325946445060018467
2025-06-27 05:41:21,064 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.15973934513589529048545567% which is below threshold 100.0%
2025-06-27 05:41:23,445 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.893, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.300000000000000000000000, PnL USD=0.2198478652772281581145847074, Commission=0.10000000, Final PnL=0.1198478652772281581145847074
2025-06-27 05:41:23,445 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89968000, Current=0.893, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-400.800000000000000000000000, PnL USD=-293.7167480103768192410851691, Commission=6.00000000, Final PnL=-299.7167480103768192410851691
2025-06-27 05:41:23,445 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.60769284137094694416649939% which is below threshold 100.0%
2025-06-27 05:41:25,600 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89304, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.340000000000000000000000, PnL USD=0.2491627399107411125849168603, Commission=0.10000000, Final PnL=0.1491627399107411125849168603
2025-06-27 05:41:25,601 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89968000, Current=0.89304, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-398.400000000000000000000000, PnL USD=-291.9601046483507625112672857, Commission=6.00000000, Final PnL=-297.9601046483507625112672857
2025-06-27 05:41:25,602 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.05511079278502357424596818% which is below threshold 100.0%
2025-06-27 05:41:27,905 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8931, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.400000000000000000000000, PnL USD=0.2931347833733950870610306619, Commission=0.10000000, Final PnL=0.1931347833733950870610306619
2025-06-27 05:41:27,906 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89968000, Current=0.8931, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-394.800000000000000000000000, PnL USD=-289.3240311895409509292372633, Commission=6.00000000, Final PnL=-295.3240311895409509292372633
2025-06-27 05:41:27,906 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.72651533277361629326446562% which is below threshold 100.0%
2025-06-27 05:41:30,368 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8931, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.400000000000000000000000, PnL USD=0.2931519699812382739212007505, Commission=0.10000000, Final PnL=0.1931519699812382739212007505
2025-06-27 05:41:30,369 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89970000, Current=0.8931, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-396.000000000000000000000000, PnL USD=-290.2204502814258911819887430, Commission=6.00000000, Final PnL=-296.2204502814258911819887430
2025-06-27 05:41:30,369 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.50194888106705090360810126% which is below threshold 100.0%
2025-06-27 05:41:32,615 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8931, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.400000000000000000000000, PnL USD=0.2931326351891071912763727768, Commission=0.10000000, Final PnL=0.1931326351891071912763727768
2025-06-27 05:41:32,616 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89970000, Current=0.8931, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-396.000000000000000000000000, PnL USD=-290.2013088372161193636090490, Commission=6.00000000, Final PnL=-296.2013088372161193636090490
2025-06-27 05:41:32,616 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.50673934864167843967916522% which is below threshold 100.0%
2025-06-27 05:41:34,806 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.893, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.300000000000000000000000, PnL USD=0.2198655888366911694650670224, Commission=0.10000000, Final PnL=0.1198655888366911694650670224
2025-06-27 05:41:34,807 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89970000, Current=0.893, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-402.000000000000000000000000, PnL USD=-294.6198890411661670831898100, Commission=6.00000000, Final PnL=-300.6198890411661670831898100
2025-06-27 05:41:34,807 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.38144254519891877803323321% which is below threshold 100.0%
2025-06-27 05:41:37,232 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89316, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.460000000000000000000000, PnL USD=0.3371346486470639969511301340, Commission=0.10000000, Final PnL=0.2371346486470639969511301340
2025-06-27 05:41:37,233 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89970000, Current=0.89316, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-392.400000000000000000000000, PnL USD=-287.5905133241476356600510099, Commission=6.00000000, Final PnL=-293.5905133241476356600510099
2025-06-27 05:41:37,233 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 53.17181877007275805719370699% which is below threshold 100.0%
2025-06-27 05:41:39,593 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89318, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.480000000000000000000000, PnL USD=0.3517978335116752905996687237, Commission=0.10000000, Final PnL=0.2517978335116752905996687237
2025-06-27 05:41:39,595 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89979000, Current=0.89318, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-396.600000000000000000000000, PnL USD=-290.6729599390217088579762830, Commission=6.00000000, Final PnL=-296.6729599390217088579762830
2025-06-27 05:41:39,596 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.40327819086854383661682634% which is below threshold 100.0%
2025-06-27 05:41:41,626 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89317, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.470000000000000000000000, PnL USD=0.3444838605646603535723709285, Commission=0.10000000, Final PnL=0.2444838605646603535723709285
2025-06-27 05:41:41,627 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89979000, Current=0.89317, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-397.200000000000000000000000, PnL USD=-291.1255093963470051892462400, Commission=6.00000000, Final PnL=-297.1255093963470051892462400
2025-06-27 05:41:41,628 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.28807328311688131982015956% which is below threshold 100.0%
2025-06-27 05:41:43,935 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89317, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.470000000000000000000000, PnL USD=0.3444813357080557326824834905, Commission=0.10000000, Final PnL=0.2444813357080557326824834905
2025-06-27 05:41:43,936 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89979000, Current=0.89317, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-397.200000000000000000000000, PnL USD=-291.1233756239143340882605158, Commission=6.00000000, Final PnL=-297.1233756239143340882605158
2025-06-27 05:41:43,936 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.28860720289443636656611662% which is below threshold 100.0%
2025-06-27 05:41:46,439 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.893, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.300000000000000000000000, PnL USD=0.2198800920564652076401002653, Commission=0.10000000, Final PnL=0.1198800920564652076401002653
2025-06-27 05:41:46,440 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89979000, Current=0.893, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-407.400000000000000000000000, PnL USD=-298.5971650126797519752561603, Commission=6.00000000, Final PnL=-304.5971650126797519752561603
2025-06-27 05:41:46,440 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 50.38505968368783055650072400% which is below threshold 100.0%
2025-06-27 05:41:48,809 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8932, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.500000000000000000000000, PnL USD=0.3664668200941086794001671089, Commission=0.10000000, Final PnL=0.2664668200941086794001671089
2025-06-27 05:41:48,810 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89979000, Current=0.8932, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-395.400000000000000000000000, PnL USD=-289.8019613304211436696521497, Commission=6.00000000, Final PnL=-295.8019613304211436696521497
2025-06-27 05:41:48,810 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.62515548504971942023398988% which is below threshold 100.0%
2025-06-27 05:41:51,045 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89321, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.510000000000000000000000, PnL USD=0.3737988961938477099320565536, Commission=0.10000000, Final PnL=0.2737988961938477099320565536
2025-06-27 05:41:51,046 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:41:51,049 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89979000, Current=0.89321, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-394.800000000000000000000000, PnL USD=-289.3643219947668154532861321, Commission=6.00000000, Final PnL=-295.3643219947668154532861321
2025-06-27 05:41:51,050 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.73662964687402165910412218% which is below threshold 100.0%
2025-06-27 05:41:51,056 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:41:51,093 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:41:51,663 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5214800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.6200000000000000000000000, PnL USD=-452.5342268067110893598865590, Commission=0.10000000, Final PnL=-452.6342268067110893598865590
2025-06-27 05:41:51,665 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:41:51,679 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:41:51,683 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:41:51,706 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:41:52,274 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8932100000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.51000000000000000000000000, PnL USD=0.3737988961938477099320565536, Commission=0.10000000, Final PnL=0.2737988961938477099320565536
2025-06-27 05:41:52,274 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89979000, Current=0.8932100000, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-394.8000000000000000000000000, PnL USD=-289.3643219947668154532861321, Commission=6.00000000, Final PnL=-295.3643219947668154532861321
2025-06-27 05:41:52,274 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.73662964687402165910412218% which is below threshold 100.0%
2025-06-27 05:41:52,275 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:41:53,299 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8931, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.400000000000000000000000, PnL USD=0.2931777536720513647424433434, Commission=0.10000000, Final PnL=0.1931777536720513647424433434
2025-06-27 05:41:53,300 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89979000, Current=0.8931, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-401.400000000000000000000000, PnL USD=-294.2038758099035445190418951, Commission=6.00000000, Final PnL=-300.2038758099035445190418951
2025-06-27 05:41:53,300 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.50402825958075678174726262% which is below threshold 100.0%
2025-06-27 05:41:55,555 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89321, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.510000000000000000000000, PnL USD=0.3738016359318654900466152628, Commission=0.10000000, Final PnL=0.2738016359318654900466152628
2025-06-27 05:41:55,555 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89979000, Current=0.89321, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-394.800000000000000000000000, PnL USD=-289.3664428743146970007915799, Commission=6.00000000, Final PnL=-295.3664428743146970007915799
2025-06-27 05:41:55,556 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.73609901085180962729038640% which is below threshold 100.0%
2025-06-27 05:41:57,996 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:41:57,996 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:42:00,360 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89322, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.520000000000000000000000, PnL USD=0.3811338732729871367317770367, Commission=0.10000000, Final PnL=0.2811338732729871367317770367
2025-06-27 05:42:00,362 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89983000, Current=0.89322, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-396.600000000000000000000000, PnL USD=-290.6878733462821123611976399, Commission=6.00000000, Final PnL=-296.6878733462821123611976399
2025-06-27 05:42:00,362 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.40689134629127308553602152% which is below threshold 100.0%
2025-06-27 05:42:02,502 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89321, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.510000000000000000000000, PnL USD=0.3738016359318654900466152628, Commission=0.10000000, Final PnL=0.2738016359318654900466152628
2025-06-27 05:42:02,503 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89983000, Current=0.89321, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-397.200000000000000000000000, PnL USD=-291.1255093963470051892462400, Commission=6.00000000, Final PnL=-297.1255093963470051892462400
2025-06-27 05:42:02,503 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.29541796717810965272950755% which is below threshold 100.0%
2025-06-27 05:42:04,462 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:42:04,463 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:42:04,463 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:42:04,870 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89319, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.490000000000000000000000, PnL USD=0.3591348514720864269013991601, Commission=0.10000000, Final PnL=0.2591348514720864269013991601
2025-06-27 05:42:04,872 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89983000, Current=0.89319, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-398.400000000000000000000000, PnL USD=-291.9986220948555764847294395, Commission=6.00000000, Final PnL=-297.9986220948555764847294395
2025-06-27 05:42:04,873 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.07301160323083146082420014% which is below threshold 100.0%
2025-06-27 05:42:07,021 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:42:07,021 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:42:09,272 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89324, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.540000000000000000000000, PnL USD=0.3957493587394650054965188714, Commission=0.10000000, Final PnL=0.2957493587394650054965188714
2025-06-27 05:42:09,273 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89983000, Current=0.89324, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-395.400000000000000000000000, PnL USD=-289.7764748992304873580065958, Commission=6.00000000, Final PnL=-295.7764748992304873580065958
2025-06-27 05:42:09,273 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.63887619798806965640953055% which is below threshold 100.0%
2025-06-27 05:42:11,636 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89328, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.580000000000000000000000, PnL USD=0.4250578958168440184094040395, Commission=0.10000000, Final PnL=0.3250578958168440184094040395
2025-06-27 05:42:11,637 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89983000, Current=0.89328, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-393.000000000000000000000000, PnL USD=-288.0133673379649986808548061, Commission=6.00000000, Final PnL=-294.0133673379649986808548061
2025-06-27 05:42:11,637 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 53.08791197180445557971656134% which is below threshold 100.0%
2025-06-27 05:42:13,899 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89328, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.580000000000000000000000, PnL USD=0.4250516657628211705043457869, Commission=0.10000000, Final PnL=0.3250516657628211705043457869
2025-06-27 05:42:13,901 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89990000, Current=0.89328, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-397.200000000000000000000000, PnL USD=-291.0871062775733946971140458, Commission=6.00000000, Final PnL=-297.0871062775733946971140458
2025-06-27 05:42:13,901 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.31787785860395983500521081% which is below threshold 100.0%
2025-06-27 05:42:16,238 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89321, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.510000000000000000000000, PnL USD=0.3737441098661116688773752904, Commission=0.10000000, Final PnL=0.2737441098661116688773752904
2025-06-27 05:42:16,241 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89990000, Current=0.89321, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-401.400000000000000000000000, PnL USD=-294.1585994122690664458400815, Commission=6.00000000, Final PnL=-300.1585994122690664458400815
2025-06-27 05:42:16,241 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.53555436470602631035330656% which is below threshold 100.0%
2025-06-27 05:42:18,598 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89326, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.560000000000000000000000, PnL USD=0.4103826818508258951472247871, Commission=0.10000000, Final PnL=0.3103826818508258951472247871
2025-06-27 05:42:18,599 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89990000, Current=0.89326, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-398.400000000000000000000000, PnL USD=-291.9579650881589939761684914, Commission=6.00000000, Final PnL=-297.9579650881589939761684914
2025-06-27 05:42:18,599 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 52.09603558726653604203189954% which is below threshold 100.0%
2025-06-27 05:42:20,845 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89323, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.530000000000000000000000, PnL USD=0.3883978953231030793357663164, Commission=0.10000000, Final PnL=0.2883978953231030793357663164
2025-06-27 05:42:20,846 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89990000, Current=0.89323, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-400.200000000000000000000000, PnL USD=-293.2770522798223629248559996, Commission=6.00000000, Final PnL=-299.2770522798223629248559996
2025-06-27 05:42:20,846 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.76007046509024730177111674% which is below threshold 100.0%
2025-06-27 05:42:23,040 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89325, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.550000000000000000000000, PnL USD=0.4030514660081049985709993478, Commission=0.10000000, Final PnL=0.3030514660081049985709993478
2025-06-27 05:42:23,042 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89990000, Current=0.89325, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-399.000000000000000000000000, PnL USD=-292.3955180676979898724158905, Commission=6.00000000, Final PnL=-298.3955180676979898724158905
2025-06-27 05:42:23,043 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.98458327487289002834759847% which is below threshold 100.0%
2025-06-27 05:42:25,349 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89324, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.540000000000000000000000, PnL USD=0.3957290575052947082231032486, Commission=0.10000000, Final PnL=0.2957290575052947082231032486
2025-06-27 05:42:25,355 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89990000, Current=0.89324, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-399.600000000000000000000000, PnL USD=-292.8395025539180840850964040, Commission=6.00000000, Final PnL=-298.8395025539180840850964040
2025-06-27 05:42:25,355 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.87152194894085492976092873% which is below threshold 100.0%
2025-06-27 05:42:27,816 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89324, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.540000000000000000000000, PnL USD=0.3957232575352303622333448142, Commission=0.10000000, Final PnL=0.2957232575352303622333448142
2025-06-27 05:42:27,816 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89990000, Current=0.89324, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-399.600000000000000000000000, PnL USD=-292.8352105760704680526751625, Commission=6.00000000, Final PnL=-298.8352105760704680526751625
2025-06-27 05:42:27,817 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.87259572148827875580784686% which is below threshold 100.0%
2025-06-27 05:42:29,960 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89314, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.440000000000000000000000, PnL USD=0.3224884380565674037481951641, Commission=0.10000000, Final PnL=0.2224884380565674037481951641
2025-06-27 05:42:29,961 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89990000, Current=0.89314, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-405.600000000000000000000000, PnL USD=-297.2757056266903158187908149, Commission=6.00000000, Final PnL=-303.2757056266903158187908149
2025-06-27 05:42:29,962 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 50.74181688788392203446085134% which is below threshold 100.0%
2025-06-27 05:42:32,417 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89319, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.490000000000000000000000, PnL USD=0.3590585338687457865580209280, Commission=0.10000000, Final PnL=0.2590585338687457865580209280
2025-06-27 05:42:32,417 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89990000, Current=0.89319, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-402.600000000000000000000000, PnL USD=-295.0142157868511299352229094, Commission=6.00000000, Final PnL=-301.0142157868511299352229094
2025-06-27 05:42:32,417 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 51.31752646917794820535989967% which is below threshold 100.0%
2025-06-27 05:42:34,532 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89313, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.430000000000000000000000, PnL USD=0.3151360581609245945371530755, Commission=0.10000000, Final PnL=0.2151360581609245945371530755
2025-06-27 05:42:34,534 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89995000, Current=0.89313, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-409.200000000000000000000000, PnL USD=-299.8922674405821955455884616, Commission=6.00000000, Final PnL=-305.8922674405821955455884616
2025-06-27 05:42:34,534 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 50.08447435367856528520397112% which is below threshold 100.0%
2025-06-27 05:42:36,798 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89311, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.410000000000000000000000, PnL USD=0.3004587492122118160899324334, Commission=0.10000000, Final PnL=0.2004587492122118160899324334
2025-06-27 05:42:36,799 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89995000, Current=0.89311, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-410.400000000000000000000000, PnL USD=-300.7518796992481203007518797, Commission=6.00000000, Final PnL=-306.7518796992481203007518797
2025-06-27 05:42:36,800 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 49.86544748101412719275948911% which is below threshold 100.0%
2025-06-27 05:42:39,175 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89305, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.350000000000000000000000, PnL USD=0.2564854169720064487761981533, Commission=0.10000000, Final PnL=0.1564854169720064487761981533
2025-06-27 05:42:39,177 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89995000, Current=0.89305, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-414.000000000000000000000000, PnL USD=-303.3856075040304851238458156, Commission=6.00000000, Final PnL=-309.3856075040304851238458156
2025-06-27 05:42:39,177 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 49.19463025100621823406828735% which is below threshold 100.0%
2025-06-27 05:42:41,429 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89301, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.310000000000000000000000, PnL USD=0.2271628097841220523793472367, Commission=0.10000000, Final PnL=0.1271628097841220523793472367
2025-06-27 05:42:41,431 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89995000, Current=0.89301, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-416.400000000000000000000000, PnL USD=-305.1309483680916858411619011, Commission=6.00000000, Final PnL=-311.1309483680916858411619011
2025-06-27 05:42:41,431 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 48.75004186228735531508315908% which is below threshold 100.0%
2025-06-27 05:42:43,887 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89305, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.350000000000000000000000, PnL USD=0.2564741400788474784928113962, Commission=0.10000000, Final PnL=0.1564741400788474784928113962
2025-06-27 05:42:43,887 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89995000, Current=0.89305, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-414.000000000000000000000000, PnL USD=-303.3722685504081602743540516, Commission=6.00000000, Final PnL=-309.3722685504081602743540516
2025-06-27 05:42:43,888 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 49.19796909829663732348091284% which is below threshold 100.0%
2025-06-27 05:42:46,138 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:42:46,138 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 05:42:48,402 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89303, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.330000000000000000000000, PnL USD=0.2418131590324542570107496941, Commission=0.10000000, Final PnL=0.1418131590324542570107496941
2025-06-27 05:42:48,403 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89995000, Current=0.89303, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-415.200000000000000000000000, PnL USD=-304.2449200917424470026159787, Commission=6.00000000, Final PnL=-310.2449200917424470026159787
2025-06-27 05:42:48,404 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 48.97567971723576602810701481% which is below threshold 100.0%
2025-06-27 05:42:51,050 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:42:51,053 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.89305, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.350000000000000000000000, PnL USD=0.2564722606930613261814211494, Commission=0.10000000, Final PnL=0.1564722606930613261814211494
2025-06-27 05:42:51,055 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89995000, Current=0.89305, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-414.000000000000000000000000, PnL USD=-303.3700455055068258260238739, Commission=6.00000000, Final PnL=-309.3700455055068258260238739
2025-06-27 05:42:51,055 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 49.19852554430098341562681244% which is below threshold 100.0%
2025-06-27 05:42:51,065 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:42:51,105 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:42:51,530 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5213800000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.7200000000000000000000000, PnL USD=-452.6426742960397530492395724, Commission=0.10000000, Final PnL=-452.7426742960397530492395724
2025-06-27 05:42:51,533 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:42:51,542 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:42:51,544 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:42:51,561 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:42:51,939 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89270000, Current=0.8930500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0.35000000000000000000000000, PnL USD=0.2564722606930613261814211494, Commission=0.10000000, Final PnL=0.1564722606930613261814211494
2025-06-27 05:42:51,940 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89995000, Current=0.8930500000, Quantity=0.60000000, Contract Size=100000.00000000, PnL=-414.0000000000000000000000000, PnL USD=-303.3700455055068258260238739, Commission=6.00000000, Final PnL=-309.3700455055068258260238739
2025-06-27 05:42:51,940 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 49.19852554430098341562681244% which is below threshold 100.0%
2025-06-27 05:42:52,029 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:42:54,965 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:42:54,978 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:42:54,979 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:43:50,871 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 05:43:50,886 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 05:43:50,918 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 05:43:51,570 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5213600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.7400000000000000000000000, PnL USD=-452.5882618623441146212330314, Commission=0.10000000, Final PnL=-452.6882618623441146212330314
2025-06-27 05:43:51,575 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 05:43:51,604 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 05:43:51,607 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 05:43:51,630 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 05:43:51,657 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 05:43:54,974 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:43:54,983 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:43:54,985 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:45:16,024 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 05:45:16,066 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 05:45:16,071 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 05:45:19,134 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 05:45:19,199 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 05:45:19,253 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 05:45:19,311 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 05:45:19,392 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 05:45:19,495 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 05:45:19,566 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 05:45:19,626 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 05:45:19,762 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 05:45:19,842 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 05:45:19,893 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 05:45:19,961 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 05:45:20,033 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 05:45:20,086 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 05:45:20,149 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 05:45:20,202 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 05:45:20,253 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 05:45:20,302 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 05:45:20,336 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 05:45:20,392 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 05:45:20,447 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 05:45:20,494 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 05:45:20,528 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 05:45:20,565 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 05:45:20,609 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 05:45:20,637 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 05:45:20,663 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 05:45:20,701 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 05:45:20,744 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 05:45:20,793 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 05:45:20,829 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 05:45:20,853 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 05:45:20,871 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 05:45:20,883 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 05:45:20,901 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 05:45:20,920 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 05:45:20,938 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 05:45:20,969 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 05:45:20,983 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 05:45:21,015 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 05:45:21,034 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 05:45:21,050 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 05:45:21,072 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 05:45:21,086 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 05:45:21,098 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 05:45:21,108 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 05:45:21,121 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 05:45:21,135 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 05:45:21,149 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 05:45:21,169 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 05:45:21,184 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 05:45:21,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 05:45:21,216 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 05:45:21,234 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 05:45:21,247 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 05:45:21,264 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 05:45:21,283 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 05:45:21,301 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 05:45:21,316 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 05:45:21,334 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 05:45:21,351 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 05:45:21,368 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 05:45:21,389 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 05:45:21,407 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 05:45:21,425 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 05:45:21,441 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 05:45:21,460 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 05:45:21,478 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 05:45:21,497 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 05:45:21,513 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 05:45:21,535 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 05:45:21,552 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 05:45:21,565 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 05:45:21,576 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 05:45:21,586 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 05:45:21,594 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 05:45:21,611 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 05:45:21,622 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 05:45:21,641 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 05:50:01,393 - WARNING - app.api.v1.endpoints.users - JWTError during refresh token validation.
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 93, in decode_token
    payload = jwt.decode(token, settings.SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\jose\jwt.py", line 174, in decode
    _validate_claims(
    ~~~~~~~~~~~~~~~~^
        claims,
        ^^^^^^^
    ...<5 lines>...
        options=defaults,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\jose\jwt.py", line 497, in _validate_claims
    _validate_exp(claims, leeway=leeway)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\jose\jwt.py", line 331, in _validate_exp
    raise ExpiredSignatureError("Signature has expired.")
jose.exceptions.ExpiredSignatureError: Signature has expired.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 289, in refresh_access_token
    payload = decode_token(refresh_token)
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 98, in decode_token
    raise JWTError("Could not validate credentials")
jose.exceptions.JWTError: Could not validate credentials
2025-06-27 05:50:23,508 - INFO - app.main - Application shutdown event triggered.
2025-06-27 05:50:23,508 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 05:50:23,508 - INFO - app.main - Cancelling 5 other background tasks...
2025-06-27 05:50:23,510 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 05:50:24,971 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 06:02:38,891 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 06:02:38,897 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 06:02:38,897 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 06:02:39,806 - INFO - app.main - Application startup event triggered.
2025-06-27 06:02:39,837 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 06:02:39,838 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 06:02:39,854 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 06:02:39,861 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 06:02:39,862 - INFO - app.main - Firebase events processor background task started
2025-06-27 06:02:39,862 - INFO - app.main - Redis publisher background task started
2025-06-27 06:02:39,862 - INFO - app.main - Pending order checker background task started
2025-06-27 06:02:39,862 - INFO - app.main - SL/TP checker background task started
2025-06-27 06:02:39,862 - INFO - app.main - Redis cleanup background task started
2025-06-27 06:02:39,862 - INFO - app.main - Generating initial service account token...
2025-06-27 06:02:39,862 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 06:02:40,831 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 06:02:40,832 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 06:02:40,832 - INFO - app.main - Application startup event finished.
2025-06-27 06:02:40,833 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 06:02:40,833 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 06:02:41,435 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 06:03:04,065 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 06:03:04,110 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 06:03:04,172 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 06:03:04,216 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 06:03:04,316 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 06:03:04,421 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 06:03:04,571 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 06:03:04,804 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 06:03:04,984 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 06:03:05,155 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 06:03:05,230 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 06:03:05,313 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 06:03:05,388 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 06:03:05,456 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 06:03:05,597 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 06:03:05,743 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 06:03:05,899 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 06:03:06,062 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 06:03:06,129 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 06:03:06,185 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 06:03:06,223 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 06:03:06,280 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 06:03:06,326 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 06:03:06,372 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 06:03:06,417 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 06:03:06,469 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 06:03:06,507 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 06:03:06,537 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 06:03:06,563 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 06:03:06,606 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 06:03:06,660 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 06:03:06,716 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 06:03:06,773 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 06:03:06,825 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 06:03:06,868 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 06:03:06,917 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 06:03:06,971 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 06:03:07,050 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 06:03:07,102 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 06:03:07,143 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 06:03:07,200 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 06:03:07,274 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 06:03:07,352 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 06:03:07,397 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 06:03:07,439 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 06:03:07,505 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 06:03:07,536 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 06:03:07,595 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 06:03:07,675 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 06:03:07,730 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 06:03:07,791 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 06:03:07,837 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 06:03:07,894 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 06:03:07,953 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 06:03:07,993 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 06:03:08,032 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 06:03:08,091 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 06:03:08,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 06:03:08,324 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 06:03:08,378 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 06:03:08,432 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 06:03:08,476 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 06:03:08,515 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 06:03:08,626 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 06:03:08,820 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 06:03:08,984 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 06:03:09,005 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 06:03:09,107 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 06:03:09,158 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 06:03:09,184 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 06:03:09,225 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 06:03:09,286 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 06:03:09,346 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 06:03:09,383 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 06:03:09,425 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 06:03:09,472 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 06:03:09,508 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 06:03:09,544 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 06:03:09,609 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 06:03:39,863 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 06:03:39,939 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 06:03:40,044 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 06:03:41,437 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5214500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.6500000000000000000000000, PnL USD=-452.5321220638426018871712508, Commission=0.10000000, Final PnL=-452.6321220638426018871712508
2025-06-27 06:03:41,459 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 06:03:41,567 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 06:03:41,600 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 06:03:41,737 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 06:03:41,938 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 06:04:18,642 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 06:04:18,647 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 06:04:18,648 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 06:04:21,347 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89320000, Current=0.89319, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-0.290000000000000000000000, PnL USD=-0.2125227179457114381192472299, Commission=2.90000000, Final PnL=-3.112522717945711438119247230
2025-06-27 06:04:21,348 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 98.60233100250449800446755139% which is below threshold 100.0%
2025-06-27 06:04:21,804 - WARNING - app.services.portfolio_calculator - Invalid current prices for AUDCAD: buy=0, sell=0
2025-06-27 06:04:22,848 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:04:23,309 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:04:25,459 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89320000, Current=0.89318, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-0.580000000000000000000000, PnL USD=-0.4250454358914228762384944598, Commission=2.90000000, Final PnL=-3.325045435891422876238494460
2025-06-27 06:04:25,459 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 98.49037677085211880301401543% which is below threshold 100.0%
2025-06-27 06:04:27,043 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:04:29,803 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89320000, Current=0.89319, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-0.290000000000000000000000, PnL USD=-0.2125211605121027136753702632, Commission=2.90000000, Final PnL=-3.112521160512102713675370263
2025-06-27 06:04:29,803 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 98.60233182294047162530929237% which is below threshold 100.0%
2025-06-27 06:04:31,818 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89320000, Current=0.89317, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-0.870000000000000000000000, PnL USD=-0.6375634815363081410261107895, Commission=2.90000000, Final PnL=-3.537563481536308141026110790
2025-06-27 06:04:31,818 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 98.37842500050766046408570258% which is below threshold 100.0%
2025-06-27 06:04:34,241 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89320000, Current=0.89316, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-1.160000000000000000000000, PnL USD=-0.8500721828534578151679258972, Commission=2.90000000, Final PnL=-3.750072182853457815167925897
2025-06-27 06:04:34,242 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 98.26647815263474802972769009% which is below threshold 100.0%
2025-06-27 06:04:36,380 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89320000, Current=0.89315, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-1.450000000000000000000000, PnL USD=-1.062574655029642168824792432, Commission=2.90000000, Final PnL=-3.962574655029642168824792432
2025-06-27 06:04:36,380 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 98.15453458619309794614929547% which is below threshold 100.0%
2025-06-27 06:04:38,661 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89320000, Current=0.89322, Quantity=0.29000000, Contract Size=100000.00000000, PnL=0.580000000000000000000000, PnL USD=0.4250236327795812784417754263, Commission=2.90000000, Final PnL=-2.474976367220418721558224574
2025-06-27 06:04:38,661 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 98.93818221186302548514027045% which is below threshold 100.0%
2025-06-27 06:04:39,865 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 06:04:39,913 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 06:04:40,023 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 06:04:41,047 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89320000, Current=0.89316, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-1.160000000000000000000000, PnL USD=-0.8500410364638292883104701606, Commission=2.90000000, Final PnL=-3.750041036463829288310470161
2025-06-27 06:04:41,047 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 98.26649456015180462081311163% which is below threshold 100.0%
2025-06-27 06:04:41,551 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5214000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.7000000000000000000000000, PnL USD=-452.6402971589197871699628551, Commission=0.10000000, Final PnL=-452.7402971589197871699628551
2025-06-27 06:04:41,557 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 06:04:41,627 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 06:04:41,632 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 06:04:41,678 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 06:04:42,380 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89320000, Current=0.8931600000, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-1.16000000000000000000000000, PnL USD=-0.8500410364638292883104701606, Commission=2.90000000, Final PnL=-3.750041036463829288310470161
2025-06-27 06:04:42,380 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 98.26649456015180462081311163% which is below threshold 100.0%
2025-06-27 06:04:42,383 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 06:04:43,631 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89320000, Current=0.89323, Quantity=0.29000000, Contract Size=100000.00000000, PnL=0.870000000000000000000000, PnL USD=0.6375261055948411680650716301, Commission=2.90000000, Final PnL=-2.262473894405158831934928370
2025-06-27 06:04:43,631 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.05012577864133233317445694% which is below threshold 100.0%
2025-06-27 06:04:45,664 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89320000, Current=0.89322, Quantity=0.29000000, Contract Size=100000.00000000, PnL=0.580000000000000000000000, PnL USD=0.4250205182319146441552350803, Commission=2.90000000, Final PnL=-2.474979481768085355844764920
2025-06-27 06:04:45,665 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 98.93818057115941349847507512% which is below threshold 100.0%
2025-06-27 06:04:48,113 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89320000, Current=0.89321, Quantity=0.29000000, Contract Size=100000.00000000, PnL=0.290000000000000000000000, PnL USD=0.2125211605121027136753702632, Commission=2.90000000, Final PnL=-2.687478839487897286324629737
2025-06-27 06:04:48,113 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 98.82623864537328278653288221% which is below threshold 100.0%
2025-06-27 06:04:50,121 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:04:52,598 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89325000, Current=0.89312, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-3.770000000000000000000000, PnL USD=-2.762471422709420247376751275, Commission=2.90000000, Final PnL=-5.662471422709420247376751275
2025-06-27 06:04:52,599 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 97.25905085460179094591120935% which is below threshold 100.0%
2025-06-27 06:04:54,928 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89325000, Current=0.89309, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-4.640000000000000000000000, PnL USD=-3.399890089760029309397325517, Commission=2.90000000, Final PnL=-6.299890089760029309397325517
2025-06-27 06:04:54,928 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 96.92326690735920070094435785% which is below threshold 100.0%
2025-06-27 06:04:57,522 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89325000, Current=0.89312, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-3.770000000000000000000000, PnL USD=-2.762491664895838676348821361, Commission=2.90000000, Final PnL=-5.662491664895838676348821361
2025-06-27 06:04:57,522 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 97.25904019127859733638053975% which is below threshold 100.0%
2025-06-27 06:04:59,524 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89325000, Current=0.89321, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-1.160000000000000000000000, PnL USD=-0.8499912069875139222697696231, Commission=2.90000000, Final PnL=-3.749991206987513922269769623
2025-06-27 06:04:59,524 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 98.26652080967838912591804794% which is below threshold 100.0%
2025-06-27 06:05:02,231 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89325000, Current=0.89323, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-0.580000000000000000000000, PnL USD=-0.4250080604976990942931676290, Commission=2.90000000, Final PnL=-3.325008060497699094293167629
2025-06-27 06:05:02,232 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 98.49039645972833635658580435% which is below threshold 100.0%
2025-06-27 06:05:03,959 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89325000, Current=0.89312, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-3.770000000000000000000000, PnL USD=-2.762532150158644087668261656, Commission=2.90000000, Final PnL=-5.662532150158644087668261656
2025-06-27 06:05:03,959 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 97.25901886416338614145906248% which is below threshold 100.0%
2025-06-27 06:05:06,640 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89525000, Current=0.89322, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-58.870000000000000000000000, PnL USD=-43.13705375461633155519080837, Commission=2.90000000, Final PnL=-46.03705375461633155519080837
2025-06-27 06:05:06,640 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 75.99024069187360714576683959% which is below threshold 100.0%
2025-06-27 06:05:08,594 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89525000, Current=0.89314, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-61.190000000000000000000000, PnL USD=-44.83769326591924965193815491, Commission=2.90000000, Final PnL=-47.73769326591924965193815491
2025-06-27 06:05:08,594 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 75.09436569250421448035708007% which is below threshold 100.0%
2025-06-27 06:05:10,761 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89525000, Current=0.89315, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-60.900000000000000000000000, PnL USD=-44.62584635225840490078260105, Commission=2.90000000, Final PnL=-47.52584635225840490078260105
2025-06-27 06:05:10,761 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 75.20596391916008802571637728% which is below threshold 100.0%
2025-06-27 06:05:13,202 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:05:15,441 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89925000, Current=0.89319, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-175.740000000000000000000000, PnL USD=-128.7793296498761596295047851, Commission=2.90000000, Final PnL=-131.6793296498761596295047851
2025-06-27 06:05:15,441 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 30.87499236691979158747048143% which is below threshold 100.0%
2025-06-27 06:05:17,666 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89925000, Current=0.89316, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-176.610000000000000000000000, PnL USD=-129.4130578149043745878214992, Commission=2.90000000, Final PnL=-132.3130578149043745878214992
2025-06-27 06:05:17,666 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 30.54115252862857578474345509% which is below threshold 100.0%
2025-06-27 06:05:18,960 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 06:05:18,964 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 06:05:18,964 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 06:05:19,996 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89925000, Current=0.89309, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-178.640000000000000000000000, PnL USD=-130.9005642265699421118194475, Commission=2.90000000, Final PnL=-133.8005642265699421118194475
2025-06-27 06:05:19,996 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 29.75755330212825048105175815% which is below threshold 100.0%
2025-06-27 06:05:22,303 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89925000, Current=0.89305, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-179.800000000000000000000000, PnL USD=-131.7515333152584103349478636, Commission=2.90000000, Final PnL=-134.6515333152584103349478636
2025-06-27 06:05:22,304 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 29.30927374215961105465528968% which is below threshold 100.0%
2025-06-27 06:05:24,368 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89925000, Current=0.89303, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-180.380000000000000000000000, PnL USD=-132.1746011973239735914589913, Commission=2.90000000, Final PnL=-135.0746011973239735914589913
2025-06-27 06:05:24,368 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 29.08640702874994806328873661% which is below threshold 100.0%
2025-06-27 06:05:26,415 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:05:28,762 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89925000, Current=0.89301, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-180.960000000000000000000000, PnL USD=-132.6025148752821174194683003, Commission=2.90000000, Final PnL=-135.5025148752821174194683003
2025-06-27 06:05:28,762 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 28.86098761245213221331280604% which is below threshold 100.0%
2025-06-27 06:05:31,061 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89925000, Current=0.89295, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-182.700000000000000000000000, PnL USD=-133.8667487305739344514540699, Commission=2.90000000, Final PnL=-136.7667487305739344514540699
2025-06-27 06:05:31,061 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 28.19500549408737583550857615% which is below threshold 100.0%
2025-06-27 06:05:33,362 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89925000, Current=0.89292, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-183.570000000000000000000000, PnL USD=-134.5042094388147627107467083, Commission=2.90000000, Final PnL=-137.4042094388147627107467083
2025-06-27 06:05:33,363 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 27.85919940008704487660184992% which is below threshold 100.0%
2025-06-27 06:05:35,731 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89925000, Current=0.89302, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-180.670000000000000000000000, PnL USD=-132.3783704572098475967174678, Commission=2.90000000, Final PnL=-135.2783704572098475967174678
2025-06-27 06:05:35,732 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 28.97906400610554306657669083% which is below threshold 100.0%
2025-06-27 06:05:37,994 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:05:39,863 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 06:05:39,882 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 06:05:39,911 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 06:05:40,430 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89925000, Current=0.89303, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-180.380000000000000000000000, PnL USD=-132.1610433380957614389859692, Commission=2.90000000, Final PnL=-135.0610433380957614389859692
2025-06-27 06:05:40,430 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 29.09354913443830720171418153% which is below threshold 100.0%
2025-06-27 06:05:40,832 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5213600000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.7400000000000000000000000, PnL USD=-452.5314867780621205278739525, Commission=0.10000000, Final PnL=-452.6314867780621205278739525
2025-06-27 06:05:40,834 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 06:05:40,844 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 06:05:40,846 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 06:05:40,867 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 06:05:41,532 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89925000, Current=0.8930300000, Quantity=0.29000000, Contract Size=100000.00000000, PnL=-180.3800000000000000000000000, PnL USD=-132.1610433380957614389859692, Commission=2.90000000, Final PnL=-135.0610433380957614389859692
2025-06-27 06:05:41,532 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 29.09354913443830720171418153% which is below threshold 100.0%
2025-06-27 06:05:41,534 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 06:05:41,538 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 06:05:41,538 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 06:05:41,708 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 06:06:05,799 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 06:06:05,972 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 06:06:06,163 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 06:06:06,305 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 06:06:06,452 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 06:06:06,507 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 06:06:06,559 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 06:06:06,652 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 06:06:06,718 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 06:06:06,799 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 06:06:06,881 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 06:06:06,949 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 06:06:07,002 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 06:06:07,063 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 06:06:07,103 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 06:06:07,153 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 06:06:07,216 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 06:06:07,275 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 06:06:07,322 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 06:06:07,343 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 06:06:07,367 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 06:06:07,410 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 06:06:07,453 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 06:06:07,509 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 06:06:07,570 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 06:06:07,604 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 06:06:07,614 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 06:06:07,634 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 06:06:07,654 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 06:06:07,757 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 06:06:07,841 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 06:06:07,917 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 06:06:07,965 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 06:06:07,994 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 06:06:08,046 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 06:06:08,069 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 06:06:08,118 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 06:06:08,189 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 06:06:08,260 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 06:06:08,390 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 06:06:08,412 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 06:06:08,445 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 06:06:08,473 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 06:06:08,506 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 06:06:08,538 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 06:06:08,578 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 06:06:08,629 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 06:06:08,668 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 06:06:08,707 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 06:06:08,746 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 06:06:08,781 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 06:06:08,828 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 06:06:08,876 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 06:06:10,333 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 06:08:07,774 - INFO - app.core.config - .env file loaded successfully.
2025-06-27 06:08:07,779 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-27 06:08:07,779 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-27 06:08:08,290 - INFO - app.main - Application startup event triggered.
2025-06-27 06:08:08,321 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-27 06:08:08,321 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-27 06:08:08,328 - INFO - app.main - Redis connection pool initialized successfully
2025-06-27 06:08:08,333 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-27 06:08:08,333 - INFO - app.main - Firebase events processor background task started
2025-06-27 06:08:08,333 - INFO - app.main - Redis publisher background task started
2025-06-27 06:08:08,333 - INFO - app.main - Pending order checker background task started
2025-06-27 06:08:08,333 - INFO - app.main - SL/TP checker background task started
2025-06-27 06:08:08,333 - INFO - app.main - Redis cleanup background task started
2025-06-27 06:08:08,333 - INFO - app.main - Generating initial service account token...
2025-06-27 06:08:08,333 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-27 06:08:09,249 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-27 06:08:09,253 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-27 06:08:09,253 - INFO - app.main - Application startup event finished.
2025-06-27 06:08:09,254 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 06:08:09,255 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-27 06:08:09,860 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-27 06:08:12,589 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 06:08:12,599 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 06:08:12,610 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 06:08:12,622 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 06:08:12,636 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 06:08:12,650 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 06:08:12,660 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 06:08:12,671 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 06:08:12,687 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 06:08:12,731 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 06:08:12,744 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 06:08:12,758 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 06:08:12,772 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 06:08:12,788 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 06:08:12,802 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 06:08:12,815 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 06:08:12,828 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 06:08:12,839 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 06:08:12,851 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 06:08:12,863 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 06:08:12,873 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 06:08:12,885 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 06:08:12,894 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 06:08:12,906 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 06:08:12,917 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 06:08:12,928 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 06:08:12,940 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 06:08:12,949 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 06:08:12,961 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 06:08:12,973 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 06:08:12,985 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 06:08:12,998 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 06:08:13,011 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 06:08:13,025 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 06:08:13,039 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 06:08:13,051 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 06:08:13,060 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 06:08:13,074 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 06:08:13,084 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 06:08:13,094 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 06:08:13,103 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 06:08:13,114 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 06:08:13,124 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 06:08:13,136 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 06:08:13,150 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 06:08:13,164 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 06:08:13,177 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 06:08:13,186 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 06:08:13,197 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 06:08:13,206 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 06:08:13,217 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 06:08:13,227 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 06:08:13,240 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 06:08:13,252 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 06:08:13,264 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 06:08:13,275 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 06:08:13,287 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 06:08:13,298 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 06:08:13,307 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 06:08:13,318 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 06:08:13,331 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 06:08:13,348 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 06:08:13,360 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 06:08:13,372 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 06:08:13,383 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 06:08:13,394 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 06:08:13,407 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 06:08:13,419 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 06:08:13,431 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 06:08:13,445 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 06:08:13,456 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 06:08:13,468 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 06:08:13,481 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 06:08:13,491 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 06:08:13,501 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 06:08:13,513 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 06:08:13,542 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 06:08:13,564 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 06:08:13,581 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 06:08:20,614 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-27 06:08:20,688 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-27 06:08:20,753 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-27 06:08:20,798 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-27 06:08:20,895 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-27 06:08:20,991 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-27 06:08:21,127 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-27 06:08:21,219 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-27 06:08:21,330 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-27 06:08:21,467 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-27 06:08:21,587 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-27 06:08:21,870 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-27 06:08:21,925 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-27 06:08:22,014 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-27 06:08:22,111 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-27 06:08:22,189 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-27 06:08:22,249 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-27 06:08:22,307 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-27 06:08:22,356 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-27 06:08:22,436 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-27 06:08:22,486 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-27 06:08:22,525 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-27 06:08:22,556 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-27 06:08:22,581 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-27 06:08:22,623 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-27 06:08:22,652 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-27 06:08:22,673 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-27 06:08:22,724 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-27 06:08:22,771 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-27 06:08:22,934 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-27 06:08:23,091 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-27 06:08:23,124 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-27 06:08:23,138 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-27 06:08:23,181 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-27 06:08:23,247 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-27 06:08:23,288 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-27 06:08:23,329 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-27 06:08:23,366 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-27 06:08:23,386 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-27 06:08:23,420 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-27 06:08:23,452 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-27 06:08:23,489 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-27 06:08:23,531 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-27 06:08:23,558 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-27 06:08:23,596 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-27 06:08:23,644 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-27 06:08:23,678 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-27 06:08:23,718 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-27 06:08:23,749 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-27 06:08:23,775 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-27 06:08:23,818 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-27 06:08:23,848 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-27 06:08:23,888 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-27 06:08:23,932 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-27 06:08:23,976 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-27 06:08:24,058 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-27 06:08:24,113 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-27 06:08:24,163 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-27 06:08:24,286 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-27 06:08:24,430 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-27 06:08:24,495 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-27 06:08:24,551 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-27 06:08:24,581 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-27 06:08:24,649 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-27 06:08:24,704 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-27 06:08:24,721 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-27 06:08:24,810 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-27 06:08:24,860 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-27 06:08:24,954 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-27 06:08:25,025 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-27 06:08:25,134 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-27 06:08:25,202 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-27 06:08:25,289 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-27 06:08:25,341 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-27 06:08:25,390 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-27 06:08:25,439 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-27 06:08:25,469 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-27 06:08:25,517 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-27 06:08:25,577 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-27 06:08:43,639 - WARNING - app.services.portfolio_calculator - Invalid current prices for AUDCAD: buy=0, sell=0
2025-06-27 06:08:44,147 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89311, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-0.600000000000000000000000, PnL USD=-0.4395507791037559614074415947, Commission=3.00000000, Final PnL=-3.439550779103755961407441595
2025-06-27 06:08:44,662 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:08:46,026 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89311, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-0.600000000000000000000000, PnL USD=-0.4395507791037559614074415947, Commission=3.00000000, Final PnL=-3.439550779103755961407441595
2025-06-27 06:08:47,926 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89313, Quantity=0.30000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=3.00000000, Final PnL=-3.00000000000000
2025-06-27 06:08:50,170 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89313, Quantity=0.30000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=3.00000000, Final PnL=-3.00000000000000
2025-06-27 06:08:54,058 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:08:54,985 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89311, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-0.600000000000000000000000, PnL USD=-0.4394863869091654885989906463, Commission=3.00000000, Final PnL=-3.439486386909165488598990646
2025-06-27 06:08:56,902 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89309, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-1.200000000000000000000000, PnL USD=-0.8789727738183309771979812925, Commission=3.00000000, Final PnL=-3.878972773818330977197981292
2025-06-27 06:08:56,903 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.91900714600655646158651860% which is below threshold 100.0%
2025-06-27 06:08:59,328 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89307, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-1.800000000000000000000000, PnL USD=-1.318391562294001318391562294, Commission=3.00000000, Final PnL=-4.318391562294001318391562294
2025-06-27 06:08:59,329 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.69513370578051695618934058% which is below threshold 100.0%
2025-06-27 06:09:01,607 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.8931, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-0.900000000000000000000000, PnL USD=-0.6591957811470006591957811470, Commission=3.00000000, Final PnL=-3.659195781147000659195781147
2025-06-27 06:09:03,846 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89306, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-2.100000000000000000000000, PnL USD=-1.538112223597571247555500216, Commission=3.00000000, Final PnL=-4.538112223597571247555500216
2025-06-27 06:09:03,846 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.58319124536500344021015885% which is below threshold 100.0%
2025-06-27 06:09:06,818 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89309, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-1.200000000000000000000000, PnL USD=-0.8789277081960008789277081960, Commission=3.00000000, Final PnL=-3.878927708196000878927708196
2025-06-27 06:09:06,818 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.91903010587120395408207245% which is below threshold 100.0%
2025-06-27 06:09:08,617 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 06:09:08,629 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89311, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-0.600000000000000000000000, PnL USD=-0.4394381051428906238556299345, Commission=3.00000000, Final PnL=-3.439438105142890623855629934
2025-06-27 06:09:08,686 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 06:09:08,773 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 06:09:09,419 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5212500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.8500000000000000000000000, PnL USD=-452.6354080429492486390205966, Commission=0.10000000, Final PnL=-452.7354080429492486390205966
2025-06-27 06:09:09,422 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 06:09:09,449 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 06:09:09,486 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 06:09:09,573 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 06:09:10,307 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.8931100000, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-0.60000000000000000000000000, PnL USD=-0.4394606353135917850158572046, Commission=3.00000000, Final PnL=-3.439460635313591785015857205
2025-06-27 06:09:10,314 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 06:09:11,066 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89308, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-1.500000000000000000000000, PnL USD=-1.098651588283979462539643011, Commission=3.00000000, Final PnL=-4.098651588283979462539643011
2025-06-27 06:09:11,066 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.80708600556145330011226666% which is below threshold 100.0%
2025-06-27 06:09:12,993 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:09:15,364 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89309, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-1.200000000000000000000000, PnL USD=-0.8789534594143240115435887670, Commission=3.00000000, Final PnL=-3.878953459414324011543588767
2025-06-27 06:09:15,364 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.91901698623684327922172977% which is below threshold 100.0%
2025-06-27 06:09:17,609 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89308, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-1.500000000000000000000000, PnL USD=-1.098724015177041062978860550, Commission=3.00000000, Final PnL=-4.098724015177041062978860550
2025-06-27 06:09:17,610 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.80704910577896827849049287% which is below threshold 100.0%
2025-06-27 06:09:19,860 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89309, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-1.200000000000000000000000, PnL USD=-0.8789856505592546201683257521, Commission=3.00000000, Final PnL=-3.878985650559254620168325752
2025-06-27 06:09:19,861 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.91900058561277021593217557% which is below threshold 100.0%
2025-06-27 06:09:22,422 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89313000, Current=0.89305, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-2.400000000000000000000000, PnL USD=-1.757932671178693856025314230, Commission=3.00000000, Final PnL=-4.757932671178693856025314230
2025-06-27 06:09:22,422 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 99.47119794621016208680185745% which is below threshold 100.0%
2025-06-27 06:09:24,577 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89413000, Current=0.89305, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-32.400000000000000000000000, PnL USD=-23.73209106091236705634174211, Commission=3.00000000, Final PnL=-26.73209106091236705634174211
2025-06-27 06:09:24,577 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 88.27588594817996379848087319% which is below threshold 100.0%
2025-06-27 06:09:26,804 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89413000, Current=0.89303, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-33.000000000000000000000000, PnL USD=-24.17033494224754817587214625, Commission=3.00000000, Final PnL=-27.17033494224754817587214625
2025-06-27 06:09:26,804 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 88.05261109524783565525160679% which is below threshold 100.0%
2025-06-27 06:09:28,942 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89413000, Current=0.89305, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-32.400000000000000000000000, PnL USD=-23.73243872782408696034338788, Commission=3.00000000, Final PnL=-26.73243872782408696034338788
2025-06-27 06:09:28,943 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 88.27570882014260904812340131% which is below threshold 100.0%
2025-06-27 06:09:31,449 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89413000, Current=0.89303, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-33.000000000000000000000000, PnL USD=-24.17175128000410187294448554, Commission=3.00000000, Final PnL=-27.17175128000410187294448554
2025-06-27 06:09:31,449 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 88.05188950478698702213955293% which is below threshold 100.0%
2025-06-27 06:09:33,002 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 06:09:33,010 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 06:09:33,011 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 06:09:33,672 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:09:36,425 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89413000, Current=0.89308, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-31.500000000000000000000000, PnL USD=-23.07151437025752204611373158, Commission=3.00000000, Final PnL=-26.07151437025752204611373158
2025-06-27 06:09:36,426 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 88.61243408892524860092025087% which is below threshold 100.0%
2025-06-27 06:09:38,481 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89413000, Current=0.89312, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-30.300000000000000000000000, PnL USD=-22.19259953710485453959511323, Commission=3.00000000, Final PnL=-25.19259953710485453959511323
2025-06-27 06:09:38,481 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 89.06022032957771829040395700% which is below threshold 100.0%
2025-06-27 06:09:40,886 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89413000, Current=0.89311, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-30.600000000000000000000000, PnL USD=-22.41232824539302141622476782, Commission=3.00000000, Final PnL=-25.41232824539302141622476782
2025-06-27 06:09:40,886 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 88.94827376941460086803303047% which is below threshold 100.0%
2025-06-27 06:09:43,206 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:09:45,662 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89311, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.600000000000000000000000, PnL USD=-44.38845021315245894434596622, Commission=3.00000000, Final PnL=-47.38845021315245894434596622
2025-06-27 06:09:45,662 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.75196137499874722623498767% which is below threshold 100.0%
2025-06-27 06:09:47,750 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.8931, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.900000000000000000000000, PnL USD=-44.60525448432956617910950627, Commission=3.00000000, Final PnL=-47.60525448432956617910950627
2025-06-27 06:09:47,750 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.64150474611291716980359369% which is below threshold 100.0%
2025-06-27 06:09:49,967 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:09:52,734 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:09:54,882 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:09:56,424 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89311, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.600000000000000000000000, PnL USD=-44.38812507782571434849805527, Commission=3.00000000, Final PnL=-47.38812507782571434849805527
2025-06-27 06:09:56,424 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.75212702372849279167614872% which is below threshold 100.0%
2025-06-27 06:09:58,464 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:10:00,771 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.8931, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.900000000000000000000000, PnL USD=-44.60721479582494048709027651, Commission=3.00000000, Final PnL=-47.60721479582494048709027651
2025-06-27 06:10:00,771 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.64050601394694289428863027% which is below threshold 100.0%
2025-06-27 06:10:03,074 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89305, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-62.400000000000000000000000, PnL USD=-45.70624945064604025665816999, Commission=3.00000000, Final PnL=-48.70624945064604025665816999
2025-06-27 06:10:03,074 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.08057395014976551015988893% which is below threshold 100.0%
2025-06-27 06:10:05,276 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89306, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-62.100000000000000000000000, PnL USD=-45.48684104509862806999553189, Commission=3.00000000, Final PnL=-48.48684104509862806999553189
2025-06-27 06:10:05,276 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.19235732367096593132487676% which is below threshold 100.0%
2025-06-27 06:10:07,198 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 06:10:07,198 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 06:10:07,199 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 06:10:07,556 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:10:08,345 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 06:10:08,358 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 06:10:08,385 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 06:10:08,723 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5213500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.7500000000000000000000000, PnL USD=-452.4815934376058298945150325, Commission=0.10000000, Final PnL=-452.5815934376058298945150325
2025-06-27 06:10:08,739 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 06:10:08,755 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 06:10:08,758 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 06:10:08,774 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 06:10:09,144 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.8930600000, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-62.10000000000000000000000000, PnL USD=-45.48684104509862806999553189, Commission=3.00000000, Final PnL=-48.48684104509862806999553189
2025-06-27 06:10:09,144 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.19235732367096593132487676% which is below threshold 100.0%
2025-06-27 06:10:09,147 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 06:10:09,883 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89311, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.600000000000000000000000, PnL USD=-44.38845021315245894434596622, Commission=3.00000000, Final PnL=-47.38845021315245894434596622
2025-06-27 06:10:09,884 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.75196137499874722623498767% which is below threshold 100.0%
2025-06-27 06:10:12,480 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89309, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-61.200000000000000000000000, PnL USD=-44.82564143881519677138190421, Commission=3.00000000, Final PnL=-47.82564143881519677138190421
2025-06-27 06:10:12,480 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.52922282514000572071433452% which is below threshold 100.0%
2025-06-27 06:10:15,264 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89305, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-62.400000000000000000000000, PnL USD=-45.70959755043438768184948064, Commission=3.00000000, Final PnL=-48.70959755043438768184948064
2025-06-27 06:10:15,265 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.07886817279682714395278143% which is below threshold 100.0%
2025-06-27 06:10:17,104 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89304, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-62.700000000000000000000000, PnL USD=-45.92834592028831574089673814, Commission=3.00000000, Final PnL=-48.92834592028831574089673814
2025-06-27 06:10:17,104 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 76.96742107179115766206605966% which is below threshold 100.0%
2025-06-27 06:10:18,952 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89302, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-63.300000000000000000000000, PnL USD=-46.36819127428286794221922705, Commission=3.00000000, Final PnL=-49.36819127428286794221922705
2025-06-27 06:10:18,952 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 76.74333030656059305980271704% which is below threshold 100.0%
2025-06-27 06:10:21,303 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89303, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-63.000000000000000000000000, PnL USD=-46.14843681326730932637932550, Commission=3.00000000, Final PnL=-49.14843681326730932637932550
2025-06-27 06:10:21,304 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 76.85528998712690578440018061% which is below threshold 100.0%
2025-06-27 06:10:23,563 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:10:26,024 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89302, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-63.300000000000000000000000, PnL USD=-46.36275744880321096885711775, Commission=3.00000000, Final PnL=-49.36275744880321096885711775
2025-06-27 06:10:26,024 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 76.74609871163480182960203903% which is below threshold 100.0%
2025-06-27 06:10:28,137 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89303, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-63.000000000000000000000000, PnL USD=-46.14573261844071372066449855, Commission=3.00000000, Final PnL=-49.14573261844071372066449855
2025-06-27 06:10:28,137 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 76.85666771018916154439346923% which is below threshold 100.0%
2025-06-27 06:10:30,412 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:10:32,700 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89309, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-61.200000000000000000000000, PnL USD=-44.82235844703711027618482631, Commission=3.00000000, Final PnL=-47.82235844703711027618482631
2025-06-27 06:10:32,700 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.53089543150748406552637747% which is below threshold 100.0%
2025-06-27 06:10:34,973 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:10:37,254 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:10:39,546 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89307, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-61.800000000000000000000000, PnL USD=-45.26212482971773425712988326, Commission=3.00000000, Final PnL=-48.26212482971773425712988326
2025-06-27 06:10:39,546 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.30684490028646104690753857% which is below threshold 100.0%
2025-06-27 06:10:41,936 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89304, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-62.700000000000000000000000, PnL USD=-45.92330003222687721559780857, Commission=3.00000000, Final PnL=-48.92330003222687721559780857
2025-06-27 06:10:41,936 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 76.96999183196103667434389209% which is below threshold 100.0%
2025-06-27 06:10:44,239 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89306, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-62.100000000000000000000000, PnL USD=-45.48317635167797032241053510, Commission=3.00000000, Final PnL=-48.48317635167797032241053510
2025-06-27 06:10:44,239 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.19422439796312903891861876% which is below threshold 100.0%
2025-06-27 06:10:46,508 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89306, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-62.100000000000000000000000, PnL USD=-45.48350948122431939531102371, Commission=3.00000000, Final PnL=-48.48350948122431939531102371
2025-06-27 06:10:46,508 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.19405467636829050575146541% which is below threshold 100.0%
2025-06-27 06:10:48,818 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89308, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-61.500000000000000000000000, PnL USD=-45.04306556512568113904025312, Commission=3.00000000, Final PnL=-48.04306556512568113904025312
2025-06-27 06:10:48,818 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.41845039478006870845717694% which is below threshold 100.0%
2025-06-27 06:10:51,064 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89312, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.300000000000000000000000, PnL USD=-44.16288267174454372345100337, Commission=3.00000000, Final PnL=-47.16288267174454372345100337
2025-06-27 06:10:51,064 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.86688268201317315903250285% which is below threshold 100.0%
2025-06-27 06:10:53,358 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89311, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.600000000000000000000000, PnL USD=-44.38227345632447396752623754, Commission=3.00000000, Final PnL=-47.38227345632447396752623754
2025-06-27 06:10:53,358 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.75510828595655493808526722% which is below threshold 100.0%
2025-06-27 06:10:55,699 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89312, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.300000000000000000000000, PnL USD=-44.16255923129316469045927597, Commission=3.00000000, Final PnL=-47.16255923129316469045927597
2025-06-27 06:10:55,699 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.86704746724415901240102099% which is below threshold 100.0%
2025-06-27 06:10:58,072 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89311, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.600000000000000000000000, PnL USD=-44.38292356030145233230066135, Commission=3.00000000, Final PnL=-47.38292356030145233230066135
2025-06-27 06:10:58,072 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.75477707341478890752972213% which is below threshold 100.0%
2025-06-27 06:11:00,260 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89312, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.300000000000000000000000, PnL USD=-44.16352956686050769749080842, Commission=3.00000000, Final PnL=-47.16352956686050769749080842
2025-06-27 06:11:00,260 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.86655310430991048629977155% which is below threshold 100.0%
2025-06-27 06:11:02,679 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89311, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.600000000000000000000000, PnL USD=-44.38292356030145233230066135, Commission=3.00000000, Final PnL=-47.38292356030145233230066135
2025-06-27 06:11:02,680 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.75477707341478890752972213% which is below threshold 100.0%
2025-06-27 06:11:03,719 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 06:11:03,722 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 06:11:03,722 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 06:11:05,022 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:11:07,143 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:11:08,336 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 06:11:08,371 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 06:11:08,414 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 06:11:09,070 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5214500000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.6500000000000000000000000, PnL USD=-452.2654026058713617496206564, Commission=0.10000000, Final PnL=-452.3654026058713617496206564
2025-06-27 06:11:09,136 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 06:11:09,246 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 06:11:09,260 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 06:11:09,313 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 06:11:10,150 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89312, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.300000000000000000000000, PnL USD=-44.16352956686050769749080842, Commission=3.00000000, Final PnL=-47.16352956686050769749080842
2025-06-27 06:11:10,150 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.86655310430991048629977155% which is below threshold 100.0%
2025-06-27 06:11:10,597 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.8931200000, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.30000000000000000000000000, PnL USD=-44.16352956686050769749080842, Commission=3.00000000, Final PnL=-47.16352956686050769749080842
2025-06-27 06:11:10,597 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.86655310430991048629977155% which is below threshold 100.0%
2025-06-27 06:11:10,601 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 06:11:12,239 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89313, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.000000000000000000000000, PnL USD=-43.94284500626185541339231440, Commission=3.00000000, Final PnL=-46.94284500626185541339231440
2025-06-27 06:11:12,239 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.97898664853176308671677481% which is below threshold 100.0%
2025-06-27 06:11:14,651 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89311, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.600000000000000000000000, PnL USD=-44.38259850593232752307016259, Commission=3.00000000, Final PnL=-47.38259850593232752307016259
2025-06-27 06:11:14,652 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.75494268089854925460048777% which is below threshold 100.0%
2025-06-27 06:11:17,741 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89312, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.300000000000000000000000, PnL USD=-44.16255923129316469045927597, Commission=3.00000000, Final PnL=-47.16255923129316469045927597
2025-06-27 06:11:17,742 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.86704746724415901240102099% which is below threshold 100.0%
2025-06-27 06:11:18,276 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 06:11:18,281 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 06:11:18,282 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 06:11:19,157 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89314, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-59.700000000000000000000000, PnL USD=-43.72249035102495184667101206, Commission=3.00000000, Final PnL=-46.72249035102495184667101206
2025-06-27 06:11:19,157 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 78.09125211380428375449815972% which is below threshold 100.0%
2025-06-27 06:11:21,469 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89315, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-59.400000000000000000000000, PnL USD=-43.50118639599261798049037701, Commission=3.00000000, Final PnL=-46.50118639599261798049037701
2025-06-27 06:11:21,469 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 78.20400122478468617256451141% which is below threshold 100.0%
2025-06-27 06:11:24,112 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89313, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-60.000000000000000000000000, PnL USD=-43.94027052559886927037180792, Commission=3.00000000, Final PnL=-46.94027052559886927037180792
2025-06-27 06:11:24,112 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 77.98029828530728078746086820% which is below threshold 100.0%
2025-06-27 06:11:26,144 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89513000, Current=0.89316, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-59.100000000000000000000000, PnL USD=-43.28211738168822228406544315, Commission=3.00000000, Final PnL=-46.28211738168822228406544315
2025-06-27 06:11:26,144 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 78.31561168652525866921467129% which is below threshold 100.0%
2025-06-27 06:11:28,270 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.8931, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-150.900000000000000000000000, PnL USD=-110.5162551907485663646816707, Commission=3.00000000, Final PnL=-113.5162551907485663646816707
2025-06-27 06:11:28,270 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 44.06141471838772856904337136% which is below threshold 100.0%
2025-06-27 06:11:30,514 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:11:33,114 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.89309, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-151.200000000000000000000000, PnL USD=-110.7351584127960627499231006, Commission=3.00000000, Final PnL=-113.7351584127960627499231006
2025-06-27 06:11:33,114 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 43.94988872386587387919140992% which is below threshold 100.0%
2025-06-27 06:11:35,029 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:11:37,500 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:11:39,318 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:11:41,597 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.89311, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-150.600000000000000000000000, PnL USD=-110.2916944348832270207327880, Commission=3.00000000, Final PnL=-113.2916944348832270207327880
2025-06-27 06:11:41,597 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 44.17582309207090532874832484% which is below threshold 100.0%
2025-06-27 06:11:43,792 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.89314, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-149.700000000000000000000000, PnL USD=-109.6333836216366645672520616, Commission=3.00000000, Final PnL=-112.6333836216366645672520616
2025-06-27 06:11:43,793 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 44.51121682207221083796002568% which is below threshold 100.0%
2025-06-27 06:11:46,054 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.89307, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-151.800000000000000000000000, PnL USD=-111.1713268788540125671934733, Commission=3.00000000, Final PnL=-114.1713268788540125671934733
2025-06-27 06:11:46,054 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 43.72767124574382893458657362% which is below threshold 100.0%
2025-06-27 06:11:48,275 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:11:50,576 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.89305, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-152.400000000000000000000000, PnL USD=-111.6099218584077277420961281, Commission=3.00000000, Final PnL=-114.6099218584077277420961281
2025-06-27 06:11:50,577 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 43.50421751660498892291821474% which is below threshold 100.0%
2025-06-27 06:11:52,847 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.89307, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-151.800000000000000000000000, PnL USD=-111.1696985675366903945865190, Commission=3.00000000, Final PnL=-114.1696985675366903945865190
2025-06-27 06:11:52,847 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 43.72850083170129896342647290% which is below threshold 100.0%
2025-06-27 06:11:55,202 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.89307, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-151.800000000000000000000000, PnL USD=-111.1672561899949469429004548, Commission=3.00000000, Final PnL=-114.1672561899949469429004548
2025-06-27 06:11:55,203 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 43.72974516507288213628466741% which is below threshold 100.0%
2025-06-27 06:11:57,532 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.89305, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-152.400000000000000000000000, PnL USD=-111.6123740332786501054605109, Commission=3.00000000, Final PnL=-114.6123740332786501054605109
2025-06-27 06:11:57,532 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 43.50296819172679330269996388% which is below threshold 100.0%
2025-06-27 06:11:59,715 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.89304, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-152.700000000000000000000000, PnL USD=-111.8312644183236295726683511, Commission=3.00000000, Final PnL=-114.8312644183236295726683511
2025-06-27 06:11:59,715 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 43.39144873735295008525150239% which is below threshold 100.0%
2025-06-27 06:12:02,131 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.89306, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-152.100000000000000000000000, PnL USD=-111.3869543247577828064239735, Commission=3.00000000, Final PnL=-114.3869543247577828064239735
2025-06-27 06:12:02,131 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 43.61781418139505665048707280% which is below threshold 100.0%
2025-06-27 06:12:04,278 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-27 06:12:06,688 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.89308, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-151.500000000000000000000000, PnL USD=-110.9475580552321110793769361, Commission=3.00000000, Final PnL=-113.9475580552321110793769361
2025-06-27 06:12:06,688 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 43.84167614875070762208226202% which is below threshold 100.0%
2025-06-27 06:12:06,690 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-27 06:12:06,693 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-27 06:12:06,694 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-27 06:12:08,332 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-27 06:12:08,352 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-27 06:12:08,402 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-27 06:12:09,192 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.8931, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-150.900000000000000000000000, PnL USD=-110.5073525103989688909719374, Commission=3.00000000, Final PnL=-113.5073525103989688909719374
2025-06-27 06:12:09,192 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 44.06595042266202929948444192% which is below threshold 100.0%
2025-06-27 06:12:09,484 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5215400000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-360.5600000000000000000000000, PnL USD=-451.9768345576252914483415649, Commission=0.10000000, Final PnL=-452.0768345576252914483415649
2025-06-27 06:12:09,491 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-27 06:12:09,527 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-27 06:12:09,533 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-27 06:12:09,556 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-27 06:12:10,034 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89813000, Current=0.8931000000, Quantity=0.30000000, Contract Size=100000.00000000, PnL=-150.9000000000000000000000000, PnL USD=-110.5073525103989688909719374, Commission=3.00000000, Final PnL=-113.5073525103989688909719374
2025-06-27 06:12:10,035 - WARNING - app.services.portfolio_calculator - MARGIN CALL ALERT: User has margin level 44.06595042266202929948444192% which is below threshold 100.0%
2025-06-27 06:12:10,211 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-27 06:12:21,807 - INFO - app.main - Application shutdown event triggered.
2025-06-27 06:12:21,807 - INFO - app.main - APScheduler shut down gracefully.
2025-06-27 06:12:21,807 - INFO - app.main - Cancelling 5 other background tasks...
2025-06-27 06:12:21,817 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-27 06:12:21,819 - INFO - app.main - Background task 'Task-6' cancelled successfully.
2025-06-27 06:12:21,819 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-27 06:12:22,001 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-27 06:12:22,004 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-27 06:12:22,005 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-27 06:12:22,009 - INFO - app.main - Background task 'Task-7' cancelled successfully.
2025-06-27 06:12:22,013 - INFO - app.main - Redis client connection closed.
2025-06-27 06:12:22,013 - INFO - app.main - Application shutdown event finished.
