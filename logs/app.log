2025-06-29 23:34:48,593 - INFO - app.core.config - .env file loaded successfully.
2025-06-29 23:34:48,599 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-29 23:34:48,599 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-29 23:34:49,080 - INFO - app.main - Application startup initiated
2025-06-29 23:34:49,110 - INFO - app.main - Firebase already initialized
2025-06-29 23:34:49,111 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-29 23:34:49,116 - INFO - app.main - Redis initialized
2025-06-29 23:34:49,124 - INFO - app.main - Scheduler initialized
2025-06-29 23:34:49,124 - INFO - app.main - Background tasks initialized
2025-06-29 23:34:50,110 - INFO - app.main - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-29 23:34:50,110 - INFO - app.main - Application startup completed
2025-06-29 23:34:50,111 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-29 23:34:50,111 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-29 23:34:50,831 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-29 23:34:51,095 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-29 23:34:51,104 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-29 23:34:51,113 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-29 23:34:51,119 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-29 23:34:51,125 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-29 23:34:51,133 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-29 23:34:51,140 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-29 23:34:51,147 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-29 23:34:51,155 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-29 23:34:51,163 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-29 23:34:51,171 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-29 23:34:51,178 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-29 23:34:51,186 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-29 23:34:51,195 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-29 23:34:51,204 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-29 23:34:51,211 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-29 23:34:51,218 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-29 23:34:51,225 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-29 23:34:51,236 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-29 23:34:51,244 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-29 23:34:51,253 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-29 23:34:51,260 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-29 23:34:51,268 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-29 23:34:51,278 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-29 23:34:51,286 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-29 23:34:51,296 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-29 23:34:51,307 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-29 23:34:51,314 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-29 23:34:51,322 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-29 23:34:51,326 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-29 23:34:51,333 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-29 23:34:51,339 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-29 23:34:51,344 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-29 23:34:51,353 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-29 23:34:51,360 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-29 23:34:51,368 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-29 23:34:51,374 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-29 23:34:51,383 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-29 23:34:51,389 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-29 23:34:51,396 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-29 23:34:51,403 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-29 23:34:51,408 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-29 23:34:51,415 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-29 23:34:51,431 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-29 23:34:51,437 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-29 23:34:51,445 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-29 23:34:51,451 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-29 23:34:51,457 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-29 23:34:51,464 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-29 23:34:51,469 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-29 23:34:51,476 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-29 23:34:51,483 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-29 23:34:51,490 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-29 23:34:51,496 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-29 23:34:51,503 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-29 23:34:51,509 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-29 23:34:51,516 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-29 23:34:51,524 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-29 23:34:51,530 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-29 23:34:51,537 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-29 23:34:51,544 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-29 23:34:51,550 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-29 23:34:51,557 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-29 23:34:51,564 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-29 23:34:51,571 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-29 23:34:51,578 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-29 23:34:51,585 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-29 23:34:51,592 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-29 23:34:51,598 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-29 23:34:51,605 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-29 23:34:51,611 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-29 23:34:51,615 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-29 23:34:51,622 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-29 23:34:51,629 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-29 23:34:51,635 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-29 23:34:51,641 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-29 23:34:51,647 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-29 23:34:51,653 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-29 23:34:51,660 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-29 23:34:54,053 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.187, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-74.000000000000000000000000, PnL USD=-0.5138924575865110174376210946, Commission=0.10000000, Final PnL=-0.6138924575865110174376210946
2025-06-29 23:34:56,463 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.187, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-74.000000000000000000000000, PnL USD=-0.5139174398577698761042280127, Commission=0.10000000, Final PnL=-0.6139174398577698761042280127
2025-06-29 23:34:58,714 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.177, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-84.000000000000000000000000, PnL USD=-0.5833657425412522917939885549, Commission=0.10000000, Final PnL=-0.6833657425412522917939885549
2025-06-29 23:35:01,173 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.185, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-76.000000000000000000000000, PnL USD=-0.5278107659506496933836142537, Commission=0.10000000, Final PnL=-0.6278107659506496933836142537
2025-06-29 23:35:03,222 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.18, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-81.000000000000000000000000, PnL USD=-0.5625507858348323112503212096, Commission=0.10000000, Final PnL=-0.6625507858348323112503212096
2025-06-29 23:35:05,534 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-06-29 23:35:07,909 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-06-29 23:35:10,123 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.176, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-85.000000000000000000000000, PnL USD=-0.5903351714750045143277818677, Commission=0.10000000, Final PnL=-0.6903351714750045143277818677
2025-06-29 23:35:12,600 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.187, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-74.000000000000000000000000, PnL USD=-0.5139388551664745183559512730, Commission=0.10000000, Final PnL=-0.6139388551664745183559512730
2025-06-29 23:35:14,804 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.177, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-84.000000000000000000000000, PnL USD=-0.5833819484957079756646387199, Commission=0.10000000, Final PnL=-0.6833819484957079756646387199
2025-06-29 23:35:17,328 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-06-29 23:35:19,385 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-06-29 23:35:21,639 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.183, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-78.000000000000000000000000, PnL USD=-0.5416892370515438143255968999, Commission=0.10000000, Final PnL=-0.6416892370515438143255968999
2025-06-29 23:35:23,917 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.175, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-86.000000000000000000000000, PnL USD=-0.5971475787748753628018719882, Commission=0.10000000, Final PnL=-0.6971475787748753628018719882
2025-06-29 23:35:26,257 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.18, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-81.000000000000000000000000, PnL USD=-0.5624492233340045690319623923, Commission=0.10000000, Final PnL=-0.6624492233340045690319623923
2025-06-29 23:35:28,519 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-06-29 23:35:30,833 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.182, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-79.000000000000000000000000, PnL USD=-0.5486644534885336074340560888, Commission=0.10000000, Final PnL=-0.6486644534885336074340560888
2025-06-29 23:35:33,119 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-06-29 23:35:35,486 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.184, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-77.000000000000000000000000, PnL USD=-0.5347370760298897191588655240, Commission=0.10000000, Final PnL=-0.6347370760298897191588655240
2025-06-29 23:35:37,844 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.183, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-78.000000000000000000000000, PnL USD=-0.5416741899193044347838164419, Commission=0.10000000, Final PnL=-0.6416741899193044347838164419
2025-06-29 23:35:40,000 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.185, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-76.000000000000000000000000, PnL USD=-0.5277997694348375626762226204, Commission=0.10000000, Final PnL=-0.6277997694348375626762226204
2025-06-29 23:35:42,248 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.183, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-78.000000000000000000000000, PnL USD=-0.5416929989652274763356552055, Commission=0.10000000, Final PnL=-0.6416929989652274763356552055
2025-06-29 23:35:44,588 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.188, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-73.000000000000000000000000, PnL USD=-0.5069514854372977402463923110, Commission=0.10000000, Final PnL=-0.6069514854372977402463923110
2025-06-29 23:35:46,943 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.185, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-76.000000000000000000000000, PnL USD=-0.5278071003944663592421801211, Commission=0.10000000, Final PnL=-0.6278071003944663592421801211
2025-06-29 23:35:49,165 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-29 23:35:49,172 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.18, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-81.000000000000000000000000, PnL USD=-0.5625507858348323112503212096, Commission=0.10000000, Final PnL=-0.6625507858348323112503212096
2025-06-29 23:35:49,183 - DEBUG - app.main - Found 10 active users to update portfolios
2025-06-29 23:35:49,209 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-29 23:35:49,605 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCHF: Type=BUY, Entry=0.88210000, Current=0.5222300000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-359.8700000000000000000000000, PnL USD=-450.7615612004609449371210983, Commission=0.10000000, Final PnL=-450.8615612004609449371210983
2025-06-29 23:35:49,607 - WARNING - app.main - No group settings found for group default. Skipping portfolio update for user 10.
2025-06-29 23:35:49,622 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-29 23:35:49,624 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-29 23:35:49,636 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-29 23:35:50,069 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.1800000000, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-81.00000000000000000000000000, PnL USD=-0.5625507858348323112503212096, Commission=0.10000000, Final PnL=-0.6625507858348323112503212096
2025-06-29 23:35:50,069 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-29 23:35:51,448 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.181, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-80.000000000000000000000000, PnL USD=-0.5555864214678593255180843380, Commission=0.10000000, Final PnL=-0.6555864214678593255180843380
2025-06-29 23:35:53,668 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.182, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-79.000000000000000000000000, PnL USD=-0.5486415911995110839491082838, Commission=0.10000000, Final PnL=-0.6486415911995110839491082838
2025-06-29 23:35:56,061 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.188, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-73.000000000000000000000000, PnL USD=-0.5069655680097781852021612012, Commission=0.10000000, Final PnL=-0.6069655680097781852021612012
2025-06-29 23:35:58,310 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.19, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-71.000000000000000000000000, PnL USD=-0.4930966469428007889546351085, Commission=0.10000000, Final PnL=-0.5930966469428007889546351085
2025-06-29 23:36:00,596 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.189, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-72.000000000000000000000000, PnL USD=-0.5000381973622985089138753655, Commission=0.10000000, Final PnL=-0.6000381973622985089138753655
2025-06-29 23:36:02,946 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.184, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-77.000000000000000000000000, PnL USD=-0.5347370760298897191588655240, Commission=0.10000000, Final PnL=-0.6347370760298897191588655240
2025-06-29 23:36:05,267 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.184, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-77.000000000000000000000000, PnL USD=-0.5347890708560792321262380020, Commission=0.10000000, Final PnL=-0.6347890708560792321262380020
2025-06-29 23:36:07,525 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.186, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-75.000000000000000000000000, PnL USD=-0.5208586528511802657073607745, Commission=0.10000000, Final PnL=-0.6208586528511802657073607745
2025-06-29 23:36:09,879 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.186, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-75.000000000000000000000000, PnL USD=-0.5208948278616225526624670968, Commission=0.10000000, Final PnL=-0.6208948278616225526624670968
2025-06-29 23:36:12,124 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.183, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-78.000000000000000000000000, PnL USD=-0.5417118093174431202600216685, Commission=0.10000000, Final PnL=-0.6417118093174431202600216685
2025-06-29 23:36:14,378 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.182, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-79.000000000000000000000000, PnL USD=-0.5486415911995110839491082838, Commission=0.10000000, Final PnL=-0.6486415911995110839491082838
2025-06-29 23:36:16,703 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.192, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-69.000000000000000000000000, PnL USD=-0.4792332268370607028753993610, Commission=0.10000000, Final PnL=-0.5792332268370607028753993610
2025-06-29 23:36:18,972 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.197, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-64.000000000000000000000000, PnL USD=-0.4444753107854712132786999097, Commission=0.10000000, Final PnL=-0.5444753107854712132786999097
2025-06-29 23:36:21,867 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.193, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-68.000000000000000000000000, PnL USD=-0.4722910980073482938484084485, Commission=0.10000000, Final PnL=-0.5722910980073482938484084485
2025-06-29 23:36:24,187 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.19, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-71.000000000000000000000000, PnL USD=-0.4930966469428007889546351085, Commission=0.10000000, Final PnL=-0.5930966469428007889546351085
2025-06-29 23:36:26,491 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.189, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-72.000000000000000000000000, PnL USD=-0.5000764005611968495186764645, Commission=0.10000000, Final PnL=-0.6000764005611968495186764645
2025-06-29 23:36:28,739 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.176, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-85.000000000000000000000000, PnL USD=-0.5903638725091853673105105606, Commission=0.10000000, Final PnL=-0.6903638725091853673105105606
2025-06-29 23:36:31,087 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.193, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-68.000000000000000000000000, PnL USD=-0.4722910980073482938484084485, Commission=0.10000000, Final PnL=-0.5722910980073482938484084485
2025-06-29 23:36:32,700 - INFO - app.main - Application shutdown initiated
2025-06-29 23:36:32,700 - INFO - app.main - Scheduler shutdown completed
2025-06-29 23:36:32,702 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-29 23:36:32,934 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-29 23:36:32,934 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-29 23:36:32,941 - INFO - app.main - Redis connection closed
2025-06-29 23:36:32,942 - INFO - app.main - Application shutdown completed
2025-06-29 23:36:34,874 - INFO - app.core.config - .env file loaded successfully.
2025-06-29 23:36:34,879 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-29 23:36:34,880 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-29 23:36:35,769 - INFO - app.main - Application startup initiated
2025-06-29 23:36:35,803 - INFO - app.main - Firebase already initialized
2025-06-29 23:36:35,803 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-29 23:36:35,806 - INFO - app.main - Redis initialized
2025-06-29 23:36:35,810 - INFO - app.main - Scheduler initialized
2025-06-29 23:36:35,810 - INFO - app.main - Background tasks initialized
2025-06-29 23:36:36,683 - INFO - app.main - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-29 23:36:36,683 - INFO - app.main - Application startup completed
2025-06-29 23:36:36,684 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-29 23:36:36,684 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-29 23:36:37,242 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-29 23:36:38,393 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-29 23:36:38,399 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-29 23:36:38,404 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-29 23:36:38,411 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-29 23:36:38,418 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-29 23:36:38,425 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-29 23:36:38,433 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-29 23:36:38,440 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-29 23:36:38,450 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-29 23:36:38,457 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-29 23:36:38,465 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-29 23:36:38,474 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-29 23:36:38,482 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-29 23:36:38,491 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-29 23:36:38,501 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-29 23:36:38,509 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-29 23:36:38,515 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-29 23:36:38,519 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-29 23:36:38,525 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-29 23:36:38,530 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-29 23:36:38,537 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-29 23:36:38,544 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-29 23:36:38,552 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-29 23:36:38,560 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-29 23:36:38,567 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-29 23:36:38,575 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-29 23:36:38,583 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-29 23:36:38,590 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-29 23:36:38,596 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-29 23:36:38,603 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-29 23:36:38,609 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-29 23:36:38,618 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-29 23:36:38,635 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-29 23:36:38,648 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-29 23:36:38,658 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-29 23:36:38,674 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-29 23:36:38,689 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-29 23:36:38,702 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-29 23:36:38,716 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-29 23:36:38,727 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-29 23:36:38,736 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-29 23:36:38,749 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-29 23:36:38,754 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-29 23:36:38,759 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-29 23:36:38,764 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-29 23:36:38,769 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-29 23:36:38,776 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-29 23:36:38,790 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-29 23:36:38,801 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-29 23:36:38,810 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-29 23:36:38,819 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-29 23:36:38,826 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-29 23:36:38,833 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-29 23:36:38,839 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-29 23:36:38,846 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-29 23:36:38,853 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-29 23:36:38,860 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-29 23:36:38,871 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-29 23:36:38,878 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-29 23:36:38,886 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-29 23:36:38,894 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-29 23:36:38,900 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-29 23:36:38,907 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-29 23:36:38,913 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-29 23:36:38,920 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-29 23:36:38,926 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-29 23:36:38,933 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-29 23:36:38,940 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-29 23:36:38,947 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-29 23:36:38,953 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-29 23:36:38,960 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-29 23:36:38,969 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-29 23:36:38,976 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-29 23:36:38,983 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-29 23:36:38,990 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-29 23:36:38,997 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-29 23:36:39,007 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-29 23:36:39,014 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-29 23:36:39,021 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-29 23:36:40,197 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.195, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-66.000000000000000000000000, PnL USD=-0.4584511298041857977396970055, Commission=0.10000000, Final PnL=-0.5584511298041857977396970055
2025-06-29 23:36:42,555 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.192, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-69.000000000000000000000000, PnL USD=-0.4792332268370607028753993610, Commission=0.10000000, Final PnL=-0.5792332268370607028753993610
2025-06-29 23:36:44,785 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.197, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-64.000000000000000000000000, PnL USD=-0.4445123560543971995721568573, Commission=0.10000000, Final PnL=-0.5445123560543971995721568573
2025-06-29 23:36:47,265 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.186, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-75.000000000000000000000000, PnL USD=-0.5209744305749473815825119303, Commission=0.10000000, Final PnL=-0.6209744305749473815825119303
2025-06-29 23:36:49,337 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.192, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-69.000000000000000000000000, PnL USD=-0.4793197827083651722077885991, Commission=0.10000000, Final PnL=-0.5793197827083651722077885991
2025-06-29 23:36:51,642 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.193, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-68.000000000000000000000000, PnL USD=-0.4722943783077970245454166609, Commission=0.10000000, Final PnL=-0.5722943783077970245454166609
2025-06-29 23:36:53,991 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.191, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-70.000000000000000000000000, PnL USD=-0.4861853894344969370320465627, Commission=0.10000000, Final PnL=-0.5861853894344969370320465627
2025-06-29 23:36:56,234 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.189, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-72.000000000000000000000000, PnL USD=-0.5000729273018981934865501219, Commission=0.10000000, Final PnL=-0.6000729273018981934865501219
2025-06-29 23:36:58,555 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.192, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-69.000000000000000000000000, PnL USD=-0.4792398838711469807887316118, Commission=0.10000000, Final PnL=-0.5792398838711469807887316118
2025-06-29 23:37:00,874 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.194, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-67.000000000000000000000000, PnL USD=-0.4653941263093551165569170070, Commission=0.10000000, Final PnL=-0.5653941263093551165569170070
2025-06-29 23:37:03,293 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.191, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-70.000000000000000000000000, PnL USD=-0.4862090282070694792701307902, Commission=0.10000000, Final PnL=-0.5862090282070694792701307902
2025-06-29 23:37:05,383 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.196, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-65.000000000000000000000000, PnL USD=-0.4515017643299713817343224695, Commission=0.10000000, Final PnL=-0.5515017643299713817343224695
2025-06-29 23:37:07,769 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.186, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-75.000000000000000000000000, PnL USD=-0.5209671929593020428860193244, Commission=0.10000000, Final PnL=-0.6209671929593020428860193244
2025-06-29 23:37:10,000 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.186, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-75.000000000000000000000000, PnL USD=-0.5209708117419874689154082327, Commission=0.10000000, Final PnL=-0.6209708117419874689154082327
2025-06-29 23:37:10,100 - INFO - app.main - Application shutdown initiated
2025-06-29 23:37:10,100 - INFO - app.main - Scheduler shutdown completed
2025-06-29 23:37:10,102 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-29 23:37:11,920 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-29 23:37:11,920 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-29 23:37:11,924 - INFO - app.main - Redis connection closed
2025-06-29 23:37:11,924 - INFO - app.main - Application shutdown completed
2025-06-29 23:37:13,316 - INFO - app.core.config - .env file loaded successfully.
2025-06-29 23:37:13,323 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-29 23:37:13,323 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-29 23:37:13,910 - INFO - app.main - Application startup initiated
2025-06-29 23:37:13,946 - INFO - app.main - Firebase already initialized
2025-06-29 23:37:13,946 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-29 23:37:13,951 - INFO - app.main - Redis initialized
2025-06-29 23:37:13,955 - INFO - app.main - Scheduler initialized
2025-06-29 23:37:13,955 - INFO - app.main - Background tasks initialized
2025-06-29 23:37:14,743 - INFO - app.main - Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-29 23:37:14,743 - INFO - app.main - Application startup completed
2025-06-29 23:37:14,743 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-29 23:37:14,744 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-29 23:37:15,369 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-29 23:37:15,526 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-29 23:37:15,536 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-29 23:37:15,548 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-29 23:37:15,559 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-29 23:37:15,569 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-29 23:37:15,581 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-29 23:37:15,593 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-29 23:37:15,601 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-29 23:37:15,610 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-29 23:37:15,619 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-29 23:37:15,627 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-29 23:37:15,636 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-29 23:37:15,644 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-29 23:37:15,652 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-29 23:37:15,661 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-29 23:37:15,670 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-29 23:37:15,677 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-29 23:37:15,684 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-29 23:37:15,692 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-29 23:37:15,699 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-29 23:37:15,709 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-29 23:37:15,717 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-29 23:37:15,724 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-29 23:37:15,734 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-29 23:37:15,745 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-29 23:37:15,752 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-29 23:37:15,761 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-29 23:37:15,770 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-29 23:37:15,779 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-29 23:37:15,787 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-29 23:37:15,794 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-29 23:37:15,801 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-29 23:37:15,807 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-29 23:37:15,814 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-29 23:37:15,821 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-29 23:37:15,827 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-29 23:37:15,833 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-29 23:37:15,839 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-29 23:37:15,846 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-29 23:37:15,853 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-29 23:37:15,858 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-29 23:37:15,865 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-29 23:37:15,871 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-29 23:37:15,881 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-29 23:37:15,887 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-29 23:37:15,893 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-29 23:37:15,900 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-29 23:37:15,908 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-29 23:37:15,916 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-29 23:37:15,923 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-29 23:37:15,930 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-29 23:37:15,936 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-29 23:37:15,943 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-29 23:37:15,949 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-29 23:37:15,956 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-29 23:37:15,965 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-29 23:37:15,973 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-29 23:37:15,982 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-29 23:37:15,990 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-29 23:37:16,001 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-29 23:37:16,009 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-29 23:37:16,018 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-29 23:37:16,027 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-29 23:37:16,036 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-29 23:37:16,047 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-29 23:37:16,058 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-29 23:37:16,071 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-29 23:37:16,082 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-29 23:37:16,094 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-29 23:37:16,105 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-29 23:37:16,123 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-29 23:37:16,135 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-29 23:37:16,142 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-29 23:37:16,154 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-29 23:37:16,169 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-29 23:37:16,177 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-29 23:37:16,188 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-29 23:37:16,200 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-29 23:37:16,212 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-29 23:37:16,904 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.19, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-71.000000000000000000000000, PnL USD=-0.4931788502681225862021060821, Commission=0.10000000, Final PnL=-0.5931788502681225862021060821
2025-06-29 23:37:17,725 - INFO - app.api.v1.endpoints.users - Refresh token decoded. User ID from token payload: 10
2025-06-29 23:37:17,727 - WARNING - app.api.v1.endpoints.users - Refresh token validation failed for user ID 10. Data found: False, User ID match: False
2025-06-29 23:37:17,729 - ERROR - app.api.v1.endpoints.users - Unexpected error during refresh token process for token: eyJhbGciOiJIUzI1NiIs... : 401: Invalid or expired refresh token
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 310, in refresh_access_token
     raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid or expired refresh token
2025-06-29 23:37:19,208 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.202, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-59.000000000000000000000000, PnL USD=-0.4098218316952036953426179974, Commission=0.10000000, Final PnL=-0.5098218316952036953426179974
2025-06-29 23:37:21,704 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.206, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-55.000000000000000000000000, PnL USD=-0.3820426081701548314497475046, Commission=0.10000000, Final PnL=-0.4820426081701548314497475046
2025-06-29 23:37:24,292 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-56.000000000000000000000000, PnL USD=-0.3889861354227445750326470507, Commission=0.10000000, Final PnL=-0.4889861354227445750326470507
2025-06-29 23:37:26,473 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-56.000000000000000000000000, PnL USD=-0.3889834334734136769353662348, Commission=0.10000000, Final PnL=-0.4889834334734136769353662348
2025-06-29 23:37:28,569 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-56.000000000000000000000000, PnL USD=-0.3889834334734136769353662348, Commission=0.10000000, Final PnL=-0.4889834334734136769353662348
2025-06-29 23:37:31,266 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.196, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-65.000000000000000000000000, PnL USD=-0.4515017643299713817343224695, Commission=0.10000000, Final PnL=-0.5515017643299713817343224695
2025-06-29 23:37:33,437 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-06-29 23:37:35,485 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.202, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-59.000000000000000000000000, PnL USD=-0.4098275251279842737370018685, Commission=0.10000000, Final PnL=-0.5098275251279842737370018685
2025-06-29 23:37:38,023 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-56.000000000000000000000000, PnL USD=-0.3889753278506334741053567459, Commission=0.10000000, Final PnL=-0.4889753278506334741053567459
2025-06-29 23:37:40,033 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.202, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-59.000000000000000000000000, PnL USD=-0.4098161384206102787444344885, Commission=0.10000000, Final PnL=-0.5098161384206102787444344885
2025-06-29 23:37:42,354 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-06-29 23:37:44,712 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.186, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-75.000000000000000000000000, PnL USD=-0.5209780494581828285634898583, Commission=0.10000000, Final PnL=-0.6209780494581828285634898583
2025-06-29 23:37:44,987 - WARNING - app.core.cache - No cached adjusted buy price found for key: adjusted_market_price:default:AUDCAD
2025-06-29 23:37:44,987 - WARNING - app.core.cache - Fallback: Using raw Firebase 'o' price for AUDCAD
2025-06-29 23:37:45,420 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDJPY
2025-06-29 23:37:45,420 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-29 23:37:47,063 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.193, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-68.000000000000000000000000, PnL USD=-0.4723435882831005188833241875, Commission=0.10000000, Final PnL=-0.5723435882831005188833241875
2025-06-29 23:37:47,064 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89410000, Current=0.8941, Quantity=0.01000000, Contract Size=100000.00000000, PnL=0E-24, PnL USD=0E-14, Commission=0.10000000, Final PnL=-0.10000000000000
2025-06-29 23:37:49,227 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDJPY: Type=BUY, Entry=94.26100000, Current=94.205, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-56.000000000000000000000000, PnL USD=-0.3889915394340173101235048138, Commission=0.10000000, Final PnL=-0.4889915394340173101235048138
2025-06-29 23:37:49,228 - DEBUG - app.services.portfolio_calculator - Position calculation for AUDCAD: Type=BUY, Entry=0.89410000, Current=0.89406, Quantity=0.01000000, Contract Size=100000.00000000, PnL=-0.040000000000000000000000, PnL USD=-0.02928922376234723839231450768, Commission=0.10000000, Final PnL=-0.1292892237623472383923145077
2025-06-29 23:37:50,569 - INFO - app.main - Application shutdown initiated
2025-06-29 23:37:50,570 - INFO - app.main - Scheduler shutdown completed
2025-06-29 23:37:50,573 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-29 23:37:50,874 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-29 23:37:50,875 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-29 23:37:50,882 - INFO - app.main - Redis connection closed
2025-06-29 23:37:50,882 - INFO - app.main - Application shutdown completed
